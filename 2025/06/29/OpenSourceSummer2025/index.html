<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>开源之夏NowInOpenHarmony | XBXyftx</title><meta name="author" content="XBXyftx"><meta name="copyright" content="XBXyftx"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="开源之夏2025项目开发笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="开源之夏NowInOpenHarmony">
<meta property="og:url" content="https://xbxyftx.top/2025/06/29/OpenSourceSummer2025/index.html">
<meta property="og:site_name" content="XBXyftx">
<meta property="og:description" content="开源之夏2025项目开发笔记">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xbxyftx.top/img/ArticleTopImgs/OpenSourceSummerTopImg.png">
<meta property="article:published_time" content="2025-06-29T06:01:21.000Z">
<meta property="article:modified_time" content="2025-07-09T16:37:21.230Z">
<meta property="article:author" content="XBXyftx">
<meta property="article:tag" content="鸿蒙">
<meta property="article:tag" content="技术向">
<meta property="article:tag" content="项目">
<meta property="article:tag" content="开源之夏">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xbxyftx.top/img/ArticleTopImgs/OpenSourceSummerTopImg.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "开源之夏NowInOpenHarmony",
  "url": "https://xbxyftx.top/2025/06/29/OpenSourceSummer2025/",
  "image": "https://xbxyftx.top/img/ArticleTopImgs/OpenSourceSummerTopImg.png",
  "datePublished": "2025-06-29T06:01:21.000Z",
  "dateModified": "2025-07-09T16:37:21.230Z",
  "author": [
    {
      "@type": "Person",
      "name": "XBXyftx",
      "url": "https://github.com/XBXyftx"
    }
  ]
}</script><link rel="shortcut icon" href="/img/logo.png"><link rel="canonical" href="https://xbxyftx.top/2025/06/29/OpenSourceSummer2025/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css"><link rel="stylesheet" href="/css/typewriter-effect.css"><link rel="stylesheet" href="/css/entrance-popup.css"><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400,"highlightFullpage":true,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":2000,"languages":{"author":"作者: XBXyftx","link":"链接: ","source":"来源: XBXyftx","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"已切换为繁体中文","cht_to_chs":"已切换为简体中文","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: '/',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '开源之夏NowInOpenHarmony',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post',
  typewriter: '🦋 这篇文章将会记录我的开源之夏2025项目开发笔记，记录我参与NowInOpenHarmony项目的完整历程。在这三个月的时间里，我将深入探索鸿蒙生态系统的奥秘，从初学者到贡献者的蜕变过程。我会详细记录每一次代码提交背后的思考，每一个技术难题的攻克过程，以及与导师协作的珍贵经历。从环境搭建到功能实现，从bug调试到性能优化，从技术分享到项目总结，这里将会是我技术成长轨迹的完整呈现。我相信这段开源贡献的经历不仅会提升我的编程技能和项目管理能力，更会让我深刻理解开源精神的价值所在。这将会成为我大学期间最具意义的技术实践，也是我走向更广阔技术世界的重要里程碑。'
}</script><script src="/js/nyan.js"></script><script>localStorage.setItem('theme','dark')</script><script>document.documentElement.setAttribute('data-theme', 'dark');</script><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/transpancy.css"><script> // 强制锁定为暗黑模式 localStorage.setItem('theme', 'dark'); // 防止其他脚本覆盖模式 document.documentElement.setAttribute('data-theme', 'dark'); </script><link rel="stylesheet" href="/css/styles.css"><script> document.querySelectorAll('#post-comment').forEach(el => { el.style.backgroundColor = 'rgba(255, 255, 255, 0.6)'; }); </script><link rel="twikoo" href="/css/twikoo.css"><link rel="stylesheet" href="/css/rightmenu.css"><script src="/js/custom-lightbox.js" defer></script><script src="/js/nyan.js"></script><script src="/js/header-universe.js"></script><!-- 新增缓存管理脚本 - 已禁用Service Worker--><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="cat__scene"><div class="cat__main"><div class="cat__body"></div><div class="cat__body"></div><div class="cat__tail"></div><div class="cat__head"></div></div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
      setTimeout(() => {
        $loadingBox.style.display = 'none'
      }, 800)
    },
    initLoading: () => {
      $loadingBox.style.display = 'flex'
      $loadingBox.classList.remove('loaded')
      $body.style.overflow = 'hidden'
    }
  }

  preloader.initLoading()
  
  // 设置10秒超时
  const loadingTimeout = setTimeout(() => {
    preloader.endLoading()
  }, 10000)
  
  window.addEventListener('load', () => {
    clearTimeout(loadingTimeout)
    preloader.endLoading()
  })

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="web_bg" style="background-image: url(https://bu.dusays.com/2025/07/04/6867890f5d403.png);"></div><div class="entrance-popup" id="entrance-popup"><div class="popup-content"><div class="popup-header"><span class="popup-title">温馨提示</span><span class="popup-close">×</span></div><div class="popup-body"><div class="popup-text"></div></div></div><div class="popup-overlay"></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/logo.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">31</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">34</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa-solid fa-comment"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/swiper/"><i class="fa-fw fa-solid fa-star-of-david"></i><span> 昨日重现</span></a></div><div class="menus_item"><a class="site-page" href="/LianlianKan/"><i class="fa-fw fa-solid fa-gamepad"></i><span> 连连看</span></a></div><div class="menus_item"><a class="site-page" href="/MarkdownPreview/"><i class="fa-fw fa-solid fa-file-code"></i><span> MD在线编辑器</span></a></div><div class="menus_item"><a class="site-page" href="/coffer/"><i class="fa-fw fa-solid fa-key"></i><span> 秘密基地</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/ArticleTopImgs/OpenSourceSummerTopImg.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/logo.png" alt="Logo"><span class="site-name">XBXyftx</span></a><a class="nav-page-title" href="/"><span class="site-name">开源之夏NowInOpenHarmony</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa-solid fa-comment"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/swiper/"><i class="fa-fw fa-solid fa-star-of-david"></i><span> 昨日重现</span></a></div><div class="menus_item"><a class="site-page" href="/LianlianKan/"><i class="fa-fw fa-solid fa-gamepad"></i><span> 连连看</span></a></div><div class="menus_item"><a class="site-page" href="/MarkdownPreview/"><i class="fa-fw fa-solid fa-file-code"></i><span> MD在线编辑器</span></a></div><div class="menus_item"><a class="site-page" href="/coffer/"><i class="fa-fw fa-solid fa-key"></i><span> 秘密基地</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">开源之夏NowInOpenHarmony</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-06-29T06:01:21.000Z" title="发表于 2025-06-29 14:01:21">2025-06-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-07-09T16:37:21.230Z" title="更新于 2025-07-10 00:37:21">2025-07-10</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">17k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>66分钟</span></span><span class="post-meta-separator">|</span><span id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="twikoo_visitors"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:100,&quot;messagePrev&quot;:&quot;It has been&quot;,&quot;messageNext&quot;:&quot;days since the last update, the content of the article may be outdated.&quot;,&quot;postUpdate&quot;:&quot;2025-07-10 00:37:21&quot;}" hidden></div><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我初次了解到开源之夏活动是在大一上半学期期间的第二届OpenHarmony技术峰会上，我听到了这个名字，当时的我对于OpenHarmony和OpenAtom都知之甚少，也没有能力去参与开源之夏的项目，所以也没有深入的了解。而真正的对开源之夏有所了解是发生在了大一下半学期的春耕校源行，在校源行的主会场，开放原子的工作人员也是介绍了一下开源之夏活动，我也是加入了活动群，但是并没有真正的报名参加，因为我依旧认为我没有能力承担独立的开发。而随着大二下的到来，我一直在由于大二升大三的这个暑假我是去实习还是在家里做项目，虽然手上有鸿小易这个待完善的项目，但我个人其实对如何继续完善它并没有很好的规划，我也担心我会不会因为这个项目的目标不明确而荒废一个假期。这个时候又是子安学长拯救了我，他推荐我去参与开源之夏，与此同时曾老师和开源协会团队也将开源之夏当做工作重点，我也因此决心要尝试去进行开源之夏的项目计划书的投递。</p>
<p>我登录到了开源之夏的活动官网，进行实名认证，提交了之后我就等着说审核完了再开始整项目计划书吧，结果第一次实名审核还没通过，有错。我只好修改再审，再审提交后没几天我们就全部结课了。我只好开始了期末复习，对于当时的我来说有一科“天书”我真是心里打鼓能不能过所以就全身心的投入到期末复习中，想着说等期末考完再投递。结果期末前三天我又突然担心起来会不会截止时间等不到我期末考完，于是又一次前往官网查看，结果发现还真等不到，我只好先放下手头的复习，因为那时各科复习都在稳步推进，“天书”也有了眉目，所以就花了5个小时左右，终于是把简历和项目计划书给整完了，期间还和导师通了几封邮件。有一说一这么晚才和导师联系而且我的项目计划书又是短时间干出来的，真怕过不了。</p>
<p>在期末考完之后我再次登录官网看会不会有什么进展，结果却看到了公告说时间延长了，到现在还没截止，哇我直接炸缸了。不过倒也还好，算是帮我省了点事，可以小小的放松一下了，期末周真的要死人了孩子。</p>
<p>随后又有几个兼职和老师的的项目机会横插在了我提交项目计划书到中选出结果的这段时间里。我内心也还是担心我无法中选，所以也先都拖着说等开源之夏的结果。就这样我怀着这种忐忑不安、但又充满希望的心境一路等待到了28号。</p>
<p><img src="https://bu.dusays.com/2025/06/29/686120088cd6b.png" alt="1751195653463.png"></p>
<p>邮箱的提示音将我悬着的心放了下来，紧接着，协议的签署、群聊的组建、其他项目安排的善后就接二连三的排了上来，像是梦一样的确认了我的中选，以及接下来三个月我生活的基调。</p>
<p><img src="https://bu.dusays.com/2025/06/29/686123033e689.png" alt="1751196415807.png"></p>
<p>我也是特意的问了一下老师能否写成博客文章的形式来进行记录，也是获得了老师的同意，要不没准这篇文章就胎死腹中了。</p>
<h2 id="项目简介"><a href="#项目简介" class="headerlink" title="项目简介"></a>项目简介</h2><h3 id="项目名称"><a href="#项目名称" class="headerlink" title="项目名称"></a>项目名称</h3><p>NowInOpenHarmony</p>
<h3 id="项目背景"><a href="#项目背景" class="headerlink" title="项目背景"></a>项目背景</h3><div class="note default flat"><p>目前OpenHarmony开源项目已成规模，生态日益繁荣，但与OpenHarmony相关的资讯平台多为网站且比较零散，另外OpenHarmony应用比较缺乏，应用生态是未来发展重点。结合上述两个现状，本选题目标为开发一款运行在OpenHarmony系统上的聚合OpenHarmony相关资讯的应用。</p>
</div>
<p>上面这段话是在开源之夏官网上的项目简介，我也算是深有感触，可能作为开发者有加入很多的开发者社群，还能算是能获取到比较丰富的OpenHarmony相关的资讯，但是作为普通用户，想要获取到OpenHarmony相关的资讯，却并不容易，而且OpenHarmony的应用生态也是比较缺乏的，所以这个项目也是很有意义的。</p>
<h3 id="项目目标"><a href="#项目目标" class="headerlink" title="项目目标"></a>项目目标</h3><div class="note default flat"><ol>
<li>使用ArkTS开发运行于OpenHarmony的资讯应用（内容包括OpenHarmony社区新闻、开发者论坛热门话题、版本发布信息等）；</li>
<li>资讯内容来源建议： 1）使用Web开发框架开发服务器聚合OpenHarmony资讯网站，为应用提供接口，2）应用直接通过OpenHarmony社区网站获取资讯并展示。</li>
</ol>
</div>
<p>所以现在的目标就很明确了要用py开发一个后端服务器来提供资讯内容，然后客户端通过网络请求来去获取到资讯内容，然后展示在界面上。</p>
<h2 id="项目时间规划"><a href="#项目时间规划" class="headerlink" title="项目时间规划"></a>项目时间规划</h2><div class="timeline green"><div class="timeline-item headline">
        <div class="timeline-item-title">
          <div class="item-circle"><p>2025</p>
</div>
        </div>
      </div><div class="timeline-item">
        <div class="timeline-item-title">
          <div class="item-circle"><p>07-07</p>
</div>
        </div>
        <div class="timeline-item-content"><p>7.7至7.13完成可行性验证以及方案设计</p>
</div>
      </div><div class="timeline-item">
        <div class="timeline-item-title">
          <div class="item-circle"><p>07-14</p>
</div>
        </div>
        <div class="timeline-item-content"><p>7.14至7.27完成完成后端开发</p>
</div>
      </div><div class="timeline-item">
        <div class="timeline-item-title">
          <div class="item-circle"><p>07-28</p>
</div>
        </div>
        <div class="timeline-item-content"><p>7.28至8.24完成鸿蒙端开发</p>
</div>
      </div><div class="timeline-item">
        <div class="timeline-item-title">
          <div class="item-circle"><p>08-24</p>
</div>
        </div>
        <div class="timeline-item-content"><p>8.24至结项完成最终调优与报告撰写</p>
</div>
      </div></div>
<h2 id="核心问题"><a href="#核心问题" class="headerlink" title="核心问题"></a>核心问题</h2><p>通过对项目目标的分析我们可以分析出有三个核心问题，依次打通这三个核心问题我们就可以完成这个项目了。</p>
<h3 id="信息的获取"><a href="#信息的获取" class="headerlink" title="信息的获取"></a>信息的获取</h3><p>首先的问题就在于信息的获取。在官网上导师所提供的建议仅仅指出了信息的来源，但并没有说明我们该用什么手段获取到数据。我第一个想到的是爬虫，但不确定导师会不会去指定是用什么方式去进行数据的获取，所以我此前先给导师发了邮件进行询问，确认了可以使用爬虫的形式。</p>
<p>在确认了我中选之后我添加了老师的微信，而后面我和老师的微信沟通时老师又提出了可以参考此前的<code>TodayOpenHarmony</code>项目的形式直接使用<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-components-basic-web">web组件</a>来去展示现成的网页。不过我感觉这样的化可能界面的显示效果并不好，但我也还是先去分析一下<code>TodayOpenHarmony</code>的资讯获取形式吧。</p>
<h4 id="TodayOpenHarmony项目分析"><a href="#TodayOpenHarmony项目分析" class="headerlink" title="TodayOpenHarmony项目分析"></a>TodayOpenHarmony项目分析</h4><p>我们重点来看其资讯获取以及展示的形式，这是重点。整体采用了十分标准的<code>MVVM</code>架构，通过<code>ViewModel</code>来获取数据，然后通过<code>Model</code>来存储数据，最后通过<code>View</code>来展示数据。而数据获取的方式则是通过<code>web组件</code>来实现的，通过<code>web组件</code>来展示现成的网页。其数据来源部分的核心代码如下：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">NewsListData</span>: <span class="title class_">NewsItem</span>[] = [</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">NewsItem</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;新闻&#x27;</span>,</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;基于OpenHarmony的团结引擎应用开发赛&#x27;</span>,</span><br><span class="line">    <span class="attr">subtitle</span>: <span class="string">&#x27;促进万物互联产业的繁荣发展&#x27;</span>,</span><br><span class="line">    <span class="attr">image</span>: $r(<span class="string">&#x27;app.media.edu&#x27;</span>),</span><br><span class="line">    <span class="attr">timestamp</span>: <span class="string">&#x27;2024-03-11&#x27;</span>,</span><br><span class="line">    <span class="attr">views</span>: <span class="number">22500</span>,</span><br><span class="line">    <span class="attr">link</span>: <span class="string">&#x27;https://www.openharmony.cn/unityEngine/illustrate&#x27;</span>,</span><br><span class="line">    <span class="attr">isLiked</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">likeCount</span>: <span class="number">806</span>,</span><br><span class="line">    <span class="attr">isBookmarked</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">isExpanded</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">readTime</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">commentCount</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">shareCount</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">tags</span>: [<span class="string">&#x27;开发大赛&#x27;</span>, <span class="string">&#x27;物联网&#x27;</span>],</span><br><span class="line">    <span class="attr">categoryId</span>: <span class="number">0</span></span><br><span class="line">  &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">NewsItem</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;新闻&#x27;</span>,</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;开源鸿蒙开发者大会2025&#x27;</span>,</span><br><span class="line">    <span class="attr">subtitle</span>: <span class="string">&#x27;展示开源鸿蒙操作系统的技术革新&#x27;</span>,</span><br><span class="line">    <span class="attr">image</span>: $r(<span class="string">&#x27;app.media.New&#x27;</span>),</span><br><span class="line">    <span class="attr">timestamp</span>: <span class="string">&#x27;2025-05-24&#x27;</span>,</span><br><span class="line">    <span class="attr">views</span>: <span class="number">23500</span>,</span><br><span class="line">    <span class="attr">link</span>: <span class="string">&#x27;https://www.openharmony.cn/developer2025&#x27;</span>,</span><br><span class="line">    <span class="attr">isLiked</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">likeCount</span>: <span class="number">7000</span>,</span><br><span class="line">    <span class="attr">isBookmarked</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">isExpanded</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">readTime</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">commentCount</span>: <span class="number">0</span>,  <span class="comment">// 补充缺失字段</span></span><br><span class="line">    <span class="attr">shareCount</span>: <span class="number">0</span>,    <span class="comment">// 补充缺失字段</span></span><br><span class="line">    <span class="attr">tags</span>:[<span class="string">&#x27;HarmonyOS&#x27;</span>],         <span class="comment">// 补充默认值</span></span><br><span class="line">    <span class="attr">categoryId</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">NewsItem</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;活动&#x27;</span>,</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;解决方案学生挑战赛&#x27;</span>,</span><br><span class="line">    <span class="attr">subtitle</span>: <span class="string">&#x27;线上&#x27;</span>,</span><br><span class="line">    <span class="attr">image</span>: $r(<span class="string">&#x27;app.media.student2&#x27;</span>),</span><br><span class="line">    <span class="attr">timestamp</span>: <span class="string">&#x27;2022-06-08&#x27;</span>,</span><br><span class="line">    <span class="attr">views</span>: <span class="number">2560</span>,</span><br><span class="line">    <span class="attr">link</span>: <span class="string">&#x27;https://www.openharmony.cn/growthPlan/&#x27;</span>,</span><br><span class="line">    <span class="attr">isLiked</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">likeCount</span>: <span class="number">2560</span>,</span><br><span class="line">    <span class="attr">isBookmarked</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">isExpanded</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">readTime</span>: <span class="number">15</span>,</span><br><span class="line">    <span class="attr">tags</span>: [<span class="string">&#x27;大赛&#x27;</span>, <span class="string">&#x27;openharmony&#x27;</span>],</span><br><span class="line">    <span class="attr">commentCount</span>: <span class="number">0</span>,  <span class="comment">// 补充缺失字段</span></span><br><span class="line">    <span class="attr">shareCount</span>: <span class="number">0</span>,    <span class="comment">// 补充缺失字段</span></span><br><span class="line">    <span class="attr">categoryId</span>: <span class="number">1</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">NewsItem</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;活动&#x27;</span>,</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;OpenHarmony技术大会&#x27;</span>,</span><br><span class="line">    <span class="attr">subtitle</span>: <span class="string">&#x27;上海世博中心&#x27;</span>,</span><br><span class="line">    <span class="attr">image</span>: $r(<span class="string">&#x27;app.media.study&#x27;</span>),</span><br><span class="line">    <span class="attr">views</span>: <span class="number">2200</span>,</span><br><span class="line">    <span class="attr">likeCount</span>: <span class="number">4560</span>,</span><br><span class="line">    <span class="attr">isLiked</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">timestamp</span>: <span class="string">&#x27;2024-10-12&#x27;</span>,</span><br><span class="line">    <span class="attr">link</span>: <span class="string">&#x27;https://www.openharmony.cn/technology/&#x27;</span>,</span><br><span class="line">    <span class="attr">isBookmarked</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">readTime</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">commentCount</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">shareCount</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">tags</span>: [<span class="string">&#x27;大会&#x27;</span>, <span class="string">&#x27;openharmony&#x27;</span>],</span><br><span class="line">    <span class="attr">isExpanded</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">categoryId</span>: <span class="number">1</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">LiveNewsItem</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;直播&#x27;</span>,</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;创新赛赋能直播&#x27;</span>,</span><br><span class="line">    <span class="attr">subtitle</span>: <span class="string">&#x27;如何开发APP&#x27;</span>,</span><br><span class="line">    <span class="attr">author</span>: <span class="string">&#x27;王工程师&#x27;</span>,</span><br><span class="line">    <span class="attr">views</span>: <span class="number">33500</span>,</span><br><span class="line">    <span class="attr">isLiving</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">image</span>: $r(<span class="string">&#x27;app.media.lives&#x27;</span>),</span><br><span class="line">    <span class="attr">timestamp</span>: <span class="string">&#x27;03-16 20:00&#x27;</span>,</span><br><span class="line">    <span class="attr">link</span>: <span class="string">&#x27;https://www.bilibili.com/video/BV18G411i7bR/?spm_id_from=333.999.0.0&amp;vd_source=791e4b558742fd98bce5bd7f4a0d2120&#x27;</span>,</span><br><span class="line">    <span class="attr">tags</span>: [<span class="string">&#x27;直播视频&#x27;</span>, <span class="string">&#x27;openharmony&#x27;</span>],</span><br><span class="line">    <span class="attr">categoryId</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">isLiked</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">isBookmarked</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">isExpanded</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">likeCount</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">readTime</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">commentCount</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">shareCount</span>: <span class="number">0</span></span><br><span class="line">  &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">BlogPostItem</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;博客&#x27;</span>,</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;分布式菜单创建点餐神器&#x27;</span>,</span><br><span class="line">    <span class="attr">subtitle</span>: <span class="string">&#x27;节省顾客时间&#x27;</span>,</span><br><span class="line">    <span class="attr">author</span>: <span class="string">&#x27;张工程师&#x27;</span>,</span><br><span class="line">    <span class="attr">content</span>: <span class="string">&#x27;本文详细讲解如何利用分布式能力...&#x27;</span>,</span><br><span class="line">    <span class="attr">image</span>: $r(<span class="string">&#x27;app.media.bo&#x27;</span>),</span><br><span class="line">    <span class="attr">views</span>: <span class="number">27500</span>,</span><br><span class="line">    <span class="attr">likeCount</span>: <span class="number">3000</span>,</span><br><span class="line">    <span class="attr">isLiked</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">timestamp</span>: <span class="string">&#x27;2022-02-16&#x27;</span>,</span><br><span class="line">    <span class="attr">link</span>: <span class="string">&#x27;https://mp.weixin.qq.com/s/WHN75mnzJ0NtbAwySlEDJw&#x27;</span>,</span><br><span class="line">    <span class="attr">isBookmarked</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">readTime</span>: <span class="number">15</span>,</span><br><span class="line">    <span class="attr">commentCount</span>: <span class="number">12</span>,</span><br><span class="line">    <span class="attr">shareCount</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">tags</span>: [<span class="string">&#x27;文章&#x27;</span>, <span class="string">&#x27;应用&#x27;</span>],</span><br><span class="line">    <span class="attr">isExpanded</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">categoryId</span>: <span class="number">3</span>,</span><br><span class="line">  &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">NewsItem</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">7</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;新闻&#x27;</span>,</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;第二届创新应用挑战赛&#x27;</span>,</span><br><span class="line">    <span class="attr">subtitle</span>: <span class="string">&#x27;技术交锋创意迸发&#x27;</span>,</span><br><span class="line">    <span class="attr">image</span>: $r(<span class="string">&#x27;app.media.sai&#x27;</span>),</span><br><span class="line">    <span class="attr">views</span>: <span class="number">2370</span>,</span><br><span class="line">    <span class="attr">likeCount</span>: <span class="number">479</span>,</span><br><span class="line">    <span class="attr">isLiked</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">timestamp</span>: <span class="string">&#x27;2024-10-21&#x27;</span>,</span><br><span class="line">    <span class="attr">link</span>:<span class="string">&#x27;https://www.openharmony.cn/innovationcompete/compete&#x27;</span>,</span><br><span class="line">    <span class="attr">isBookmarked</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">readTime</span>: <span class="number">15</span>,</span><br><span class="line">    <span class="attr">commentCount</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">shareCount</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">tags</span>: [<span class="string">&#x27;大赛&#x27;</span>],</span><br><span class="line">    <span class="attr">isExpanded</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">categoryId</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p>enm，没错它使用的是静态常量数据，并没有进行任何的数据获取，所以对我们的项目参考价值不大，然后我们再来看一看他是怎么展示的资讯。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WebView容器</span></span><br><span class="line"><span class="title class_">Web</span>(&#123;</span><br><span class="line">  <span class="attr">src</span>: <span class="variable language_">this</span>.<span class="property">url</span>,</span><br><span class="line">  <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span></span><br><span class="line">&#125;)</span><br><span class="line">  .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  .<span class="title function_">onPageBegin</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isLoading</span> = <span class="literal">true</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">onPageEnd</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isLoading</span> = <span class="literal">false</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">onErrorReceive</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;[ERROR] 网页加载失败:&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err));</span><br><span class="line">    prompt.<span class="title function_">showToast</span>(&#123; <span class="attr">message</span>: <span class="string">&#x27;加载失败，请检查网络或网址&#x27;</span> &#125;);</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<p>它仅仅是将数据中的网页链接给到了web组件，然后通过web组件来展示网页，我们的项目会收集很多网页的信息，若是仅仅是将网页链接给到web组件而不是通过统一的数据格式来进行展示的话，我们整体的UI一致性以及美观度都会差一大截，所以我们需要将爬取的数据进行统一化的格式处理。</p>
<p>所以总体看下来这个项目对当前的项目参考意义不大。</p>
<h3 id="资讯内容传递的格式"><a href="#资讯内容传递的格式" class="headerlink" title="资讯内容传递的格式"></a>资讯内容传递的格式</h3><p>上文提到了直接才用展示网页的形式并不可取，所以我们就需要选择一种数据格式来进行前后端数据的传递。</p>
<h4 id="明确需求"><a href="#明确需求" class="headerlink" title="明确需求"></a>明确需求</h4><p>首先我们需要明确一下需求，对于当前项目我们首先需要用爬虫爬取各个论坛的资讯内容，这些博文内容都是图文混排，同时可能包含有视频，所以我们的数据格式需要在传递文本之外还需要传递图片以及视频的链接。</p>
<p>我首先想到的就是我的Markdown格式，因为我的博客以及鸿小易还有其他一些项目使用的都是Markdown格式，且Markdown支持原生的图片链接格式，但问题在于Markdown格式中没有原生的视频格式。只能使用内挂HTML标签的形式去进行视频的上传。我并不确定在使用OpenHarmony三方库进行md渲染时会不会出现问题，所以暂时作为备案。</p>
<p><img src="https://bu.dusays.com/2025/07/08/686ccccad10e7.png" alt="1751960773950.png"></p>
<p>随后就是当下最常用的json格式。json格式我可以采用两种形式，一种是将爬取的HTML文件直接作为一整个字段进行传输然后使用web组件进行渲染确实可以。不过这个方案需要注意整体UI界面的一致性，这一点可能需要针对不同的网站获取到的数据进行定制化的处理。因为各个网站的文章内容部分很有可能会插入一些其他的样式，链接标签等，同时又因为鸿蒙中的Web组件并没有提供很多的属性来通过ArkTS直接调整、改变HTML的结构以及样式，所以我们需要在后端就完成对HTML的格式化处理，这样在鸿蒙中直接展示的时候就不会出现样式错乱的问题。</p>
<p><img src="https://bu.dusays.com/2025/07/08/686cce2e7dcc0.png" alt="1751961129379.png"></p>
<p>还有一种方式就是用<code>type</code>字段以及<code>value</code>字段来进行当前数据类型的区分，可以设置一个枚举类型规定三种数据类型，分别是<code>text</code>、<code>image</code>、<code>video</code>，然后根据不同的类型来决定<code>value</code>字段的值该被渲染为什么样的组件，通过这样的对象数组形式，利用循环渲染成文本、视频、图片组件。这样既可以传递文章的内容也可以正确的传递文章的结构。先暂时采用这种方式，并进行可行性验证。</p>
<h3 id="资讯的渲染形式"><a href="#资讯的渲染形式" class="headerlink" title="资讯的渲染形式"></a>资讯的渲染形式</h3><h2 id="方案设计与可行性验证"><a href="#方案设计与可行性验证" class="headerlink" title="方案设计与可行性验证"></a>方案设计与可行性验证</h2><h3 id="咨询信息获取"><a href="#咨询信息获取" class="headerlink" title="咨询信息获取"></a>咨询信息获取</h3><h4 id="OpenHarmony官网资讯"><a href="#OpenHarmony官网资讯" class="headerlink" title="OpenHarmony官网资讯"></a>OpenHarmony官网资讯</h4><p>首先我们要针对不同的网站编写不同的爬虫，所以我们首先要确认目标网站。</p>
<p>首先是OpenHarmony的官网，官网提供有很多的相关资讯，大多是以微信公众号的形式展现的，整体格式比较规整，我们先来进行爬取的尝试。</p>
<p><img src="https://bu.dusays.com/2025/07/08/686d0149b1aa2.png" alt="1751974181082.png"></p>
<p>我找到了OpenHarmony官网的咨询页面，虽然咨询本身是很容易爬取的，但是要是想要自动爬取整个咨询页面的全部文章，我们就需要先获取到咨询页面的全部文章链接，然后针对每个链接进行爬取，最后将爬取到的数据整合到一起，所以我们需要先获取到咨询页面的全部文章链接。</p>
<p><img src="https://bu.dusays.com/2025/07/08/686d01d4c0807.png" alt="1751974351946.png"></p>
<p>找到目标点击结构，对其进行分析。但在展开其单个文章卡片的全部结构之后并没有找到<code>&lt;a&gt;</code>标签，所以我们不能直接去爬取<code>&lt;a&gt;</code>标签中所指向的目标链接，这是典型的SPA（单页应用）架构。</p>
<p><img src="https://bu.dusays.com/2025/07/08/686d02d5afee0.png" alt="1751974611565.png"></p>
<p>随后我改变了策略，转而模拟用户的点击行为并检测URL的变化以及检测网络请求，从网络请求的API的响应中获取URL。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># openHarmony官网爬虫</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urljoin, urlparse</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="comment"># 尝试导入Selenium，如果失败则使用备用方案</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">    <span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line">    <span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">    <span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line">    <span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line">    <span class="keyword">from</span> selenium.common.exceptions <span class="keyword">import</span> TimeoutException, NoSuchElementException</span><br><span class="line">    SELENIUM_AVAILABLE = <span class="literal">True</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Selenium已安装，将使用JavaScript渲染功能&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> ImportError:</span><br><span class="line">    SELENIUM_AVAILABLE = <span class="literal">False</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Selenium未安装，将使用普通HTTP请求模式&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OpenHarmonyCrawler</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.base_url = <span class="string">&quot;https://www.openharmony.cn&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.session = requests.Session()</span><br><span class="line">        <span class="variable language_">self</span>.session.headers.update(&#123;</span><br><span class="line">            <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 设置Chrome浏览器选项（仅在Selenium可用时）</span></span><br><span class="line">        <span class="keyword">if</span> SELENIUM_AVAILABLE:</span><br><span class="line">            <span class="variable language_">self</span>.chrome_options = Options()</span><br><span class="line">            <span class="variable language_">self</span>.chrome_options.add_argument(<span class="string">&#x27;--headless&#x27;</span>)  <span class="comment"># 无头模式</span></span><br><span class="line">            <span class="variable language_">self</span>.chrome_options.add_argument(<span class="string">&#x27;--no-sandbox&#x27;</span>)</span><br><span class="line">            <span class="variable language_">self</span>.chrome_options.add_argument(<span class="string">&#x27;--disable-dev-shm-usage&#x27;</span>)</span><br><span class="line">            <span class="variable language_">self</span>.chrome_options.add_argument(<span class="string">&#x27;--disable-gpu&#x27;</span>)</span><br><span class="line">            <span class="variable language_">self</span>.chrome_options.add_argument(<span class="string">&#x27;--window-size=1920,1080&#x27;</span>)</span><br><span class="line">            <span class="variable language_">self</span>.chrome_options.add_argument(<span class="string">f&#x27;--user-agent=<span class="subst">&#123;self.session.headers[<span class="string">&quot;User-Agent&quot;</span>]&#125;</span>&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="variable language_">self</span>.chrome_options = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.driver = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">init_driver</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;初始化浏览器驱动&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> SELENIUM_AVAILABLE:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Selenium不可用，跳过浏览器驱动初始化&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="variable language_">self</span>.driver = webdriver.Chrome(options=<span class="variable language_">self</span>.chrome_options)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;浏览器驱动初始化成功&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;浏览器驱动初始化失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;请确保已安装Chrome浏览器和ChromeDriver&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">close_driver</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;关闭浏览器驱动&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.driver:</span><br><span class="line">            <span class="variable language_">self</span>.driver.quit()</span><br><span class="line">            <span class="variable language_">self</span>.driver = <span class="literal">None</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;浏览器驱动已关闭&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_page_content</span>(<span class="params">self, url</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;获取页面内容&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            response = <span class="variable language_">self</span>.session.get(url, timeout=<span class="number">10</span>)</span><br><span class="line">            response.raise_for_status()</span><br><span class="line">            response.encoding = <span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line">            <span class="keyword">return</span> response.text</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;获取页面失败: <span class="subst">&#123;url&#125;</span>, 错误: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_page_content_with_js</span>(<span class="params">self, url, wait_element_class=<span class="literal">None</span>, timeout=<span class="number">10</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;使用Selenium获取JavaScript渲染后的页面内容&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> SELENIUM_AVAILABLE <span class="keyword">or</span> <span class="keyword">not</span> <span class="variable language_">self</span>.driver:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="variable language_">self</span>.driver.get(url)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 等待特定元素加载完成</span></span><br><span class="line">            <span class="keyword">if</span> wait_element_class:</span><br><span class="line">                wait = WebDriverWait(<span class="variable language_">self</span>.driver, timeout)</span><br><span class="line">                wait.until(EC.presence_of_element_located((By.CLASS_NAME, wait_element_class)))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                time.sleep(<span class="number">3</span>)  <span class="comment"># 默认等待3秒</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.driver.page_source</span><br><span class="line">        <span class="keyword">except</span> TimeoutException:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;页面加载超时: <span class="subst">&#123;url&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;获取页面失败: <span class="subst">&#123;url&#125;</span>, 错误: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">verify_url_exists</span>(<span class="params">self, url</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;验证URL是否存在&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            response = <span class="variable language_">self</span>.session.head(url, timeout=<span class="number">5</span>)</span><br><span class="line">            <span class="keyword">return</span> response.status_code == <span class="number">200</span></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">extract_articles_from_data_attributes</span>(<span class="params">self, soup</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;从data属性中提取文章信息&quot;&quot;&quot;</span></span><br><span class="line">        articles = []</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;尝试从data属性提取文章信息...&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 查找包含data-v属性的content-item</span></span><br><span class="line">        content_items = soup.find_all(<span class="string">&#x27;li&#x27;</span>, class_=<span class="string">&#x27;content-item&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(content_items):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="comment"># 查找文章标题</span></span><br><span class="line">                title_elem = item.find(class_=<span class="string">&#x27;item-title&#x27;</span>)</span><br><span class="line">                title = title_elem.get_text().strip() <span class="keyword">if</span> title_elem <span class="keyword">else</span> <span class="string">f&quot;文章<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># 查找日期</span></span><br><span class="line">                date_elem = item.find(class_=<span class="string">&#x27;item-time&#x27;</span>)</span><br><span class="line">                date = date_elem.get_text().strip() <span class="keyword">if</span> date_elem <span class="keyword">else</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># 查找描述</span></span><br><span class="line">                desc_elem = item.find(class_=<span class="string">&#x27;item-info&#x27;</span>)</span><br><span class="line">                description = desc_elem.get_text().strip() <span class="keyword">if</span> desc_elem <span class="keyword">else</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;找到文章: <span class="subst">&#123;title&#125;</span> - <span class="subst">&#123;date&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">                <span class="comment"># 尝试从元素属性中提取ID</span></span><br><span class="line">                article_id = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># 检查data属性</span></span><br><span class="line">                <span class="keyword">for</span> attr_name, attr_value <span class="keyword">in</span> item.attrs.items():</span><br><span class="line">                    <span class="keyword">if</span> <span class="string">&#x27;id&#x27;</span> <span class="keyword">in</span> attr_name.lower() <span class="keyword">or</span> <span class="string">&#x27;key&#x27;</span> <span class="keyword">in</span> attr_name.lower():</span><br><span class="line">                        article_id = <span class="built_in">str</span>(attr_value)</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># 如果没找到ID，尝试从文本内容中提取</span></span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> article_id:</span><br><span class="line">                    <span class="comment"># 使用标题和日期生成一个唯一标识</span></span><br><span class="line">                    content_hash = hashlib.md5((title + date).encode()).hexdigest()[:<span class="number">8</span>]</span><br><span class="line">                    article_id = content_hash</span><br><span class="line"></span><br><span class="line">                <span class="comment"># 构造可能的文章URL（基于常见的URL模式）</span></span><br><span class="line">                possible_urls = [</span><br><span class="line">                    <span class="string">f&quot;<span class="subst">&#123;self.base_url&#125;</span>/newsDetail?id=<span class="subst">&#123;article_id&#125;</span>&quot;</span>,</span><br><span class="line">                    <span class="string">f&quot;<span class="subst">&#123;self.base_url&#125;</span>/newsDetail/<span class="subst">&#123;article_id&#125;</span>&quot;</span>,</span><br><span class="line">                    <span class="string">f&quot;<span class="subst">&#123;self.base_url&#125;</span>/news/detail/<span class="subst">&#123;article_id&#125;</span>&quot;</span>,</span><br><span class="line">                    <span class="string">f&quot;<span class="subst">&#123;self.base_url&#125;</span>/article/<span class="subst">&#123;article_id&#125;</span>&quot;</span>,</span><br><span class="line">                    <span class="string">f&quot;<span class="subst">&#123;self.base_url&#125;</span>/newList?id=3&amp;articleId=<span class="subst">&#123;article_id&#125;</span>&quot;</span>,</span><br><span class="line">                ]</span><br><span class="line"></span><br><span class="line">                articles.append(&#123;</span><br><span class="line">                    <span class="string">&#x27;title&#x27;</span>: title,</span><br><span class="line">                    <span class="string">&#x27;date&#x27;</span>: date,</span><br><span class="line">                    <span class="string">&#x27;description&#x27;</span>: description,</span><br><span class="line">                    <span class="string">&#x27;possible_urls&#x27;</span>: possible_urls</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;处理第<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>个文章项失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> articles</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">extract_article_links</span>(<span class="params">self, news_list_url</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;从资讯列表页面提取文章链接&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># 首先尝试使用Selenium获取动态内容</span></span><br><span class="line">        content = <span class="variable language_">self</span>.get_page_content_with_js(news_list_url, timeout=<span class="number">15</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> content:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Selenium获取失败，尝试使用requests&quot;</span>)</span><br><span class="line">            content = <span class="variable language_">self</span>.get_page_content(news_list_url)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> content:</span><br><span class="line">                <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">        soup = BeautifulSoup(content, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line">        article_links = []</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 保存页面内容到文件以便调试</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;debug_page_js.html&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(content)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;JavaScript渲染后的页面内容已保存到 debug_page_js.html&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;正在查找文章链接...&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 新增：尝试从data属性提取文章信息</span></span><br><span class="line">        articles_data = <span class="variable language_">self</span>.extract_articles_from_data_attributes(soup)</span><br><span class="line">        <span class="keyword">if</span> articles_data:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;从页面结构中提取到 <span class="subst">&#123;<span class="built_in">len</span>(articles_data)&#125;</span> 个文章信息&quot;</span>)</span><br><span class="line">            <span class="comment"># 先尝试验证这些URL是否有效</span></span><br><span class="line">            <span class="keyword">for</span> article <span class="keyword">in</span> articles_data:</span><br><span class="line">                <span class="keyword">for</span> url <span class="keyword">in</span> article[<span class="string">&#x27;possible_urls&#x27;</span>]:</span><br><span class="line">                    <span class="keyword">if</span> <span class="variable language_">self</span>.verify_url_exists(url):</span><br><span class="line">                        article_links.append(url)</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">f&quot;验证有效URL: <span class="subst">&#123;url&#125;</span>&quot;</span>)</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 如果还是没找到，使用Selenium处理JavaScript点击事件</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> article_links <span class="keyword">and</span> <span class="variable language_">self</span>.driver:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;使用Selenium处理JavaScript导航...&quot;</span>)</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="comment"># 等待页面完全加载</span></span><br><span class="line">                time.sleep(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">                <span class="comment"># 查找content-item元素</span></span><br><span class="line">                content_items = <span class="variable language_">self</span>.driver.find_elements(By.CLASS_NAME, <span class="string">&quot;content-item&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;找到 <span class="subst">&#123;<span class="built_in">len</span>(content_items)&#125;</span> 个content-item元素&quot;</span>)</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> i, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(content_items[:<span class="number">5</span>]):  <span class="comment"># 限制处理前5个</span></span><br><span class="line">                    <span class="keyword">try</span>:</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">f&quot;处理第 <span class="subst">&#123;i+<span class="number">1</span>&#125;</span> 个content-item...&quot;</span>)</span><br><span class="line"></span><br><span class="line">                        <span class="comment"># 获取当前URL作为基准</span></span><br><span class="line">                        original_url = <span class="variable language_">self</span>.driver.current_url</span><br><span class="line"></span><br><span class="line">                        <span class="comment"># 滚动到元素可见</span></span><br><span class="line">                        <span class="variable language_">self</span>.driver.execute_script(<span class="string">&quot;arguments[0].scrollIntoView(true);&quot;</span>, item)</span><br><span class="line">                        time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">                        <span class="comment"># 点击元素</span></span><br><span class="line">                        item.click()</span><br><span class="line">                        time.sleep(<span class="number">3</span>)  <span class="comment"># 等待页面跳转</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment"># 检查是否跳转到新页面</span></span><br><span class="line">                        new_url = <span class="variable language_">self</span>.driver.current_url</span><br><span class="line">                        <span class="keyword">if</span> new_url != original_url:</span><br><span class="line">                            <span class="built_in">print</span>(<span class="string">f&quot;  + 成功跳转到: <span class="subst">&#123;new_url&#125;</span>&quot;</span>)</span><br><span class="line">                            article_links.append(new_url)</span><br><span class="line"></span><br><span class="line">                            <span class="comment"># 返回列表页</span></span><br><span class="line">                            <span class="variable language_">self</span>.driver.back()</span><br><span class="line">                            time.sleep(<span class="number">3</span>)</span><br><span class="line">                        <span class="keyword">else</span>:</span><br><span class="line">                            <span class="built_in">print</span>(<span class="string">f&quot;  - 点击无效，URL未改变&quot;</span>)</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">f&quot;  - 处理第 <span class="subst">&#123;i+<span class="number">1</span>&#125;</span> 个元素失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">                        <span class="comment"># 如果出错，尝试返回列表页</span></span><br><span class="line">                        <span class="keyword">try</span>:</span><br><span class="line">                            <span class="variable language_">self</span>.driver.get(news_list_url)</span><br><span class="line">                            time.sleep(<span class="number">3</span>)</span><br><span class="line">                        <span class="keyword">except</span>:</span><br><span class="line">                            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> article_links:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;通过点击事件找到 <span class="subst">&#123;<span class="built_in">len</span>(article_links)&#125;</span> 个链接&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;Selenium点击处理失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 如果仍然没找到，尝试查找所有链接</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> article_links:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;最后尝试：查找所有链接...&quot;</span>)</span><br><span class="line">            all_links = soup.find_all(<span class="string">&#x27;a&#x27;</span>, href=<span class="literal">True</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;页面共有 <span class="subst">&#123;<span class="built_in">len</span>(all_links)&#125;</span> 个链接&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> link <span class="keyword">in</span> all_links:</span><br><span class="line">                href = link.get(<span class="string">&#x27;href&#x27;</span>)</span><br><span class="line">                link_text = link.get_text().strip()</span><br><span class="line"></span><br><span class="line">                <span class="comment"># 检查链接文本是否像新闻标题</span></span><br><span class="line">                <span class="keyword">if</span> href <span class="keyword">and</span> link_text <span class="keyword">and</span> <span class="built_in">len</span>(link_text) &gt; <span class="number">5</span>:</span><br><span class="line">                    <span class="comment"># 检查是否为相对链接或包含新闻相关关键词</span></span><br><span class="line">                    <span class="keyword">if</span> (href.startswith(<span class="string">&#x27;/&#x27;</span>) <span class="keyword">or</span></span><br><span class="line">                            <span class="built_in">any</span>(keyword <span class="keyword">in</span> href.lower() <span class="keyword">for</span> keyword <span class="keyword">in</span> [<span class="string">&#x27;news&#x27;</span>, <span class="string">&#x27;article&#x27;</span>, <span class="string">&#x27;detail&#x27;</span>]) <span class="keyword">or</span></span><br><span class="line">                            <span class="built_in">any</span>(keyword <span class="keyword">in</span> link_text <span class="keyword">for</span> keyword <span class="keyword">in</span> [<span class="string">&#x27;新闻&#x27;</span>, <span class="string">&#x27;资讯&#x27;</span>, <span class="string">&#x27;动态&#x27;</span>, <span class="string">&#x27;公告&#x27;</span>, <span class="string">&#x27;发布&#x27;</span>])):</span><br><span class="line"></span><br><span class="line">                        full_url = urljoin(<span class="variable language_">self</span>.base_url, href)</span><br><span class="line">                        article_links.append(full_url)</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">f&quot;  + 找到疑似新闻链接: <span class="subst">&#123;full_url&#125;</span> - <span class="subst">&#123;link_text[:<span class="number">50</span>]&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 去重并过滤</span></span><br><span class="line">        <span class="keyword">if</span> article_links:</span><br><span class="line">            unique_links = []</span><br><span class="line">            seen = <span class="built_in">set</span>()</span><br><span class="line">            <span class="keyword">for</span> link <span class="keyword">in</span> article_links:</span><br><span class="line">                <span class="keyword">if</span> link <span class="keyword">not</span> <span class="keyword">in</span> seen <span class="keyword">and</span> <span class="keyword">not</span> <span class="built_in">any</span>(exclude <span class="keyword">in</span> link <span class="keyword">for</span> exclude <span class="keyword">in</span> [<span class="string">&#x27;javascript:&#x27;</span>, <span class="string">&#x27;mailto:&#x27;</span>, <span class="string">&#x27;#&#x27;</span>]):</span><br><span class="line">                    unique_links.append(link)</span><br><span class="line">                    seen.add(link)</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;去重后共有 <span class="subst">&#123;<span class="built_in">len</span>(unique_links)&#125;</span> 个文章链接&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> unique_links[:<span class="number">10</span>]  <span class="comment"># 最多返回10个链接</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;未找到任何文章链接&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse_article_content</span>(<span class="params">self, article_url</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;解析单个文章页面的内容&quot;&quot;&quot;</span></span><br><span class="line">        content = <span class="variable language_">self</span>.get_page_content(article_url)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> content:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">        soup = BeautifulSoup(content, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line">        result_data = []</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 根据页面结构寻找文章主体内容容器</span></span><br><span class="line">        article_container = (</span><br><span class="line">                soup.find(<span class="built_in">id</span>=<span class="string">&#x27;js_content&#x27;</span>) <span class="keyword">or</span>  <span class="comment"># 主要的文章内容容器</span></span><br><span class="line">                soup.find(class_=<span class="string">&#x27;rich_media_content&#x27;</span>) <span class="keyword">or</span>  <span class="comment"># 富媒体内容容器</span></span><br><span class="line">                soup.find(<span class="built_in">id</span>=<span class="string">&#x27;page-content&#x27;</span>) <span class="keyword">or</span>  <span class="comment"># 页面内容容器</span></span><br><span class="line">                soup.find(class_=<span class="string">&#x27;rich_media_area_primary&#x27;</span>) <span class="keyword">or</span>  <span class="comment"># 主要媒体区域</span></span><br><span class="line">                soup.find(class_=re.<span class="built_in">compile</span>(<span class="string">r&#x27;article|content|detail&#x27;</span>, re.I)) <span class="keyword">or</span></span><br><span class="line">                soup.find(<span class="string">&#x27;article&#x27;</span>) <span class="keyword">or</span></span><br><span class="line">                soup.find(<span class="built_in">id</span>=re.<span class="built_in">compile</span>(<span class="string">r&#x27;article|content|detail&#x27;</span>, re.I))</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> article_container:</span><br><span class="line">            <span class="comment"># 如果没找到专门的容器，尝试查找包含文章内容的其他容器</span></span><br><span class="line">            article_container = soup.find(<span class="string">&#x27;body&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> article_container:</span><br><span class="line">            <span class="comment"># 遍历容器中的所有元素</span></span><br><span class="line">            <span class="keyword">for</span> element <span class="keyword">in</span> article_container.find_all([<span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;h1&#x27;</span>, <span class="string">&#x27;h2&#x27;</span>, <span class="string">&#x27;h3&#x27;</span>, <span class="string">&#x27;h4&#x27;</span>, <span class="string">&#x27;h5&#x27;</span>, <span class="string">&#x27;h6&#x27;</span>, <span class="string">&#x27;div&#x27;</span>, <span class="string">&#x27;img&#x27;</span>, <span class="string">&#x27;video&#x27;</span>]):</span><br><span class="line"></span><br><span class="line">                <span class="comment"># 处理文本内容</span></span><br><span class="line">                <span class="keyword">if</span> element.name <span class="keyword">in</span> [<span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;h1&#x27;</span>, <span class="string">&#x27;h2&#x27;</span>, <span class="string">&#x27;h3&#x27;</span>, <span class="string">&#x27;h4&#x27;</span>, <span class="string">&#x27;h5&#x27;</span>, <span class="string">&#x27;h6&#x27;</span>, <span class="string">&#x27;div&#x27;</span>]:</span><br><span class="line">                    text = element.get_text().strip()</span><br><span class="line">                    <span class="keyword">if</span> text <span class="keyword">and</span> <span class="built_in">len</span>(text) &gt; <span class="number">10</span>:  <span class="comment"># 过滤掉太短的文本</span></span><br><span class="line">                        result_data.append(&#123;</span><br><span class="line">                            <span class="string">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line">                            <span class="string">&quot;value&quot;</span>: text</span><br><span class="line">                        &#125;)</span><br><span class="line"></span><br><span class="line">                <span class="comment"># 处理图片</span></span><br><span class="line">                <span class="keyword">elif</span> element.name == <span class="string">&#x27;img&#x27;</span>:</span><br><span class="line">                    img_src = element.get(<span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">                    <span class="keyword">if</span> img_src:</span><br><span class="line">                        <span class="comment"># 构造完整的图片URL</span></span><br><span class="line">                        img_url = urljoin(<span class="variable language_">self</span>.base_url, img_src)</span><br><span class="line">                        result_data.append(&#123;</span><br><span class="line">                            <span class="string">&quot;type&quot;</span>: <span class="string">&quot;image&quot;</span>,</span><br><span class="line">                            <span class="string">&quot;value&quot;</span>: img_url</span><br><span class="line">                        &#125;)</span><br><span class="line"></span><br><span class="line">                <span class="comment"># 处理视频</span></span><br><span class="line">                <span class="keyword">elif</span> element.name == <span class="string">&#x27;video&#x27;</span>:</span><br><span class="line">                    video_src = element.get(<span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">                    <span class="keyword">if</span> video_src:</span><br><span class="line">                        video_url = urljoin(<span class="variable language_">self</span>.base_url, video_src)</span><br><span class="line">                        result_data.append(&#123;</span><br><span class="line">                            <span class="string">&quot;type&quot;</span>: <span class="string">&quot;video&quot;</span>,</span><br><span class="line">                            <span class="string">&quot;value&quot;</span>: video_url</span><br><span class="line">                        &#125;)</span><br><span class="line">                    <span class="comment"># 检查video标签内的source元素</span></span><br><span class="line">                    source_elements = element.find_all(<span class="string">&#x27;source&#x27;</span>)</span><br><span class="line">                    <span class="keyword">for</span> source <span class="keyword">in</span> source_elements:</span><br><span class="line">                        video_src = source.get(<span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">                        <span class="keyword">if</span> video_src:</span><br><span class="line">                            video_url = urljoin(<span class="variable language_">self</span>.base_url, video_src)</span><br><span class="line">                            result_data.append(&#123;</span><br><span class="line">                                <span class="string">&quot;type&quot;</span>: <span class="string">&quot;video&quot;</span>,</span><br><span class="line">                                <span class="string">&quot;value&quot;</span>: video_url</span><br><span class="line">                            &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result_data</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">crawl_openharmony_news</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;爬取OpenHarmony资讯内容&quot;&quot;&quot;</span></span><br><span class="line">        news_list_url = <span class="string">&quot;https://www.openharmony.cn/newList?id=3&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;开始爬取资讯列表页面: <span class="subst">&#123;news_list_url&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 初始化浏览器驱动</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.init_driver():</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;无法初始化浏览器驱动，将使用普通requests方式&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 获取文章链接</span></span><br><span class="line">            article_links = <span class="variable language_">self</span>.extract_article_links(news_list_url)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> article_links:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;未找到任何文章链接&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;共找到 <span class="subst">&#123;<span class="built_in">len</span>(article_links)&#125;</span> 篇文章&quot;</span>)</span><br><span class="line"></span><br><span class="line">            all_articles_data = []</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 爬取每篇文章的内容</span></span><br><span class="line">            <span class="keyword">for</span> i, article_url <span class="keyword">in</span> <span class="built_in">enumerate</span>(article_links[:<span class="number">3</span>]):  <span class="comment"># 限制爬取前3篇文章，避免过度请求</span></span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;\n正在爬取第 <span class="subst">&#123;i+<span class="number">1</span>&#125;</span> 篇文章: <span class="subst">&#123;article_url&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">                article_data = <span class="variable language_">self</span>.parse_article_content(article_url)</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> article_data:</span><br><span class="line">                    article_info = &#123;</span><br><span class="line">                        <span class="string">&quot;url&quot;</span>: article_url,</span><br><span class="line">                        <span class="string">&quot;content&quot;</span>: article_data</span><br><span class="line">                    &#125;</span><br><span class="line">                    all_articles_data.append(article_info)</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;成功解析文章，共 <span class="subst">&#123;<span class="built_in">len</span>(article_data)&#125;</span> 个内容块&quot;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;文章内容解析失败&quot;</span>)</span><br><span class="line"></span><br><span class="line">                <span class="comment"># 添加延迟避免请求过快</span></span><br><span class="line">                time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 输出JSON结果</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span> + <span class="string">&quot;=&quot;</span>*<span class="number">50</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;爬取结果JSON:&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">50</span>)</span><br><span class="line"></span><br><span class="line">            json_output = json.dumps(all_articles_data, ensure_ascii=<span class="literal">False</span>, indent=<span class="number">2</span>)</span><br><span class="line">            <span class="built_in">print</span>(json_output)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> all_articles_data</span><br><span class="line"></span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            <span class="comment"># 确保关闭浏览器驱动</span></span><br><span class="line">            <span class="variable language_">self</span>.close_driver()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;主函数&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;OpenHarmony官网新闻爬虫启动...&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;注意：此脚本需要安装以下依赖:&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;  pip install requests beautifulsoup4 selenium&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;  同时需要安装Chrome浏览器和ChromeDriver&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;如果没有安装，将自动回退到普通HTTP请求模式&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span> * <span class="number">50</span>)</span><br><span class="line"></span><br><span class="line">    crawler = OpenHarmonyCrawler()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        results = crawler.crawl_openharmony_news()</span><br><span class="line">        <span class="keyword">if</span> results:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;\n爬取完成，共处理 <span class="subst">&#123;<span class="built_in">len</span>(results)&#125;</span> 篇文章&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;\n爬取完成，但未找到任何文章&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;爬取过程中出现错误: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">import</span> traceback</span><br><span class="line">        traceback.print_exc()</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="comment"># 确保清理资源</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(crawler, <span class="string">&#x27;driver&#x27;</span>) <span class="keyword">and</span> crawler.driver:</span><br><span class="line">            crawler.close_driver()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">D:\Anaconda\python.exe D:\HarmonyAppS\NowInOpenHarmony\ostest_integration_test\scenario\NowInOpenHarmony\Server\OpenHarmonypy.py </span><br><span class="line">Selenium已安装，将使用JavaScript渲染功能</span><br><span class="line">OpenHarmony官网新闻爬虫启动...</span><br><span class="line">注意：此脚本需要安装以下依赖:</span><br><span class="line">  pip install requests beautifulsoup4 selenium</span><br><span class="line">  同时需要安装Chrome浏览器和ChromeDriver</span><br><span class="line">如果没有安装，将自动回退到普通HTTP请求模式</span><br><span class="line">--------------------------------------------------</span><br><span class="line">开始爬取资讯列表页面: https://www.openharmony.cn/newList?<span class="built_in">id</span>=<span class="number">3</span></span><br><span class="line">浏览器驱动初始化成功</span><br><span class="line">JavaScript渲染后的页面内容已保存到 debug_page_js.html</span><br><span class="line">正在查找文章链接...</span><br><span class="line">尝试从data属性提取文章信息...</span><br><span class="line">找到文章: 对话OpenHarmony开源先锋：如何用代码革新终端生态 - <span class="number">2025.02</span><span class="number">.28</span></span><br><span class="line">找到文章: <span class="number">12</span>强终极PK！第二届OpenHarmony创新应用挑战赛引爆开源热潮 - <span class="number">2025.02</span><span class="number">.24</span></span><br><span class="line">找到文章: 第二届OpenHarmony创新应用挑战赛决赛路演队伍揭晓 - <span class="number">2025.02</span><span class="number">.20</span></span><br><span class="line">找到文章: OpenHarmony社区<span class="number">2024</span>年度运营报告发布，致谢每一位生态共建者！ - <span class="number">2025.02</span><span class="number">.11</span></span><br><span class="line">找到文章: 开源鸿蒙社区恭祝全体开发者<span class="number">2025</span>新年快乐，新春大吉！ - <span class="number">2025.01</span><span class="number">.29</span></span><br><span class="line">找到文章: 共绘<span class="number">2025</span>年开源新蓝图，OpenHarmony社区项目管理委员会年度工作会议在深圳成功举办 - <span class="number">2025.01</span><span class="number">.27</span></span><br><span class="line">找到文章: 对话OpenHarmony开源先锋：如何用代码革新终端生态 - <span class="number">2025.02</span><span class="number">.28</span></span><br><span class="line">找到文章: <span class="number">12</span>强终极PK！第二届OpenHarmony创新应用挑战赛引爆开源热潮 - <span class="number">2025.02</span><span class="number">.24</span></span><br><span class="line">找到文章: 第二届OpenHarmony创新应用挑战赛决赛路演队伍揭晓 - <span class="number">2025.02</span><span class="number">.20</span></span><br><span class="line">找到文章: OpenHarmony社区<span class="number">2024</span>年度运营报告发布，致谢每一位生态共建者！ - <span class="number">2025.02</span><span class="number">.11</span></span><br><span class="line">找到文章: 开源鸿蒙社区恭祝全体开发者<span class="number">2025</span>新年快乐，新春大吉！ - <span class="number">2025.01</span><span class="number">.29</span></span><br><span class="line">找到文章: 共绘<span class="number">2025</span>年开源新蓝图，OpenHarmony社区项目管理委员会年度工作会议在深圳成功举办 - <span class="number">2025.01</span><span class="number">.27</span></span><br><span class="line">从页面结构中提取到 <span class="number">12</span> 个文章信息</span><br><span class="line">验证有效URL: https://www.openharmony.cn/newsDetail?<span class="built_in">id</span>=6ffe8bf2</span><br><span class="line">验证有效URL: https://www.openharmony.cn/newsDetail?<span class="built_in">id</span>=4846eac5</span><br><span class="line">验证有效URL: https://www.openharmony.cn/newsDetail?<span class="built_in">id</span>=6cba5071</span><br><span class="line">验证有效URL: https://www.openharmony.cn/newsDetail?<span class="built_in">id</span>=6f5b68a4</span><br><span class="line">验证有效URL: https://www.openharmony.cn/newsDetail?<span class="built_in">id</span>=059ed888</span><br><span class="line">验证有效URL: https://www.openharmony.cn/newsDetail?<span class="built_in">id</span>=4683d67c</span><br><span class="line">验证有效URL: https://www.openharmony.cn/newsDetail?<span class="built_in">id</span>=6ffe8bf2</span><br><span class="line">验证有效URL: https://www.openharmony.cn/newsDetail?<span class="built_in">id</span>=4846eac5</span><br><span class="line">验证有效URL: https://www.openharmony.cn/newsDetail?<span class="built_in">id</span>=6cba5071</span><br><span class="line">验证有效URL: https://www.openharmony.cn/newsDetail?<span class="built_in">id</span>=6f5b68a4</span><br><span class="line">验证有效URL: https://www.openharmony.cn/newsDetail?<span class="built_in">id</span>=059ed888</span><br><span class="line">验证有效URL: https://www.openharmony.cn/newsDetail?<span class="built_in">id</span>=4683d67c</span><br><span class="line">去重后共有 <span class="number">6</span> 个文章链接</span><br><span class="line">共找到 <span class="number">6</span> 篇文章</span><br><span class="line"></span><br><span class="line">正在爬取第 <span class="number">1</span> 篇文章: https://www.openharmony.cn/newsDetail?<span class="built_in">id</span>=6ffe8bf2</span><br><span class="line">文章内容解析失败</span><br><span class="line"></span><br><span class="line">正在爬取第 <span class="number">2</span> 篇文章: https://www.openharmony.cn/newsDetail?<span class="built_in">id</span>=4846eac5</span><br><span class="line">文章内容解析失败</span><br><span class="line"></span><br><span class="line">正在爬取第 <span class="number">3</span> 篇文章: https://www.openharmony.cn/newsDetail?<span class="built_in">id</span>=6cba5071</span><br><span class="line">文章内容解析失败</span><br><span class="line"></span><br><span class="line">==================================================</span><br><span class="line">爬取结果JSON:</span><br><span class="line">==================================================</span><br><span class="line">[]</span><br><span class="line">浏览器驱动已关闭</span><br><span class="line"></span><br><span class="line">爬取完成，但未找到任何文章</span><br><span class="line"></span><br><span class="line">进程已结束，退出代码为 <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>这一版的效果并不好，爬到了一些URL，但在访问之后都是404页面，所以需要进一步改进。</p>
<p>这主要是因为URL中的ID并非真实ID为了解决这个问题我再次对浏览器的网络请求进行抓包分析。</p>
<p><img src="https://bu.dusays.com/2025/07/08/686d0b7d8248c.png" alt="1751976824948.png"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;code&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;成功&quot;</span>,</span><br><span class="line">    <span class="string">&quot;pageSize&quot;</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="string">&quot;pageNum&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;totalPage&quot;</span>: <span class="number">68</span>,</span><br><span class="line">    <span class="string">&quot;totalNum&quot;</span>: <span class="number">407</span>,</span><br><span class="line">    <span class="string">&quot;data&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;id&quot;</span>: <span class="number">1533</span>,</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="number">3</span>,</span><br><span class="line">            <span class="string">&quot;title&quot;</span>: <span class="string">&quot;对话OpenHarmony开源先锋：如何用代码革新终端生态&quot;</span>,</span><br><span class="line">            <span class="string">&quot;source&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: <span class="string">&quot;2025年2月23日，由开放原子开源基金会主办的第二届OpenHarmony创新应用挑战赛决赛路演在北京圆满结束，作为第二届开放原子大赛的重要赛项之一，本届赛事汇聚全球418支团队，产出超过110个创新作品，集中展示了OpenHarmony在应用与游戏开发领域的前沿成果。&quot;</span>,</span><br><span class="line">            <span class="string">&quot;textDetails&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;backgroundImage&quot;</span>: <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span>,</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://mp.weixin.qq.com/s/cHsMzPTmoYec-_VL6VllBQ&quot;</span>,</span><br><span class="line">            <span class="string">&quot;advertiseImage&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;advertiseUrl&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;startTime&quot;</span>: <span class="string">&quot;2025.02.28&quot;</span>,</span><br><span class="line">            <span class="string">&quot;endTime&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;label&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;recommend&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;likesCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;shareCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;browseCount&quot;</span>: <span class="number">692</span>,</span><br><span class="line">            <span class="string">&quot;skip&quot;</span>: <span class="string">&quot;0&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;id&quot;</span>: <span class="number">1532</span>,</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="number">3</span>,</span><br><span class="line">            <span class="string">&quot;title&quot;</span>: <span class="string">&quot;12强终极PK！第二届OpenHarmony创新应用挑战赛引爆开源热潮&quot;</span>,</span><br><span class="line">            <span class="string">&quot;source&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: <span class="string">&quot;在智能化与万物互联的浪潮中，科技的每一次突破都可能颠覆未来格局。2024年10月21日，由开放原子开源基金会主办，OpenHarmony项目群工作委员会、厦门雅基软件有限公司联合承办的第二届OpenHarmony创新应用挑战赛正式启动。&quot;</span>,</span><br><span class="line">            <span class="string">&quot;textDetails&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;backgroundImage&quot;</span>: <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span>,</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://mp.weixin.qq.com/s/2EeeruCTcZEq1qbydrgsKw&quot;</span>,</span><br><span class="line">            <span class="string">&quot;advertiseImage&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;advertiseUrl&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;startTime&quot;</span>: <span class="string">&quot;2025.02.24&quot;</span>,</span><br><span class="line">            <span class="string">&quot;endTime&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;label&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;recommend&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;likesCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;shareCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;browseCount&quot;</span>: <span class="number">366</span>,</span><br><span class="line">            <span class="string">&quot;skip&quot;</span>: <span class="string">&quot;0&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;id&quot;</span>: <span class="number">1531</span>,</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="number">3</span>,</span><br><span class="line">            <span class="string">&quot;title&quot;</span>: <span class="string">&quot;第二届OpenHarmony创新应用挑战赛决赛路演队伍揭晓&quot;</span>,</span><br><span class="line">            <span class="string">&quot;source&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: <span class="string">&quot;第二届OpenHarmony创新应用挑战赛决赛路演队伍揭晓&quot;</span>,</span><br><span class="line">            <span class="string">&quot;textDetails&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;backgroundImage&quot;</span>: <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span>,</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://mp.weixin.qq.com/s/scsUs8XKUMWp_kelThSetA&quot;</span>,</span><br><span class="line">            <span class="string">&quot;advertiseImage&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;advertiseUrl&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;startTime&quot;</span>: <span class="string">&quot;2025.02.20&quot;</span>,</span><br><span class="line">            <span class="string">&quot;endTime&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;label&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;recommend&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;likesCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;shareCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;browseCount&quot;</span>: <span class="number">166</span>,</span><br><span class="line">            <span class="string">&quot;skip&quot;</span>: <span class="string">&quot;0&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;id&quot;</span>: <span class="number">1530</span>,</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="number">3</span>,</span><br><span class="line">            <span class="string">&quot;title&quot;</span>: <span class="string">&quot;OpenHarmony社区2024年度运营报告发布，致谢每一位生态共建者！&quot;</span>,</span><br><span class="line">            <span class="string">&quot;source&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: <span class="string">&quot;OpenHarmony社区2024年度运营报告发布！&quot;</span>,</span><br><span class="line">            <span class="string">&quot;textDetails&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;backgroundImage&quot;</span>: <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span>,</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://mp.weixin.qq.com/s/njNirZfZFhwztz9zNnuc-A&quot;</span>,</span><br><span class="line">            <span class="string">&quot;advertiseImage&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;advertiseUrl&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;startTime&quot;</span>: <span class="string">&quot;2025.02.11&quot;</span>,</span><br><span class="line">            <span class="string">&quot;endTime&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;label&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;recommend&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;likesCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;shareCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;browseCount&quot;</span>: <span class="number">121</span>,</span><br><span class="line">            <span class="string">&quot;skip&quot;</span>: <span class="string">&quot;0&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;id&quot;</span>: <span class="number">1528</span>,</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="number">3</span>,</span><br><span class="line">            <span class="string">&quot;title&quot;</span>: <span class="string">&quot;开源鸿蒙社区恭祝全体开发者2025新年快乐，新春大吉！&quot;</span>,</span><br><span class="line">            <span class="string">&quot;source&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: <span class="string">&quot;恭祝全体开发者2025新年快乐，新春大吉！&quot;</span>,</span><br><span class="line">            <span class="string">&quot;textDetails&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;backgroundImage&quot;</span>: <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span>,</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://mp.weixin.qq.com/s/fVn6brUk2EnPbUcc3pLeCA&quot;</span>,</span><br><span class="line">            <span class="string">&quot;advertiseImage&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;advertiseUrl&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;startTime&quot;</span>: <span class="string">&quot;2025.01.29&quot;</span>,</span><br><span class="line">            <span class="string">&quot;endTime&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;label&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;recommend&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;likesCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;shareCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;browseCount&quot;</span>: <span class="number">62</span>,</span><br><span class="line">            <span class="string">&quot;skip&quot;</span>: <span class="string">&quot;0&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;id&quot;</span>: <span class="number">1527</span>,</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="number">3</span>,</span><br><span class="line">            <span class="string">&quot;title&quot;</span>: <span class="string">&quot;共绘2025年开源新蓝图，OpenHarmony社区项目管理委员会年度工作会议在深圳成功举办&quot;</span>,</span><br><span class="line">            <span class="string">&quot;source&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: <span class="string">&quot;2025年1月12日上午，OpenHarmony社区项目管理委员会（PMC）（以下简称“PMC”）年度工作会议在深圳召开。本次会议全面总结了2024年PMC的工作及成果，以及明确了2025年PMC工作方向和重点工作，为OpenHarmony社区在2025年持续快速发展及繁荣打下厚实基础。&quot;</span>,</span><br><span class="line">            <span class="string">&quot;textDetails&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;backgroundImage&quot;</span>: <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span>,</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://mp.weixin.qq.com/s/0q1ThRgDGocGMWp1ufHHrA&quot;</span>,</span><br><span class="line">            <span class="string">&quot;advertiseImage&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;advertiseUrl&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;startTime&quot;</span>: <span class="string">&quot;2025.01.27&quot;</span>,</span><br><span class="line">            <span class="string">&quot;endTime&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&quot;label&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;recommend&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;likesCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;shareCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;browseCount&quot;</span>: <span class="number">103</span>,</span><br><span class="line">            <span class="string">&quot;skip&quot;</span>: <span class="string">&quot;0&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>获取这个对象数组之后我们就可以转变思路，先去访问<code>https://www.openharmony.cn/newList?id=3</code>这个网址去点击任意一个content-item后，通过网络监测获取最新响应数据，然后解析json获取目标URL，最后再访问这个URL获取最新内容。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urljoin</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OpenHarmonyCrawler</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.base_url = <span class="string">&quot;https://www.openharmony.cn&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.session = requests.Session()</span><br><span class="line">        <span class="variable language_">self</span>.session.headers.update(&#123;</span><br><span class="line">            <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_page_content</span>(<span class="params">self, url</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            response = <span class="variable language_">self</span>.session.get(url, timeout=<span class="number">10</span>)</span><br><span class="line">            response.raise_for_status()</span><br><span class="line">            response.encoding = <span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line">            <span class="keyword">return</span> response.text</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;获取页面失败: <span class="subst">&#123;url&#125;</span>, 错误: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse_article_content</span>(<span class="params">self, article_url</span>):</span><br><span class="line">        content = <span class="variable language_">self</span>.get_page_content(article_url)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> content:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        soup = BeautifulSoup(content, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line">        result_data = []</span><br><span class="line">        article_container = (</span><br><span class="line">            soup.find(<span class="built_in">id</span>=<span class="string">&#x27;js_content&#x27;</span>) <span class="keyword">or</span></span><br><span class="line">            soup.find(class_=<span class="string">&#x27;rich_media_content&#x27;</span>) <span class="keyword">or</span></span><br><span class="line">            soup.find(<span class="built_in">id</span>=<span class="string">&#x27;page-content&#x27;</span>) <span class="keyword">or</span></span><br><span class="line">            soup.find(class_=<span class="string">&#x27;rich_media_area_primary&#x27;</span>) <span class="keyword">or</span></span><br><span class="line">            soup.find(class_=re.<span class="built_in">compile</span>(<span class="string">r&#x27;article|content|detail&#x27;</span>, re.I)) <span class="keyword">or</span></span><br><span class="line">            soup.find(<span class="string">&#x27;article&#x27;</span>) <span class="keyword">or</span></span><br><span class="line">            soup.find(<span class="built_in">id</span>=re.<span class="built_in">compile</span>(<span class="string">r&#x27;article|content|detail&#x27;</span>, re.I))</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> article_container:</span><br><span class="line">            article_container = soup.find(<span class="string">&#x27;body&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> article_container:</span><br><span class="line">            <span class="keyword">for</span> element <span class="keyword">in</span> article_container.find_all([<span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;h1&#x27;</span>, <span class="string">&#x27;h2&#x27;</span>, <span class="string">&#x27;h3&#x27;</span>, <span class="string">&#x27;h4&#x27;</span>, <span class="string">&#x27;h5&#x27;</span>, <span class="string">&#x27;h6&#x27;</span>, <span class="string">&#x27;div&#x27;</span>, <span class="string">&#x27;img&#x27;</span>, <span class="string">&#x27;video&#x27;</span>]):</span><br><span class="line">                <span class="keyword">if</span> element.name <span class="keyword">in</span> [<span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;h1&#x27;</span>, <span class="string">&#x27;h2&#x27;</span>, <span class="string">&#x27;h3&#x27;</span>, <span class="string">&#x27;h4&#x27;</span>, <span class="string">&#x27;h5&#x27;</span>, <span class="string">&#x27;h6&#x27;</span>, <span class="string">&#x27;div&#x27;</span>]:</span><br><span class="line">                    text = element.get_text().strip()</span><br><span class="line">                    <span class="keyword">if</span> text <span class="keyword">and</span> <span class="built_in">len</span>(text) &gt; <span class="number">10</span>:</span><br><span class="line">                        result_data.append(&#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>, <span class="string">&quot;value&quot;</span>: text&#125;)</span><br><span class="line">                <span class="keyword">elif</span> element.name == <span class="string">&#x27;img&#x27;</span>:</span><br><span class="line">                    img_src = element.get(<span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">                    <span class="keyword">if</span> img_src:</span><br><span class="line">                        img_url = urljoin(<span class="variable language_">self</span>.base_url, img_src)</span><br><span class="line">                        result_data.append(&#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;image&quot;</span>, <span class="string">&quot;value&quot;</span>: img_url&#125;)</span><br><span class="line">                <span class="keyword">elif</span> element.name == <span class="string">&#x27;video&#x27;</span>:</span><br><span class="line">                    video_src = element.get(<span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">                    <span class="keyword">if</span> video_src:</span><br><span class="line">                        video_url = urljoin(<span class="variable language_">self</span>.base_url, video_src)</span><br><span class="line">                        result_data.append(&#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;video&quot;</span>, <span class="string">&quot;value&quot;</span>: video_url&#125;)</span><br><span class="line">                    <span class="keyword">for</span> source <span class="keyword">in</span> element.find_all(<span class="string">&#x27;source&#x27;</span>):</span><br><span class="line">                        video_src = source.get(<span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">                        <span class="keyword">if</span> video_src:</span><br><span class="line">                            video_url = urljoin(<span class="variable language_">self</span>.base_url, video_src)</span><br><span class="line">                            result_data.append(&#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;video&quot;</span>, <span class="string">&quot;value&quot;</span>: video_url&#125;)</span><br><span class="line">        <span class="keyword">return</span> result_data</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">crawl_openharmony_news</span>(<span class="params">self</span>):</span><br><span class="line">        api_url = <span class="string">f&quot;<span class="subst">&#123;self.base_url&#125;</span>/backend/knowledge/secondaryPage/queryBatch?type=3&amp;pageNum=1&amp;pageSize=6&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;请求API: <span class="subst">&#123;api_url&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            resp = <span class="variable language_">self</span>.session.get(api_url, timeout=<span class="number">10</span>)</span><br><span class="line">            resp.raise_for_status()</span><br><span class="line">            data = resp.json().get(<span class="string">&quot;data&quot;</span>, [])</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;API请求失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        all_articles_data = []</span><br><span class="line">        <span class="keyword">for</span> i, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(data):</span><br><span class="line">            title = item.get(<span class="string">&quot;title&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">            date = item.get(<span class="string">&quot;startTime&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">            article_url = item.get(<span class="string">&quot;url&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> article_url:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;第<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>条新闻没有url字段，跳过&quot;</span>)</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;\n正在爬取第 <span class="subst">&#123;i+<span class="number">1</span>&#125;</span> 篇文章: <span class="subst">&#123;title&#125;</span> | <span class="subst">&#123;article_url&#125;</span>&quot;</span>)</span><br><span class="line">            article_data = <span class="variable language_">self</span>.parse_article_content(article_url)</span><br><span class="line">            <span class="keyword">if</span> article_data:</span><br><span class="line">                article_info = &#123;</span><br><span class="line">                    <span class="string">&quot;title&quot;</span>: title,</span><br><span class="line">                    <span class="string">&quot;date&quot;</span>: date,</span><br><span class="line">                    <span class="string">&quot;url&quot;</span>: article_url,</span><br><span class="line">                    <span class="string">&quot;content&quot;</span>: article_data</span><br><span class="line">                &#125;</span><br><span class="line">                all_articles_data.append(article_info)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;成功解析文章，共 <span class="subst">&#123;<span class="built_in">len</span>(article_data)&#125;</span> 个内容块&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;文章内容解析失败&quot;</span>)</span><br><span class="line">            time.sleep(<span class="number">1</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span> + <span class="string">&quot;=&quot;</span>*<span class="number">50</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;爬取结果JSON:&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">50</span>)</span><br><span class="line">        json_output = json.dumps(all_articles_data, ensure_ascii=<span class="literal">False</span>, indent=<span class="number">2</span>)</span><br><span class="line">        <span class="built_in">print</span>(json_output)</span><br><span class="line">        <span class="keyword">return</span> all_articles_data</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;OpenHarmony官网新闻爬虫启动...&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;注意：此脚本需要安装以下依赖:&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;  pip install requests beautifulsoup4&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span> * <span class="number">50</span>)</span><br><span class="line">    crawler = OpenHarmonyCrawler()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        results = crawler.crawl_openharmony_news()</span><br><span class="line">        <span class="keyword">if</span> results:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;\n爬取完成，共处理 <span class="subst">&#123;<span class="built_in">len</span>(results)&#125;</span> 篇文章&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;\n爬取完成，但未找到任何文章&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;爬取过程中出现错误: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">import</span> traceback</span><br><span class="line">        traceback.print_exc()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br></pre></td><td class="code"><pre><span class="line">OpenHarmony官网新闻爬虫启动...</span><br><span class="line">注意：此脚本需要安装以下依赖<span class="punctuation">:</span></span><br><span class="line">  pip install requests beautifulsoup4</span><br><span class="line">--------------------------------------------------</span><br><span class="line">请求API<span class="punctuation">:</span> https<span class="punctuation">:</span><span class="comment">//www.openharmony.cn/backend/knowledge/secondaryPage/queryBatch?type=3&amp;pageNum=1&amp;pageSize=6</span></span><br><span class="line"></span><br><span class="line">正在爬取第 <span class="number">1</span> 篇文章<span class="punctuation">:</span> 对话OpenHarmony开源先锋：如何用代码革新终端生态 | https<span class="punctuation">:</span><span class="comment">//mp.weixin.qq.com/s/cHsMzPTmoYec-_VL6VllBQ</span></span><br><span class="line">成功解析文章，共 <span class="number">21</span> 个内容块</span><br><span class="line"></span><br><span class="line">正在爬取第 <span class="number">2</span> 篇文章<span class="punctuation">:</span> <span class="number">12</span>强终极PK！第二届OpenHarmony创新应用挑战赛引爆开源热潮 | https<span class="punctuation">:</span><span class="comment">//mp.weixin.qq.com/s/2EeeruCTcZEq1qbydrgsKw</span></span><br><span class="line">文章内容解析失败</span><br><span class="line"></span><br><span class="line">正在爬取第 <span class="number">3</span> 篇文章<span class="punctuation">:</span> 第二届OpenHarmony创新应用挑战赛决赛路演队伍揭晓 | https<span class="punctuation">:</span><span class="comment">//mp.weixin.qq.com/s/scsUs8XKUMWp_kelThSetA</span></span><br><span class="line">文章内容解析失败</span><br><span class="line"></span><br><span class="line">正在爬取第 <span class="number">4</span> 篇文章<span class="punctuation">:</span> OpenHarmony社区<span class="number">2024</span>年度运营报告发布，致谢每一位生态共建者！ | https<span class="punctuation">:</span><span class="comment">//mp.weixin.qq.com/s/njNirZfZFhwztz9zNnuc-A</span></span><br><span class="line">文章内容解析失败</span><br><span class="line"></span><br><span class="line">正在爬取第 <span class="number">5</span> 篇文章<span class="punctuation">:</span> 开源鸿蒙社区恭祝全体开发者<span class="number">2025</span>新年快乐，新春大吉！ | https<span class="punctuation">:</span><span class="comment">//mp.weixin.qq.com/s/fVn6brUk2EnPbUcc3pLeCA</span></span><br><span class="line">文章内容解析失败</span><br><span class="line"></span><br><span class="line">正在爬取第 <span class="number">6</span> 篇文章<span class="punctuation">:</span> 共绘<span class="number">2025</span>年开源新蓝图，OpenHarmony社区项目管理委员会年度工作会议在深圳成功举办 | https<span class="punctuation">:</span><span class="comment">//mp.weixin.qq.com/s/0q1ThRgDGocGMWp1ufHHrA</span></span><br><span class="line">成功解析文章，共 <span class="number">27</span> 个内容块</span><br><span class="line"></span><br><span class="line">==================================================</span><br><span class="line">爬取结果JSON<span class="punctuation">:</span></span><br><span class="line">==================================================</span><br><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;对话OpenHarmony开源先锋：如何用代码革新终端生态&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;date&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025.02.28&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/cHsMzPTmoYec-_VL6VllBQ&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025年2月23日，由开放原子开源基金会主办的第二届OpenHarmony创新应用挑战赛决赛路演在北京圆满结束，作为第二届开放原子大赛的重要赛项之一，本届赛事汇聚全球418支团队，产出超过110个创新作品，集中展示了OpenHarmony在应用与游戏开发领域的前沿成果。这些凝聚智慧与协作的参赛作品，不仅在技术层面实现了多项突破，更在商业化应用层面验证了开源生态的无限潜力。赛事不仅彰显了开发者群体的创新活力，也凸显了OpenHarmony作为技术底座的重要价值，为开源技术生态发展注入革新的力量。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;当代码与创意在OpenHarmony的数字沃土中生根发芽，我们不禁期待，这些开发者如何用实践诠释开源精神？他们的探索历程又蕴藏着怎样的创新思维？让我们跟随优秀团队，解开技术突破与生态协同的共生密码。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OpenHarmony创新应用赛题：让书柜学会“思考”&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;由“新大陆自动识别”团队开发的《智能书导》项目，是基于开源操作系统 OpenHarmony打造的图书馆管理应用，通过融合RFID 技术，实现图书馆管理流程的高效优化。团队开发该方案的初衷是帮助图书馆高效地完成图书借阅、查询等工作，减轻管理员负担，同时希望将技术推广至物流、商超、工厂等更多场景，拓展应用范围。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;《智能书导》项目通过技术融合创新，深度整合OpenHarmony系统的分布式能力与RFID自动识别技术，利用前者实现图书信息的高效共享，借助后者完成图书的自动识别与数据交互。功能上，该项目集成了快速借还书、精准定位等核心功能，以及今日推荐等辅助功能，全面满足图书馆管理与读者服务需求。应用程序适配OpenHarmony 4.1 Release和5.0.2.50系统，可在多种设备上流畅运行，项目所用硬件也已通过兼容性测评，确保软硬件的无缝集成与高效协同。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;《智能书导》的开发者徐金生表示：“未来团队将把项目核心代码贡献至OpenHarmony主干代码库，推动各模块与性能的提升。同时，计划进一步优化技术瓶颈，拓展项目对更多设备的适配能力。”&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OpenHarmony创新应用赛题：用技术魔法规划繁琐旅行&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;由“领先风暴队”开发的《出行妈妈》项目，主要是为了解决旅行者在行程规划繁琐、信息整合困难以及个性化需求难以满足三大方面的痛点，提供省时省力的完美行程定制解决方案。该项目填补了OpenHarmony在旅游规划领域的空白，深度融合OpenHarmony 5.0.0 Release特性与旅游出行需求，提供 “规划+路线+玩法” 的一站式服务，支持出行规划记录与最佳路线推荐，为用户打造智能化旅行体验。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;通过bindSheet绑定半模态组件，利用emitter实现跨组件通信，支持拖拽排序、原生时间组件及API12服务卡片的实时同步，并结合Flex+Scroll弹性布局适配动态界面，《出行妈妈》以技术魔法将复杂的旅行“任务”化繁为简。未来，团队将持续优化作品，计划引入分布式数据管理、AI驱动的个性化规划定制以及社区交互等功能，进一步提升用户体验。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;在开发过程中，团队撰写了20余篇技术博客并发布至开源社区，其中多篇登上社区头条。后续，团队计划将项目中的自定义组件，如城市选择、时间选择和日历等，贡献至OpenHarmony主干代码库。作为一支年轻团队，参赛过程不仅显著提升了协作能力，也为团队积累了宝贵的实践经验。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cocos游戏创新应用赛题：从孩童幻想到次世代飞行器&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;“gamemcu”团队打造的《星际穿越》项目，是一款高画质次世代模拟飞行游戏。玩家通过电视屏幕，即可见证掌心玩具蜕变为可操控的星际战舰，在动态的星云间完成飞行模拟。提到游戏背景，开发者陈炫烨说道：“灵感源于我的儿子，因为我经常能看到我儿子拿着玩具进行飞行模拟，于是我就把他的想象变成了一款游戏。”&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;《星际穿越》的核心优势在于其卓越的游戏渲染与镜头模拟技术。团队通过自定义高清渲染管线、重构PBR材质系统、高品质后期处理以及多边形GPU粒子系统等多项技术方案，精准还原环境光照，真实模拟人手抓取物体的触感，最终呈现出令人惊艳的飞船驾驶模拟体验。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;此前，基于Cocos开发的游戏多以风格化为主，而团队勇于突破，首次尝试了次世代效果。未来，团队将通过教程、技术指引等开源方式，帮助更多开发者了解项目，降低开发门槛。希望这个源于父子温情的太空幻想，能够激发更多开发者对次世代游戏的创作热情。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cocos游戏创新应用赛题：因为热爱，所以存在&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;由“路妖姬”团队开发的《引力线流星》项目，是一款宇宙题材的沙盒生存游戏。玩家将操控流浪地球，在复杂的宇宙引力环境中探索生存，建造飞船单位，并与外星文明展开资源争夺。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;项目的核心优势在于对引力模拟的前沿探索，填补了OpenHarmony在游戏领域的空白。游戏采用2D物理系统精准模拟星球间的引力相互作用与轨道运动，为玩家打造高度拟真的宇宙物理环境与沉浸式体验。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;作为携《引力线流星》项目首次参赛的开发者，刘瑞表示，赛事让他深入了解了如何参与社区开源，并与社区成员共同探讨技术，结识了众多志同道合的伙伴，为未来高效合作奠定了基础。同时，他呼吁更多开发者关注OpenHarmony及游戏开发领域，助力开源生态形成更强的“引力效应”。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;融汇创新力量 共筑开源未来&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;第二届OpenHarmony创新应用挑战赛不仅是一次智慧与创新的较量，更是一场开源精神的深度实践。赛事联动产业、前沿科技与优秀人才，推动了OpenHarmony与Cocos的生态深度融合与发展，为开发者提供了施展才华的舞台，更助力开源技术加速落地。在这场融合创意与探索的盛宴中，优秀团队以实力塑造未来，终将推动创新从竞技场走向产业星辰大海。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;未来，OpenHarmony社区将持续拓展应用边界，携手全球开发者共创数字时代的新范式，助力开源生态迈向更加繁荣、智能、可持续的新时代。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;共绘2025年开源新蓝图，OpenHarmony社区项目管理委员会年度工作会议在深圳成功举办&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;date&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025.01.27&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/0q1ThRgDGocGMWp1ufHHrA&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025年1月12日上午，OpenHarmony社区项目管理委员会（PMC）（以下简称“PMC”）年度工作会议在深圳召开。本次会议全面总结了2024年PMC的工作及成果，以及明确了2025年PMC工作方向和重点工作，为OpenHarmony社区在2025年持续快速发展及繁荣打下厚实基础。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;会议伊始，PMC主席任革林为本次会议致辞。他表示，PMC在过去一年里工作成果不断，尤其是社区发布了具有里程碑意义的OpenHarmony 5.0 Release版本，该版本在系统能力完备度和稳定性方面取得显著提升，全面实现对伙伴产品的规模化海量商用的支撑。同时，任革林也指出社区明年工作方向：强化版本规划，积极推动社区走出海外。当前社区版本不仅要完善技术底座对更多品类设备的支撑能力，还要勇于探索国际社区建设路径。此外，PMC主席任革林鼓励PMC成员及各SIG领导成员积极参与国际交流，发展海外开发人员，提升社区的国际影响力。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OpenHarmony社区项目管理委员会主席任革林&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;随后，PMC代表董金光对2024年PMC工作进行总结。他表示，过去一年社区共建成果丰硕，底座开发者人数达8100+，开发者结构日趋多元，社区健康度和活跃度持续提升。OpenHarmony社区5.0 Release版本有效赋能成员单位产品商用，同时SIG组在内容产出和活动组织方面仍需发力。2025年PMC工作重点为版本与产品规划、社区共建、技术攻关和出海等关键战略领域。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OpenHarmony社区项目管理委员会代表董金光&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;在SIG新建申请环节，卫星通信技术专家胡光明提出了北斗SIG的建设构想。他指出，北斗SIG将围绕北斗导航系统的核心能力，推动北斗导航系统与OpenHarmony的融合，打造高精度定位、短报文通信等特色应用。北斗SIG的工作重点是通过技术标准的制定和开发板的集成，以此填补OpenHarmony在导航定位授时方面的空白，推动应急救援、交通物流、大众服务等垂直行业的应用开发。在未来，北斗SIG将致力于建立开源鸿蒙的北斗开发平台，通过与高校、科研机构合作，培养更多基于OpenHarmony的北斗导航领域的专业人才，为社区拓展行业伙伴提供有力支持。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;卫星通信技术专家胡光明&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中移（杭州）信息技术有限公司家庭IoT产品部副总经理施超介绍了家庭网关（Gateway）SIG的规划。他指出，家庭网关SIG将聚焦家庭网关和路由器设备，弥补设备能力方面的不足，推动互联互通标准的建立，并通过开源合作加速行业标准化进程。施超提到，中国移动每年新增1.6亿台智能家庭硬件设备，然而这些设备普遍存在底座、芯片、应用以及服务缺乏统一性的问题。家庭网关SIG将致力于解决这些问题，通过OpenHarmony技术框架，实现家庭网络设备的统一管理。会上，PMC主席任革林补充表示，家庭网关（Gateway）SIG的成立将推动基于OpenHarmony的路由器安全能力进一步提升。在未来，家庭网关（Gateway）SIG将与芯片厂商合作，通过优化设备的内核架构，降低内存和CPU占用，提升设备性能。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中国移动（杭州）信息技术有限公司家庭IoT产品部副总经理施超&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;深圳鸿信智联数字科技有限公司CEO张兆生提出了Watch SIG的建设方案。他指出，随着智能手表市场的快速发展，Watch SIG 将致力于构建手表领域的技术标准体系，研发配套开发工具，推动手表应用生态走向繁荣。张兆生提到，手表产业的复杂性要求SIG在芯片、OS和应用之间建立紧密的协同关系。Watch SIG将围绕表盘设计、应用开发工具和北向应用接口标准化展开工作，推动手表设备的快速开发和商用。他表示，Watch SIG计划在2025年达成500万支手表的出货目标，并通过与方案商和品牌商的深度合作，加速手表生态的成熟。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;深圳鸿信智联数字科技有限公司CEO张兆生&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;华为终端有限公司应用场景化解决方案专家张泰介绍了应用开发场景套件SIG的规划。他指出，应用开发场景套件SIG将围绕应用开发中的关键场景，提供开源库、Sample代码及开发指南，降低开发难度，并计划在2025年推出高性能组件库和多设备适配解决方案。张泰提到，当前开发者在应用开发中面临诸多挑战，如不同设备适配难度高、性能调优复杂等问题。应用开发场景套件SIG将通过提供标准化的开发组件和工具，帮助开发者快速上手并提升开发效率。他还表示，应用开发场景套件SIG将与众多头部生态伙伴合作，推动场景化开发套件的广泛应用。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;华为终端有限公司应用场景化解决方案专家张泰&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;图形SIG、PMC图形领域代表黄然在工作报告中指出，图形SIG持续在图形架构、性能工具研发等方面投入，Smartperf已经成为OpenHarmony性能调试的关键工具。接下来，图形SIG将聚焦统一渲染、SceneBoard等核心技术深化应用与推广，积极推进与国际标准接轨，全力打造开源图形课程，携手社区伙伴提升图形技术竞争力，赋能带UI设备创新发展。游戏SIG着重强化三方库建设、优化工具与引擎协同、深化与团结引擎合作，为游戏开发者营造优质环境。开源图形驱动SIG全力支持OpenGL API、突破多GPU环境使能技术，助力图形处理能力跃升，满足多样化设备需求。针对统一渲染与分离渲染技术路线选择，经会上充分讨论，社区达成并行推进共识，兼顾不同设备性能，确保技术平稳演进。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;图形SIG、PMC图形领域代表黄然&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;智能建筑SIG组长，西安建筑科技大学信控学院院党委书记、教授、博士生导师于军琪在工作报告中汇报了智能建筑SIG的工作进展。他指出，将紧密围绕智能建筑行业需求，全力打造施工现场安全监控与能源负荷管理两大价值场景，成功研发系列核心算法模块。后续计划加速应用移植与创新合作，有力推动OpenHarmony在智能建筑领域落地生根，助力建筑行业智能化转型，提升建筑安全与能源效率，践行绿色节能发展理念。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;智能建筑SIG组长、西安建筑科技大学信控学院院党委书记、教授、博士生导师于军琪&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;开发板SIG组长，江苏润和软件股份有限公司副总裁刘洋在工作报告中对开发板SIG的工作进行了总结。他指出，尽管开发板SIG取得了一定的商用成果，但在开源工作中仍存在不足。为此，开发板SIG制定了2025年工作规划，将明确聚焦于L2标杆平台建设，引入新平台以优化选型；同时，大力加强南向开源工作，提升开源质量和规模；积极拓展海外合作，吸引国际企业参与。此外，开发板SIG还将发起招募行动，诚邀各界携手解决开发板从具备可用性向具备易用性迈进的关键难题，筑牢OpenHarmony硬件基础。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;开发板SIG组长、江苏润和软件股份有限公司副总裁刘洋&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;QT SIG组长、成都中科合迅科技有限公司技术总监蔡万苍在工作报告中分享了QT SIG的工作进展。他全面总结了2024年适配成果与问题，在多项模块适配取得进展的同时，部分关键版本适配仍在攻坚。2025年规划稳步推进版本升级与持续演进，积极应对QT与OpenHarmony框架融合挑战，如渲染线程优化等问题。加强与应用厂家合作，推动QT框架在社区商用与开源协同发展，提升应用开发框架稳定性与兼容性。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;QT SIG组长、成都中科合迅科技有限公司技术总监蔡万苍&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;会议期间，与会者积极互动，各抒己见，为社区发展建言献策。开放原子开源基金会技术监督委员会（TOC）主席谭中意、华为终端软件OpenHarmony使能部部长章晓峰、OpenHarmony项目群工作委员会执行总监陶铭、OpenHarmony PMC主席任革林等充分肯定PMC 2024年各项工作成果，并强调SIG运作对社区成功的关键作用，建议进一步加强SIG考核与协同合作，鼓励技术创新与国际交流，全力提升OpenHarmony社区影响力与竞争力，携手共创开源鸿蒙美好未来。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;开放原子开源基金会技术监督委员会（TOC）主席谭中意&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;华为终端软件OpenHarmony使能部部长章晓峰&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OpenHarmony项目群工作委员会执行总监陶铭&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;会议还表决通过了黄然、李锋和赵鹏分别担任PMC图形领域、规划领域和版本管理领域委员。同时，会议还通过了Crossplatformui SIG成员调整的建议，同意潘锦玲担任该SIG组长。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;本次OpenHarmony社区PMC年度工作会议在热烈氛围中圆满落幕，通过全面总结经验、深入剖析问题、精心规划未来，为PMC发展明确方向。PMC将汇聚各方力量，推动OpenHarmony在全球开源生态中稳健前行，持续拓展应用边界，实现技术与生态协同创新发展，开启开源操作系统发展新征程。&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<p>这套方案对于爬取的成功率以及内容的解析，成功率都大幅提升，但仍然存在两个问题。</p>
<p>首先一点就是在爬取目标网站的链接时仍然有无效URL导致无法访问的问题，还有就是爬取的URL数量不足，导致爬取的内容不够丰富，这一点是因为当前代码并没有包含模仿用户点击所有的文章卡片导致的获取数量不足。另外一点就是在于其生成的json格式文件中仅有<code>text</code>的type类型并没有将图片以及视频的type类型包含进去，这一点在后续的代码中会进行修改。</p>
<p>所以首先要去模仿用户点击全部的ul中的li才能获取全部的，链接，在点击完全部卡片之后再去将链接去重，将去重之后的结果进行逐一访问。</p>
<p><img src="https://bu.dusays.com/2025/07/09/686e265929f85.png" alt="1752049237718.png"></p>
<p>在获取内容时也要注意要将img的src字段在其懒加载结束之后也读取到json中将type字段的值写成image，同时value字段填写爬取到的src值。</p>
<p>首先对于分页遍历，去重以及有效性验证的代码片段如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_all_article_urls</span>(<span class="params">self</span>):</span><br><span class="line">    all_urls = <span class="built_in">set</span>()</span><br><span class="line">    page_num = <span class="number">1</span></span><br><span class="line">    page_size = <span class="number">20</span>  <span class="comment"># 可适当加大</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        api_url = <span class="string">f&quot;<span class="subst">&#123;self.base_url&#125;</span>/backend/knowledge/secondaryPage/queryBatch?type=3&amp;pageNum=<span class="subst">&#123;page_num&#125;</span>&amp;pageSize=<span class="subst">&#123;page_size&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;请求API: <span class="subst">&#123;api_url&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            resp = <span class="variable language_">self</span>.session.get(api_url, timeout=<span class="number">10</span>)</span><br><span class="line">            resp.raise_for_status()</span><br><span class="line">            data = resp.json().get(<span class="string">&quot;data&quot;</span>, [])</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;API请求失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> data:</span><br><span class="line">            url = item.get(<span class="string">&quot;url&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> url:</span><br><span class="line">                all_urls.add(url)</span><br><span class="line">        page_num += <span class="number">1</span></span><br><span class="line">        time.sleep(<span class="number">0.5</span>)  <span class="comment"># 防止请求过快</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;共获取到<span class="subst">&#123;<span class="built_in">len</span>(all_urls)&#125;</span>条原始url，开始去重和有效性校验...&quot;</span>)</span><br><span class="line">    valid_urls = []</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> all_urls:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            r = <span class="variable language_">self</span>.session.head(url, timeout=<span class="number">5</span>)</span><br><span class="line">            <span class="keyword">if</span> r.status_code == <span class="number">200</span>:</span><br><span class="line">                valid_urls.append(url)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;有效url数量: <span class="subst">&#123;<span class="built_in">len</span>(valid_urls)&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> valid_urls</span><br></pre></td></tr></table></figure>
<p>所谓的验证有效性就是通过访问url的head请求，如果返回的状态码是200则说明该url是有效的，否则就是无效的。</p>
<p>对于获取内容以及将内容写入json文件的代码片段如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">parse_article_content</span>(<span class="params">self, article_url</span>):</span><br><span class="line">    content = <span class="variable language_">self</span>.get_page_content(article_url)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> content:</span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line">    soup = BeautifulSoup(content, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line">    result_data = []</span><br><span class="line">    article_container = (</span><br><span class="line">        soup.find(<span class="built_in">id</span>=<span class="string">&#x27;js_content&#x27;</span>) <span class="keyword">or</span></span><br><span class="line">        soup.find(class_=<span class="string">&#x27;rich_media_content&#x27;</span>) <span class="keyword">or</span></span><br><span class="line">        soup.find(<span class="built_in">id</span>=<span class="string">&#x27;page-content&#x27;</span>) <span class="keyword">or</span></span><br><span class="line">        soup.find(class_=<span class="string">&#x27;rich_media_area_primary&#x27;</span>) <span class="keyword">or</span></span><br><span class="line">        soup.find(class_=re.<span class="built_in">compile</span>(<span class="string">r&#x27;article|content|detail&#x27;</span>, re.I)) <span class="keyword">or</span></span><br><span class="line">        soup.find(<span class="string">&#x27;article&#x27;</span>) <span class="keyword">or</span></span><br><span class="line">        soup.find(<span class="built_in">id</span>=re.<span class="built_in">compile</span>(<span class="string">r&#x27;article|content|detail&#x27;</span>, re.I))</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> article_container:</span><br><span class="line">        article_container = soup.find(<span class="string">&#x27;body&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> article_container:</span><br><span class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> article_container.find_all([<span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;h1&#x27;</span>, <span class="string">&#x27;h2&#x27;</span>, <span class="string">&#x27;h3&#x27;</span>, <span class="string">&#x27;h4&#x27;</span>, <span class="string">&#x27;h5&#x27;</span>, <span class="string">&#x27;h6&#x27;</span>, <span class="string">&#x27;div&#x27;</span>, <span class="string">&#x27;img&#x27;</span>, <span class="string">&#x27;video&#x27;</span>]):</span><br><span class="line">            <span class="keyword">if</span> element.name <span class="keyword">in</span> [<span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;h1&#x27;</span>, <span class="string">&#x27;h2&#x27;</span>, <span class="string">&#x27;h3&#x27;</span>, <span class="string">&#x27;h4&#x27;</span>, <span class="string">&#x27;h5&#x27;</span>, <span class="string">&#x27;h6&#x27;</span>, <span class="string">&#x27;div&#x27;</span>]:</span><br><span class="line">                text = element.get_text().strip()</span><br><span class="line">                <span class="keyword">if</span> text <span class="keyword">and</span> <span class="built_in">len</span>(text) &gt; <span class="number">10</span>:</span><br><span class="line">                    result_data.append(&#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>, <span class="string">&quot;value&quot;</span>: text&#125;)</span><br><span class="line">            <span class="keyword">elif</span> element.name == <span class="string">&#x27;img&#x27;</span>:</span><br><span class="line">                img_src = element.get(<span class="string">&#x27;data-src&#x27;</span>) <span class="keyword">or</span> element.get(<span class="string">&#x27;data-original&#x27;</span>) <span class="keyword">or</span> element.get(<span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">                <span class="keyword">if</span> img_src:</span><br><span class="line">                    img_url = urljoin(<span class="variable language_">self</span>.base_url, img_src)</span><br><span class="line">                    result_data.append(&#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;image&quot;</span>, <span class="string">&quot;value&quot;</span>: img_url&#125;)</span><br><span class="line">            <span class="keyword">elif</span> element.name == <span class="string">&#x27;video&#x27;</span>:</span><br><span class="line">                video_src = element.get(<span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">                <span class="keyword">if</span> video_src:</span><br><span class="line">                    video_url = urljoin(<span class="variable language_">self</span>.base_url, video_src)</span><br><span class="line">                    result_data.append(&#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;video&quot;</span>, <span class="string">&quot;value&quot;</span>: video_url&#125;)</span><br><span class="line">                <span class="keyword">for</span> source <span class="keyword">in</span> element.find_all(<span class="string">&#x27;source&#x27;</span>):</span><br><span class="line">                    video_src = source.get(<span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">                    <span class="keyword">if</span> video_src:</span><br><span class="line">                        video_url = urljoin(<span class="variable language_">self</span>.base_url, video_src)</span><br><span class="line">                        result_data.append(&#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;video&quot;</span>, <span class="string">&quot;value&quot;</span>: video_url&#125;)</span><br><span class="line">    <span class="keyword">return</span> result_data</span><br></pre></td></tr></table></figure>
<p>在上述代码中，我们首先通过<code>get_page_content</code>方法获取文章内容，然后使用BeautifulSoup解析HTML。接着，我们查找文章的主要内容容器，如果找不到，则使用整个页面作为容器。然后，我们遍历容器中的所有元素，根据元素的类型（如<code>p</code>、<code>h1</code>、<code>h2</code>、<code>h3</code>、<code>h4</code>、<code>h5</code>、<code>h6</code>、<code>div</code>、<code>img</code>、<code>video</code>）提取相应的文本或URL，并将其添加到结果列表中。最后，我们返回结果列表。</p>
<p>在修改了代码并将上述算法函数进行参数微调以及适配合并进主函数的流程中后再次执行代码，进行测试。</p>
<p><img src="https://bu.dusays.com/2025/07/09/686e2c9736003.png" alt="1752050837041.png"></p>
<p><img src="https://bu.dusays.com/2025/07/09/686e2bfe7bb88.png" alt="1752050683416.png"></p>
<p>可以看到这次正确的爬取了全部的链接并且成功解析了绝大部分的链接，并且将图片以及视频的链接也成功爬取到了json文件中。</p>
<h4 id="后端项目框架构建"><a href="#后端项目框架构建" class="headerlink" title="后端项目框架构建"></a>后端项目框架构建</h4><p>在完成了最基础的爬虫功能可行性测试之后我们就先构架一个完整的web服务框架来进行后续的web服务功能可行性验证。</p>
<p>我们选择采用FastAPI框架来构建我们的web服务框架，FastAPI是一个现代、快速（高性能）的Web框架，用于构建APIs，基于标准Python类型提示。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Server/</span><br><span class="line">├── api/                           # API接口模块</span><br><span class="line">│   ├── __init__.py               # 包初始化文件</span><br><span class="line">│   └── news.py                   # 新闻相关API接口</span><br><span class="line">├── core/                          # 核心功能模块</span><br><span class="line">│   ├── __init__.py               # 包初始化文件</span><br><span class="line">│   ├── config.py                 # 配置管理</span><br><span class="line">│   ├── database.py               # 数据库操作</span><br><span class="line">│   ├── logging_config.py         # 日志配置</span><br><span class="line">│   └── scheduler.py              # 定时任务调度</span><br><span class="line">├── models/                        # 数据模型</span><br><span class="line">│   ├── __init__.py               # 包初始化文件</span><br><span class="line">│   └── news.py                   # 新闻数据模型</span><br><span class="line">├── services/                      # 服务层</span><br><span class="line">│   ├── __init__.py               # 包初始化文件</span><br><span class="line">│   └── openharmony_crawler.py    # OpenHarmony爬虫服务</span><br><span class="line">├── logs/                          # 日志文件目录</span><br><span class="line">│   ├── openharmony_api_20250709.log  # 应用日志</span><br><span class="line">│   └── error_20250709.log        # 错误日志</span><br><span class="line">├── __pycache__/                   # Python缓存文件</span><br><span class="line">├── .gitignore                     # Git忽略文件</span><br><span class="line">├── Dockerfile                     # Docker镜像配置</span><br><span class="line">├── docker-compose.yml             # Docker Compose配置</span><br><span class="line">├── main.py                        # 主应用入口</span><br><span class="line">├── openharmony_news.db            # SQLite数据库文件</span><br><span class="line">├── README.md                      # 项目说明文档</span><br><span class="line">├── requirements.txt               # Python依赖包</span><br><span class="line">└── run.py                         # 应用启动脚本</span><br></pre></td></tr></table></figure>
<ul>
<li><p>核心文件<br>| 文件 | 主要作用 |<br>|———|—————|<br>| <code>main.py</code> | <strong>主应用入口</strong>，FastAPI应用配置，中间件设置，路由注册 |<br>| <code>run.py</code> | <strong>启动脚本</strong>，配置服务启动参数，提供便捷启动方式 |<br>| <code>requirements.txt</code> | <strong>依赖管理</strong>，列出所有Python包及其版本 |</p>
</li>
<li><p>API接口层<br>| 文件 | 主要作用 |<br>|———|—————|<br>| <code>api/news.py</code> | <strong>新闻API接口</strong>，提供新闻列表、详情、爬取等接口 |</p>
</li>
<li><p>核心功能层<br>| 文件 | 主要作用 |<br>|———|—————|<br>| <code>core/config.py</code> | <strong>配置管理</strong>，应用配置、环境变量处理 |<br>| <code>core/database.py</code> | <strong>数据库操作</strong>，SQLite连接、表结构、CRUD操作 |<br>| <code>core/logging_config.py</code> | <strong>日志配置</strong>，日志格式、文件轮转、级别设置 |<br>| <code>core/scheduler.py</code> | <strong>定时任务</strong>，APScheduler配置、爬虫任务调度 |</p>
</li>
<li><p>数据模型层<br>| 文件 | 主要作用 |<br>|———|—————|<br>| <code>models/news.py</code> | <strong>数据模型</strong>，Pydantic模型定义，API响应格式 |</p>
</li>
<li><p>服务层<br>| 文件 | 主要作用 |<br>|———|—————|<br>| <code>services/openharmony_crawler.py</code> | <strong>爬虫服务</strong>，OpenHarmony官网数据采集 |</p>
</li>
<li><p>部署配置<br>| 文件 | 主要作用 |<br>|———|—————|<br>| <code>Dockerfile</code> | <strong>Docker镜像</strong>，容器化部署配置 |<br>| <code>docker-compose.yml</code> | <strong>容器编排</strong>，多服务部署配置 |<br>| <code>.gitignore</code> | <strong>版本控制</strong>，Git忽略文件配置 |</p>
</li>
</ul>
<h3 id="文档和日志"><a href="#文档和日志" class="headerlink" title="文档和日志"></a>文档和日志</h3><div class="table-container">
<table>
<thead>
<tr>
<th>文件</th>
<th>主要作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>README.md</code></td>
<td><strong>项目文档</strong>，使用说明、API文档</td>
</tr>
<tr>
<td><code>logs/</code></td>
<td><strong>日志文件</strong>，应用运行日志和错误日志</td>
</tr>
<tr>
<td><code>openharmony_news.db</code></td>
<td><strong>数据库文件</strong>，SQLite数据存储</td>
</tr>
</tbody>
</table>
</div>
<hr>
<p>接下来我们使用cmd进行接口测试。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\ASUS&gt;   curl http://localhost:8001/health</span><br><span class="line">&#123;<span class="string">&quot;status&quot;</span>:<span class="string">&quot;healthy&quot;</span>,<span class="string">&quot;timestamp&quot;</span>:1752076452.5490837,<span class="string">&quot;version&quot;</span>:<span class="string">&quot;1.0.0&quot;</span>&#125;</span><br></pre></td></tr></table></figure>
<p>首先测试的是提前预留的健康检查接口，可以看到返回了健康检查状态。是正常的。随后我们再去检测一下爬虫数据获取接口。</p>
<p><img src="https://bu.dusays.com/2025/07/10/686e931fce2d1.png" alt="1752077085669.png"></p>
<p>请求之后没有任何反应，所以我打开后台进行日志的查看，发现日志是正常工作的，所以说明请求正常发送了，仅仅是因为我为了不过高频率的请求而被封禁IP而设置了少量间隔，整体的爬取速度很慢，所以才短时间内没有响应，在五分钟左后后我获得了数据。</p>
<p><img src="https://bu.dusays.com/2025/07/10/686e96990526d.png" alt="1752077973683.png"></p>
<p>不过这也提醒我了，需要设置一个缓存机制，每一小时或是其他时长的间隔进行爬取，每次请求直接返回缓存好的数据，这样就不用再额外等待现场爬取数据了，当然也有可能有人就是想要刷新获取最新的数据，所以我们可以在前端的UI界面加一行提示符来提示用户我们的资讯更新间隔，并设计一个按钮专门用来获取现爬取的最新数据。</p>
<p>ok今天先测试到这里了。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/XBXyftx">XBXyftx</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://xbxyftx.top">https://xbxyftx.top</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">此文章版权归XBXyftx所有，如有转载，请註明来自原作者</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E9%B8%BF%E8%92%99/">鸿蒙</a><a class="post-meta__tags" href="/tags/%E6%8A%80%E6%9C%AF%E5%90%91/">技术向</a><a class="post-meta__tags" href="/tags/%E9%A1%B9%E7%9B%AE/">项目</a><a class="post-meta__tags" href="/tags/%E5%BC%80%E6%BA%90%E4%B9%8B%E5%A4%8F/">开源之夏</a></div><div class="post-share"><div class="social-share" data-image="/img/ArticleTopImgs/OpenSourceSummerTopImg.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://lib.baomitu.com/social-share.js/1.0.16/css/share.min.css" media="print" onload="this.media='all'"><script src="https://lib.baomitu.com/social-share.js/1.0.16/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/06/27/BlogSetup/" title="创客空间2025级新生训练营博客搭建赛道"><img class="cover" src="/img/ArticleTopImgs/BlogSetupTopImg.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">创客空间2025级新生训练营博客搭建赛道</div></div><div class="info-2"><div class="info-item-1">创客空间2025级新生训练营博客搭建赛道</div></div></div></a><a class="pagination-related" href="/2025/07/04/entrancePopup/" title="Butterfly主题实现入场弹窗效果"><img class="cover" src="https://bu.dusays.com/2025/07/04/686795125c127.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Butterfly主题实现入场弹窗效果</div></div><div class="info-2"><div class="info-item-1">讲解如何在butterfly主题中添加一个有相关配置项的入场文字弹窗</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/03/31/%E2%80%9CHongXiaoYi%E2%80%9D/" title="鸿小易项目开发笔记"><img class="cover" src="/img/ArticleTopImgs/hxyTopImg.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-31</div><div class="info-item-2">鸿小易项目开发笔记</div></div><div class="info-2"><div class="info-item-1">鸿小易，你的鸿蒙开发好帮手。</div></div></div></a><a class="pagination-related" href="/2025/03/11/MianShiTong2/" title="面试通项目开发笔记2"><img class="cover" src="/img/ArticleTopImgs/MSTTopImg.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-11</div><div class="info-item-2">面试通项目开发笔记2</div></div><div class="info-2"><div class="info-item-1">面试通项目开发笔记2（暂时停更）</div></div></div></a><a class="pagination-related" href="/2025/02/27/MianShiTong/" title="面试通项目开发笔记"><img class="cover" src="/img/ArticleTopImgs/MSTTopImg.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-27</div><div class="info-item-2">面试通项目开发笔记</div></div><div class="info-2"><div class="info-item-1">面试通项目开发笔记</div></div></div></a><a class="pagination-related" href="/2025/02/08/%E6%88%91%E7%9A%84%E4%B9%A6%E6%9E%B6%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/" title="我的书架项目笔记"><img class="cover" src="/img/ArticleTopImgs/BookShelfTopImg.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-08</div><div class="info-item-2">我的书架项目笔记</div></div><div class="info-2"><div class="info-item-1">一个对利用NetWork Kit发送HTTP请求的实战练习项目</div></div></div></a><a class="pagination-related" href="/2025/01/30/%E5%BC%80%E5%BF%83%E4%B8%80%E7%AC%91%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/" title="开心一笑项目笔记"><img class="cover" src="/img/ArticleTopImgs/JokeTopImg.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-30</div><div class="info-item-2">开心一笑项目笔记</div></div><div class="info-2"><div class="info-item-1">下拉刷新与触底加载逻辑的练习项目</div></div></div></a><a class="pagination-related" href="/2025/01/25/%E9%B8%BF%E8%92%99%E8%AE%B0%E8%B4%A6%E6%9C%AC%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/" title="鸿蒙记账本项目笔记"><img class="cover" src="/img/ArticleTopImgs/JiZhangBenTopImg.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-25</div><div class="info-item-2">鸿蒙记账本项目笔记</div></div><div class="info-2"><div class="info-item-1">数据共享练习</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/logo.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">XBXyftx</div><div class="author-info-description">博安千古情如此<br/>璇玉如华自醉从</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">31</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">34</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/XBXyftx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/XBXyftx" target="_blank" title="Github"><i class="fab fa-github" style="color: #c3ffff;"></i></a><a class="social-icon" href="mailto:shuaixbx02@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="/img/wechat.png" target="_blank" title="WeChat"><i class="fa-brands fa-weixin" style="color: #7bb342;"></i></a></div></div><div class="card-widget card-info visitor-info"><div class="card-content"><div class="visitor-welcome"><i class="fas fa-heart"></i><span id="visitor-text">欢迎来访！</span></div><div class="visitor-details"><div class="visitor-location"><i class="fas fa-map-marker-alt"></i><span id="visitor-location-text">正在获取位置信息...</span></div><div class="visitor-ip"><i class="fas fa-globe"></i><span>IP地址: </span><span id="visitor-ip-text">获取中...</span></div><div class="visitor-distance"><i class="fas fa-route"></i><span id="visitor-distance-text">距离博主 加载中...</span></div><div class="visitor-tip"><i class="fas fa-moon"></i><span id="visitor-tip-text">晚上好，夜生活嗨起来！</span></div></div></div><script>// 访问者信息获取
(function() {
  // IP地址获取API列表（按优先级排序）
  const ipApis = [
    'https://api.ip.sb/geoip',
    'https://ipapi.co/json/',
    'https://freegeoip.app/json/',
    'https://ipinfo.io/json'
  ];
  
  let currentApiIndex = 0;
  
  function tryGetLocation() {
    if (currentApiIndex >= ipApis.length) {
      // 所有API都失败了，显示错误信息
      handleError('所有IP服务都无法访问');
      return;
    }
    
    const currentApi = ipApis[currentApiIndex];
    
    fetch(currentApi)
      .then(response => {
        if (!response.ok) throw new Error(`HTTP ${response.status}`);
        return response.json();
      })
      .then(data => {
        processLocationData(data, currentApi);
      })
      .catch(error => {
        console.warn(`API ${currentApi} 失败:`, error);
        currentApiIndex++;
        setTimeout(tryGetLocation, 1000); // 1秒后尝试下一个API
      });
  }
  
  function processLocationData(data, apiUrl) {
    let country, region, city, ip, latitude, longitude;
    
    // 根据不同API格式处理数据
    if (apiUrl.includes('ip.sb')) {
      country = data.country || '未知';
      region = data.region || '未知';
      city = data.city || '未知';
      ip = data.ip || '未知';
      latitude = data.latitude;
      longitude = data.longitude;
    } else if (apiUrl.includes('ipapi.co')) {
      country = data.country_name || '未知';
      region = data.region || '未知';
      city = data.city || '未知';
      ip = data.ip || '未知';
      latitude = data.latitude;
      longitude = data.longitude;
    } else if (apiUrl.includes('freegeoip.app')) {
      country = data.country_name || '未知';
      region = data.region_name || '未知';
      city = data.city || '未知';
      ip = data.ip || '未知';
      latitude = data.latitude;
      longitude = data.longitude;
    } else if (apiUrl.includes('ipinfo.io')) {
      country = data.country || '未知';
      const loc = data.region || '未知';
      region = loc;
      city = data.city || '未知';
      ip = data.ip || '未知';
      if (data.loc) {
        const coords = data.loc.split(',');
        latitude = parseFloat(coords[0]);
        longitude = parseFloat(coords[1]);
      }
    }
    
    // 更新IP地址
    document.getElementById('visitor-ip-text').textContent = ip;
    
    // 更新位置信息和欢迎文字
    let locationText = '';
    if (country === '中国' || country === 'China' || country === 'CN') {
      locationText = `${region} ${city}`;
                    document.getElementById('visitor-text').innerHTML = `欢迎来自 ${region} ${city} 的朋友♥️`;
    } else {
      locationText = `${country} ${region}`;
      document.getElementById('visitor-text').innerHTML = `欢迎来自 ${country} 的朋友♥️`;
    }
    document.getElementById('visitor-location-text').textContent = locationText;
    
    // 计算距离（可配置博主位置）
    if (latitude && longitude && !isNaN(latitude) && !isNaN(longitude)) {
      const bloggerLat = 39.9042; // 北京纬度
      const bloggerLng = 116.4074; // 北京经度
      const distance = calculateDistance(latitude, longitude, bloggerLat, bloggerLng);
      
      if (distance < 1) {
        document.getElementById('visitor-distance-text').textContent = `距离博主 ${(distance * 1000).toFixed(0)} 米！`;
      } else if (distance < 100) {
        document.getElementById('visitor-distance-text').textContent = `距离博主 ${distance.toFixed(1)} 公里！`;
      } else {
        document.getElementById('visitor-distance-text').textContent = `距离博主 ${distance.toFixed(0)} 公里！`;
      }
    } else {
      document.getElementById('visitor-distance-text').textContent = '距离计算中...';
    }
    
    // 根据时间设置问候语
    updateGreeting();
  }
  
  function updateGreeting() {
    const now = new Date();
    const hour = now.getHours();
    let greeting = '';
    let icon = 'fas fa-sun';
    
    if (hour >= 6 && hour < 12) {
      greeting = '上午好，新的一天开始了！';
      icon = 'fas fa-sun';
    } else if (hour >= 12 && hour < 14) {
      greeting = '中午好，记得吃午饭哦！';
      icon = 'fas fa-sun';
    } else if (hour >= 14 && hour < 18) {
      greeting = '下午好，午后时光真美好！';
      icon = 'fas fa-cloud-sun';
    } else if (hour >= 18 && hour < 22) {
      greeting = '晚上好，夜生活嗨起来！';
      icon = 'fas fa-moon';
    } else {
      greeting = '深夜了，注意休息哦！';
      icon = 'fas fa-moon';
    }
    
    const tipElement = document.getElementById('visitor-tip-text');
    const tipIcon = tipElement.parentElement.querySelector('i');
    tipElement.textContent = greeting;
    if (tipIcon) {
      tipIcon.className = icon;
    }
  }
  
  function handleError(message) {
    document.getElementById('visitor-ip-text').textContent = '获取失败';
    document.getElementById('visitor-location-text').textContent = '获取失败';
    document.getElementById('visitor-distance-text').textContent = '距离未知';
    document.getElementById('visitor-text').innerHTML = '欢迎来访！';
    console.error('获取访问者信息失败:', message);
  }
  
  // 计算两点间距离的函数（使用Haversine公式）
  function calculateDistance(lat1, lon1, lat2, lon2) {
    const R = 6371; // 地球半径，单位：千米
    const dLat = deg2rad(lat2 - lat1);
    const dLon = deg2rad(lon2 - lon1);
    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
              Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) *
              Math.sin(dLon/2) * Math.sin(dLon/2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    return R * c;
  }
  
  function deg2rad(deg) {
    return deg * (Math.PI/180);
  }
  
  // 启动获取位置信息
  tryGetLocation();
  
  // 每分钟更新一次问候语
  setInterval(updateGreeting, 60000);
})(); </script></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">最近也是给自己挖了挺多坑还没填上的等暑假慢慢填吧，争取暑假把自己想写的都写上。<br/><img src="https://bu.dusays.com/2025/06/03/683ec52fd0dbc.jpg" alt="1748944170064.jpg" title="1748944170064.jpg" class="announcementImg"/></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%AE%80%E4%BB%8B"><span class="toc-number">2.</span> <span class="toc-text">项目简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E5%90%8D%E7%A7%B0"><span class="toc-number">2.1.</span> <span class="toc-text">项目名称</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF"><span class="toc-number">2.2.</span> <span class="toc-text">项目背景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%9B%AE%E6%A0%87"><span class="toc-number">2.3.</span> <span class="toc-text">项目目标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%97%B6%E9%97%B4%E8%A7%84%E5%88%92"><span class="toc-number">3.</span> <span class="toc-text">项目时间规划</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E9%97%AE%E9%A2%98"><span class="toc-number">4.</span> <span class="toc-text">核心问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E7%9A%84%E8%8E%B7%E5%8F%96"><span class="toc-number">4.1.</span> <span class="toc-text">信息的获取</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#TodayOpenHarmony%E9%A1%B9%E7%9B%AE%E5%88%86%E6%9E%90"><span class="toc-number">4.1.1.</span> <span class="toc-text">TodayOpenHarmony项目分析</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E8%AE%AF%E5%86%85%E5%AE%B9%E4%BC%A0%E9%80%92%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.2.</span> <span class="toc-text">资讯内容传递的格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%98%8E%E7%A1%AE%E9%9C%80%E6%B1%82"><span class="toc-number">4.2.1.</span> <span class="toc-text">明确需求</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E8%AE%AF%E7%9A%84%E6%B8%B2%E6%9F%93%E5%BD%A2%E5%BC%8F"><span class="toc-number">4.3.</span> <span class="toc-text">资讯的渲染形式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%8F%AF%E8%A1%8C%E6%80%A7%E9%AA%8C%E8%AF%81"><span class="toc-number">5.</span> <span class="toc-text">方案设计与可行性验证</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%92%A8%E8%AF%A2%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96"><span class="toc-number">5.1.</span> <span class="toc-text">咨询信息获取</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#OpenHarmony%E5%AE%98%E7%BD%91%E8%B5%84%E8%AE%AF"><span class="toc-number">5.1.1.</span> <span class="toc-text">OpenHarmony官网资讯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%E6%A1%86%E6%9E%B6%E6%9E%84%E5%BB%BA"><span class="toc-number">5.1.2.</span> <span class="toc-text">后端项目框架构建</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%A1%A3%E5%92%8C%E6%97%A5%E5%BF%97"><span class="toc-number">5.2.</span> <span class="toc-text">文档和日志</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/07/04/entrancePopup/" title="Butterfly主题实现入场弹窗效果"><img src="https://bu.dusays.com/2025/07/04/686795125c127.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Butterfly主题实现入场弹窗效果"/></a><div class="content"><a class="title" href="/2025/07/04/entrancePopup/" title="Butterfly主题实现入场弹窗效果">Butterfly主题实现入场弹窗效果</a><time datetime="2025-07-04T05:58:26.000Z" title="发表于 2025-07-04 13:58:26">2025-07-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/29/OpenSourceSummer2025/" title="开源之夏NowInOpenHarmony"><img src="/img/ArticleTopImgs/OpenSourceSummerTopImg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="开源之夏NowInOpenHarmony"/></a><div class="content"><a class="title" href="/2025/06/29/OpenSourceSummer2025/" title="开源之夏NowInOpenHarmony">开源之夏NowInOpenHarmony</a><time datetime="2025-06-29T06:01:21.000Z" title="发表于 2025-06-29 14:01:21">2025-06-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/27/BlogSetup/" title="创客空间2025级新生训练营博客搭建赛道"><img src="/img/ArticleTopImgs/BlogSetupTopImg.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="创客空间2025级新生训练营博客搭建赛道"/></a><div class="content"><a class="title" href="/2025/06/27/BlogSetup/" title="创客空间2025级新生训练营博客搭建赛道">创客空间2025级新生训练营博客搭建赛道</a><time datetime="2025-06-27T08:45:41.000Z" title="发表于 2025-06-27 16:45:41">2025-06-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/24/typewriter/" title="Butterfly主题实现简介打字机"><img src="/img/ArticleTopImgs/TypeWriteTopImg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Butterfly主题实现简介打字机"/></a><div class="content"><a class="title" href="/2025/06/24/typewriter/" title="Butterfly主题实现简介打字机">Butterfly主题实现简介打字机</a><time datetime="2025-06-24T05:18:53.000Z" title="发表于 2025-06-24 13:18:53">2025-06-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/03/CloudWorkflow/" title="不限终端的云工作流搭建历程"><img src="/img/ArticleTopImgs/cloudWorkflawTopImg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="不限终端的云工作流搭建历程"/></a><div class="content"><a class="title" href="/2025/06/03/CloudWorkflow/" title="不限终端的云工作流搭建历程">不限终端的云工作流搭建历程</a><time datetime="2025-06-03T09:35:35.000Z" title="发表于 2025-06-03 17:35:35">2025-06-03</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/footerBg.png);"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2025 By XBXyftx</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/#/Integrated/index"><span>备案号：京ICP备2025126467号</span></a></div><div></div><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><script>var now = new Date(); 
function createtime() { 
var grt = new Date("4/25/2024 18:30"); // 在此处修改你的建站时间
now.setTime(now.getTime() + 250); 
days = (now - grt) / 1000 / 60 / 60 / 24; 
dnum = Math.floor(days); 
hours = (now - grt) / 1000 / 60 / 60 - (24 * dnum); 
hnum = Math.floor(hours); 
if (String(hnum).length == 1) { hnum = "0" + hnum; } 
minutes = (now - grt) / 1000 / 60 - (24 * 60 * dnum) - (60 * hnum); 
mnum = Math.floor(minutes); 
if (String(mnum).length == 1) { mnum = "0" + mnum; } 
seconds = (now - grt) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
snum = Math.round(seconds); 
if (String(snum).length == 1) { snum = "0" + snum; } 
document.getElementById("timeDate").innerHTML = "本网站已运行 " + dnum + " 天 "; 
document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
} 
setInterval(createtime, 250);</script></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa-solid fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa-solid fa-arrow-rotate-right"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa-solid fa-arrow-right"></i></a><a class="rightMenu-item" id="menu-radompage" href="javascript:window.location.href = window.location.origin;"><i class="fa-solid fa-house"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa-solid fa-copy"></i><span>复制</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:rmf.switchReadMode();"><i class="fa-solid fa-book"></i><span>阅读模式</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.js"></script><!-- 瀑布流JavaScript - 只在首页加载--><!-- 文章打字机效果 - 只在文章页面加载--><script src="/js/typewriter-effect.js"></script><!-- 入场弹窗功能--><script src="/js/entrance-popup-config.js"></script><script src="/js/entrance-popup.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikooxbx.netlify.app/.netlify/functions/twikoo',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://twikooxbx.netlify.app/.netlify/functions/twikoo',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('/js/twikoo.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script>localStorage.setItem('theme','dark')</script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script> // 强制锁定为暗黑模式 localStorage.setItem('theme', 'dark'); // 防止其他脚本覆盖模式 document.documentElement.setAttribute('data-theme', 'dark'); </script><link rel="stylesheet" href="/css/styles.css"><script> document.querySelectorAll('#post-comment).forEach(el => { el.style.backgroundColor = 'rgba(255, 255, 255, 0.6)'; }); </script><script src="/js/jquery-3.6.0.min.js"></script><script src="/js/rightmenu.js"></script><link rel="twikoo" href="/css/twikoo.css"><script src="/js/happy-title.js" async></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="/%5Bobject%20Object%5D"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="99" count="99" mobile="true" src="/%5Bobject%20Object%5D"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementsByClassName('recent-posts')[0];
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/06/24/typewriter/" alt=""><img width="48" height="48" src="/img/ArticleTopImgs/TypeWriteTopImg.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-06-24</span><a class="blog-slider__title" href="2025/06/24/typewriter/" alt="">Butterfly主题实现简介打字机</a><div class="blog-slider__text">详细介绍如何在Hexo的Butterfly主题中添加炫酷的打字机效果，包含完整的实现代码和配置方法。</div><a class="blog-slider__button" href="2025/06/24/typewriter/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/04/30/ToTheApril2025/" alt=""><img width="48" height="48" src="/img/ArticleTopImgs/AprilTopImg.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-04-30</span><a class="blog-slider__title" href="2025/04/30/ToTheApril2025/" alt="">致2025那个繁忙的4月</a><div class="blog-slider__text">人们总是匆匆向前，殊不知时光易逝啊……（持续更新中！！！）</div><a class="blog-slider__button" href="2025/04/30/ToTheApril2025/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/16/yiDuo/" alt=""><img width="48" height="48" src="/img/ArticleTopImgs/yiduoTopImg.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-16</span><a class="blog-slider__title" href="2025/03/16/yiDuo/" alt="">关于鸿蒙的一多能力</a><div class="blog-slider__text">一多能力的学习笔记</div><a class="blog-slider__button" href="2025/03/16/yiDuo/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/02/04/V2/" alt=""><img width="48" height="48" src="/img/ArticleTopImgs/V2TopImg.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-02-04</span><a class="blog-slider__title" href="2025/02/04/V2/" alt="">浅谈鸿蒙状态管理V1——&gt;V2</a><div class="blog-slider__text">用实际代码测试与我的开发经验，解析鸿蒙状态管理V2中难以理解的内容，帮助开发者们更好的理解和使用状态管理V2版本。</div><a class="blog-slider__button" href="2025/02/04/V2/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/04/20/RemoteCommunication/" alt=""><img width="48" height="48" src="/img/ArticleTopImgs/RCPTopImg.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-04-20</span><a class="blog-slider__title" href="2025/04/20/RemoteCommunication/" alt="">远场通信服务</a><div class="blog-slider__text">本文将介绍鸿蒙远场通信服务</div><a class="blog-slider__button" href="2025/04/20/RemoteCommunication/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><!-- hexo injector body_end end --></body></html>