<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>NowInOpenHarmony上架笔记之再起新征程 | XBXyftx</title><meta name="author" content="XBXyftx"><meta name="copyright" content="XBXyftx"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="NowInOpenHarmony上架笔记2，记录OpenHarmony官网重构后的新征程">
<meta property="og:type" content="article">
<meta property="og:title" content="NowInOpenHarmony上架笔记之再起新征程">
<meta property="og:url" content="https://xbxyftx.top/2025/10/12/NowInOpenHarmonyPutaway2/index.html">
<meta property="og:site_name" content="XBXyftx">
<meta property="og:description" content="NowInOpenHarmony上架笔记2，记录OpenHarmony官网重构后的新征程">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xbxyftx.top/imgs/ArticleTopImgs/NowInOpenHarmonyPutawayTopImg.jpg">
<meta property="article:published_time" content="2025-10-12T06:17:05.000Z">
<meta property="article:modified_time" content="2025-10-20T08:16:26.965Z">
<meta property="article:author" content="XBXyftx">
<meta property="article:tag" content="技术向">
<meta property="article:tag" content="鸿蒙">
<meta property="article:tag" content="项目">
<meta property="article:tag" content="开源之夏">
<meta property="article:tag" content="NowInOpenHarmony">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xbxyftx.top/imgs/ArticleTopImgs/NowInOpenHarmonyPutawayTopImg.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "NowInOpenHarmony上架笔记之再起新征程",
  "url": "https://xbxyftx.top/2025/10/12/NowInOpenHarmonyPutaway2/",
  "image": "https://xbxyftx.top/imgs/ArticleTopImgs/NowInOpenHarmonyPutawayTopImg.jpg",
  "datePublished": "2025-10-12T06:17:05.000Z",
  "dateModified": "2025-10-20T08:16:26.965Z",
  "author": [
    {
      "@type": "Person",
      "name": "XBXyftx",
      "url": "https://github.com/XBXyftx"
    }
  ]
}</script><link rel="shortcut icon" href="/img/logo.png"><link rel="canonical" href="https://xbxyftx.top/2025/10/12/NowInOpenHarmonyPutaway2/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"><link rel="stylesheet" href="/css/typewriter-effect.css"><link rel="stylesheet" href="/css/entrance-popup.css"><link rel="stylesheet" href="/css/lazy-loading.css"><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400,"highlightFullpage":true,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":2000,"languages":{"author":"作者: XBXyftx","link":"链接: ","source":"来源: XBXyftx","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"已切换为繁体中文","cht_to_chs":"已切换为简体中文","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: '/',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'NowInOpenHarmony上架笔记之再起新征程',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post',
  typewriter: '从第一篇上线笔记延续，本篇记录了 NowInOpenHarmony 上架前后的关键推进：梳理新版 OpenHarmony 内容源、完善爬虫与数据抓取、修复构建与包体问题，完成后端 Docker 化并在服务器落地部署，同时补齐应用商店合规（隐私政策等）与上线验收流程。文章也同步整理了踩坑与优化清单，并以实际 issue 驱动推进，最终合并并关闭上线前的核心任务。'
}</script><script src="/js/nyan.js"></script><script>localStorage.setItem('theme','dark')</script><script>document.documentElement.setAttribute('data-theme', 'dark');</script><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/transpancy.css"><script> // 强制锁定为暗黑模式 localStorage.setItem('theme', 'dark'); // 防止其他脚本覆盖模式 document.documentElement.setAttribute('data-theme', 'dark'); </script><link rel="stylesheet" href="/css/styles.css"><script> document.querySelectorAll('#post-comment').forEach(el => { el.style.backgroundColor = 'rgba(255, 255, 255, 0.6)'; }); </script><link rel="twikoo" href="/css/twikoo.css"><link rel="stylesheet" href="/css/rightmenu.css"><link rel="stylesheet" href="/css/sequential-loader.css"><script src="/js/sequential-loader-config.js"></script><script src="/js/sequential-image-loader.js" defer></script><script src="/js/sequential-integration.js" defer></script><script src="/js/custom-lightbox.js" defer></script><script src="/js/nyan.js"></script><script src="/js/header-universe.js"></script><!-- 新增缓存管理脚本 - 已禁用Service Worker--><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="cat__scene"><div class="cat__main"><div class="cat__body"></div><div class="cat__body"></div><div class="cat__tail"></div><div class="cat__head"></div></div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
      setTimeout(() => {
        $loadingBox.style.display = 'none'
      }, 800)
    },
    initLoading: () => {
      $loadingBox.style.display = 'flex'
      $loadingBox.classList.remove('loaded')
      $body.style.overflow = 'hidden'
    }
  }

  preloader.initLoading()
  
  // 设置10秒超时
  const loadingTimeout = setTimeout(() => {
    preloader.endLoading()
  }, 10000)
  
  window.addEventListener('load', () => {
    clearTimeout(loadingTimeout)
    preloader.endLoading()
  })

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="web_bg" style="background-image: url(https://bu.dusays.com/2025/07/04/6867890f5d403.png);"></div><div class="entrance-popup" id="entrance-popup"><div class="popup-content"><div class="popup-header"><span class="popup-title">温馨提示</span><span class="popup-close">×</span></div><div class="popup-body"><div class="popup-text"></div></div></div><div class="popup-overlay"></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-close-btn"><i class="fas fa-times"></i></div><div class="avatar-img text-center"><img src="/img/logo.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">40</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">40</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 文库</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/coffer/"><i class="fa-fw fa-solid fa-key"></i><span> 秘密基地</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-i"></i><span> Myself</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/swiper/"><i class="fa-fw fa-solid fa-star-of-david"></i><span> 昨日重现</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa-solid fa-comment"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/LianlianKan/"><i class="fa-fw fa-solid fa-gamepad"></i><span> 连连看</span></a></div><div class="menus_item"><a class="site-page" href="/MarkdownPreview/"><i class="fa-fw fa-solid fa-file-code"></i><span> MD在线编辑器</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/imgs/ArticleTopImgs/NowInOpenHarmonyPutawayTopImg.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/logo.png" alt="Logo"><span class="site-name">XBXyftx</span></a><a class="nav-page-title" href="/"><span class="site-name">NowInOpenHarmony上架笔记之再起新征程</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 文库</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/coffer/"><i class="fa-fw fa-solid fa-key"></i><span> 秘密基地</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-i"></i><span> Myself</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/swiper/"><i class="fa-fw fa-solid fa-star-of-david"></i><span> 昨日重现</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa-solid fa-comment"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/LianlianKan/"><i class="fa-fw fa-solid fa-gamepad"></i><span> 连连看</span></a></div><div class="menus_item"><a class="site-page" href="/MarkdownPreview/"><i class="fa-fw fa-solid fa-file-code"></i><span> MD在线编辑器</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">NowInOpenHarmony上架笔记之再起新征程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-10-12T06:17:05.000Z" title="发表于 2025-10-12 14:17:05">2025-10-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-10-20T08:16:26.965Z" title="更新于 2025-10-20 16:16:26">2025-10-20</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">49.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>220分钟</span></span><span class="post-meta-separator">|</span><span id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="twikoo_visitors"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:100,&quot;messagePrev&quot;:&quot;It has been&quot;,&quot;messageNext&quot;:&quot;days since the last update, the content of the article may be outdated.&quot;,&quot;postUpdate&quot;:&quot;2025-10-20 16:16:26&quot;}" hidden></div><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>时隔一个国庆假期，我在抛去一切技术焦虑尽情的享受假期之后也是回来重振旗鼓，准备开始开展NowInOpenHarmony的后端重构之旅了。这个项目我不能放弃，这是当下我距离正式上架最近的一个项目，而且我也已经成果实现了针对于后端的docker容器化部署，同时有了之前踩坑的经历我会用更加直接切中要害的方式去进行调整。</p>
<h2 id="新版OpenHarmony官网的内容变化"><a href="#新版OpenHarmony官网的内容变化" class="headerlink" title="新版OpenHarmony官网的内容变化"></a>新版OpenHarmony官网的内容变化</h2><p>重构的第一件事肯定是要去审视一下我们新的数据源————新版NowInOpenHarmony官网，看看它和旧版相比有哪些变化，以及这些变化对我们项目的影响。记得在国庆前我看到openharmony官网的更新的时候我是有点绝望的因为我是压根没有看到原来那个咨询页面和博文页面依旧存在，只看到了新的首页。所以我先去整体的浏览一遍看看有没有可以作为新版数据源的页面。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/1.png" alt="1"></p>
<p>在浏览的时候我看到了导航栏的这个分栏，我瞬间捕捉到了关键词“咨询”和“动态”，我立刻点进去看，不看不知道一看吓一跳，原来这就是原来那个网页！！！</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/2.png" alt="2"></p>
<p>卧槽原来它并没有被废弃，只是从原来的根域名被新主页给挤压到old前缀的子域名了，太好了，不仅不用去寻找新的数据源，还不用重新针对新的页面去进行重构了。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/3.png" alt="3"></p>
<h2 id="重构后端"><a href="#重构后端" class="headerlink" title="重构后端"></a>重构后端</h2><p>这里当然还是先请出我们的老朋友CC啦。</p>
<h3 id="让CC的新对话熟悉现在的后端逻辑"><a href="#让CC的新对话熟悉现在的后端逻辑" class="headerlink" title="让CC的新对话熟悉现在的后端逻辑"></a>让CC的新对话熟悉现在的后端逻辑</h3><p>在和AI连续的对话构建一个项目固然是方便毕竟上下文连贯AI的记忆也是很连贯的，但也是会有死钻牛角尖的情况出现，AI也很容易陷入到自己的惯性思维中不能自拔，最后越改越屎所以我一定是要开一个新对话去进行编程的。</p>
<p>对于一个新的对话，熟悉当前的项目结构是很重要的，对于CC来说他是有一个独特的优势在于<code>/init</code>指令可以一键让CC对当前的项目有一个最初始的印象，了解项目的架构同时去编写或是更新项目的claude.md文件。</p>
<p>在执行<code>/init</code>之后还不够，由于我们所需要的是修改一个爬虫逻辑中的一个细节所以我还是决定让CC进一步的去阅读并理解一下三个爬虫的逻辑以及工作流程，并告诉他我们接下来的工作主要是围绕这三个文件去进行展开的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line">现在请你着重关注关注后端服务中针对于openharmony官网囊咨询页面的爬虫 @services/openharmony_crawler.py 博文页面爬虫 @services/openharmony_blog_crawler.py 还有轮播图爬虫 @services/openharmony_image_crawler.py 我们接下来的工作重点在于针对于这三个爬虫的重构升级，现在请你先仔细阅读并给我理清三个爬虫的逻辑，暂时不要修改任何代码</span><br><span class="line"></span><br><span class="line">我已经仔细阅读了三个爬虫的代码，现在为您详细梳理它们的逻辑架构：</span><br><span class="line">1. OpenHarmony官网新闻爬虫 (openharmony_crawler.py)</span><br><span class="line">核心流程</span><br><span class="line">API获取文章列表 → 快速有效性校验 → 逐篇解析内容 → 分批回调写入</span><br><span class="line">关键特性</span><br><span class="line">数据源</span><br><span class="line">API端点: https://www.openharmony.cn/backend/knowledge/secondaryPage/queryBatch?<span class="built_in">type</span>=3</span><br><span class="line"><span class="built_in">type</span>=3 表示官方动态类型</span><br><span class="line">两阶段爬取策略 (openharmony_crawler.py:41-127) 阶段1: 高效批量获取文章元信息</span><br><span class="line">每页300条数据（减少API请求次数）</span><br><span class="line">分页遍历直到无数据</span><br><span class="line">URL去重（使用字典）</span><br><span class="line">日期标准化为 YYYY-MM-DD 格式</span><br><span class="line">请求间隔：0.3秒</span><br><span class="line">阶段2: 智能有效性校验 (openharmony_crawler.py:95-127)</span><br><span class="line">快速抽样: 只检查前10个URL</span><br><span class="line">阈值判断: 有效率≥80% → 跳过完整校验</span><br><span class="line">降级策略: 有效率&lt;80% → 完整URL校验</span><br><span class="line">使用 HEAD 请求减少带宽消耗</span><br><span class="line">内容解析 (openharmony_crawler.py:129-167)</span><br><span class="line">多选择器策略：尝试多种容器class/id</span><br><span class="line">支持元素类型：p, h1-h6, div, img, video</span><br><span class="line">文本过滤：长度&gt;10字符</span><br><span class="line">图片处理：data-src &gt; data-original &gt; src</span><br><span class="line">输出格式：&#123;<span class="built_in">type</span>: <span class="string">&quot;text&quot;</span>|<span class="string">&quot;image&quot;</span>|<span class="string">&quot;video&quot;</span>, value: string&#125;</span><br><span class="line">分批处理机制 (openharmony_crawler.py:223-279)</span><br><span class="line">默认batch_size=20篇</span><br><span class="line">累积到批次大小后立即执行回调</span><br><span class="line">处理剩余批次（不足batch_size的部分）</span><br><span class="line">回调失败不影响爬取继续</span><br><span class="line">数据格式化 (openharmony_crawler.py:199-221)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;id&quot;</span>: <span class="string">&quot;MD5(url)[:16]&quot;</span>,  <span class="comment"># 16位哈希ID</span></span><br><span class="line">    <span class="string">&quot;title&quot;</span>: string,</span><br><span class="line">    <span class="string">&quot;date&quot;</span>: <span class="string">&quot;YYYY-MM-DD&quot;</span>,    <span class="comment"># 标准化日期</span></span><br><span class="line">    <span class="string">&quot;url&quot;</span>: string,</span><br><span class="line">    <span class="string">&quot;content&quot;</span>: [&#123;<span class="built_in">type</span>, value&#125;],</span><br><span class="line">    <span class="string">&quot;category&quot;</span>: <span class="string">&quot;官方动态&quot;</span>,</span><br><span class="line">    <span class="string">&quot;summary&quot;</span>: string,</span><br><span class="line">    <span class="string">&quot;source&quot;</span>: <span class="string">&quot;OpenHarmony&quot;</span>,</span><br><span class="line">    <span class="string">&quot;created_at&quot;</span>: ISO8601,</span><br><span class="line">    <span class="string">&quot;updated_at&quot;</span>: ISO8601</span><br><span class="line">&#125;</span><br><span class="line">2. OpenHarmony技术博客爬虫 (openharmony_blog_crawler.py)</span><br><span class="line">核心流程</span><br><span class="line">API分页获取 → 提取文章元信息 → 逐篇解析内容 → 分批回调写入 → 数据验证</span><br><span class="line">关键特性</span><br><span class="line">数据源</span><br><span class="line">API端点: 同官网爬虫，但 <span class="built_in">type</span>=2 表示技术博客</span><br><span class="line">每页200条数据</span><br><span class="line">分页获取 (openharmony_blog_crawler.py:57-115)</span><br><span class="line">获取 totalPage 和 totalNum</span><br><span class="line">循环处理每页数据</span><br><span class="line">请求间隔：0.5秒</span><br><span class="line">响应格式验证：检查 code == 0</span><br><span class="line">元信息提取 (openharmony_blog_crawler.py:117-143)</span><br><span class="line">必需字段验证：title, url</span><br><span class="line">日期格式转换：将 <span class="string">&quot;2024.06.06&quot;</span> → <span class="string">&quot;2024-06-06&quot;</span></span><br><span class="line">提取 content 字段作为 summary</span><br><span class="line">内容解析增强 (openharmony_blog_crawler.py:168-235)</span><br><span class="line">更多容器选择器（包括 main, article-content）</span><br><span class="line">支持额外元素：pre, code</span><br><span class="line">code块单独处理为 &#123;<span class="built_in">type</span>: <span class="string">&quot;code&quot;</span>, value: string&#125;</span><br><span class="line">文本过滤：长度&gt;10字符</span><br><span class="line">分批处理 (openharmony_blog_crawler.py:258-334)</span><br><span class="line">与官网爬虫完全一致的逻辑</span><br><span class="line">默认batch_size=20</span><br><span class="line">日志前缀：[OpenHarmony博客] 便于区分</span><br><span class="line">数据格式化差异 (openharmony_blog_crawler.py:237-256)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"># ... 同官网爬虫</span></span><br><span class="line">    <span class="string">&quot;category&quot;</span>: <span class="string">&quot;技术博客&quot;</span>,  <span class="comment"># 区别于&quot;官方动态&quot;</span></span><br><span class="line">    <span class="string">&quot;source&quot;</span>: <span class="string">&quot;OpenHarmony技术博客&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line">数据验证 (openharmony_blog_crawler.py:336-367)</span><br><span class="line">检查必需字段：<span class="built_in">id</span>, title, url, content, <span class="built_in">source</span></span><br><span class="line">检查内容非空</span><br><span class="line">检查URL有效性（以http开头）</span><br><span class="line">返回有效文章统计</span><br><span class="line">3. OpenHarmony轮播图爬虫 (openharmony_image_crawler.py)</span><br><span class="line">核心流程</span><br><span class="line">获取手机版页面 → 查找banner-img元素 → 下载图片 → 保存本地</span><br><span class="line">关键特性</span><br><span class="line">数据源</span><br><span class="line">目标页面: https://www.openharmony.cn/mainPlay/</span><br><span class="line">手机版User-Agent模拟iPhone</span><br><span class="line">请求头配置 (openharmony_image_crawler.py:32-43)</span><br><span class="line"><span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (iPhone; CPU iPhone OS 14_7_1...)&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Sec-Fetch-Dest&#x27;</span>: <span class="string">&#x27;document&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Cache-Control&#x27;</span>: <span class="string">&#x27;max-age=0&#x27;</span></span><br><span class="line">图片查找策略 (openharmony_image_crawler.py:64-103)</span><br><span class="line">CSS选择器：class 包含 <span class="string">&quot;banner-img&quot;</span></span><br><span class="line">图片URL优先级：data-src &gt; data-original &gt; src</span><br><span class="line">提取元数据：alt, class, <span class="built_in">id</span></span><br><span class="line">URL转换：相对路径 → 绝对路径</span><br><span class="line">下载机制 (openharmony_image_crawler.py:105-168)</span><br><span class="line">文件名处理：</span><br><span class="line">优先使用URL中的文件名</span><br><span class="line">无扩展名时从Content-Type推断</span><br><span class="line">已存在文件添加时间戳避免覆盖</span><br><span class="line">下载超时：30秒</span><br><span class="line">结果返回：status, filename, file_path, file_size</span><br><span class="line">错误捕获：返回失败状态和错误信息</span><br><span class="line">完整爬取流程 (openharmony_image_crawler.py:170-217)</span><br><span class="line">获取页面HTML</span><br><span class="line">解析所有banner图片</span><br><span class="line">逐张下载（间隔1秒）</span><br><span class="line">统计成功/失败数量</span><br><span class="line">返回详细结果列表</span><br><span class="line">轻量级方法 (openharmony_image_crawler.py:219-227)</span><br><span class="line">get_banner_image_info(): 只获取图片URL信息，不下载</span><br><span class="line">三个爬虫的共性与差异</span><br><span class="line">共性特征</span><br><span class="line">统一的Session管理: 都使用 requests.Session() 保持连接</span><br><span class="line">User-Agent伪装: 模拟真实浏览器</span><br><span class="line">超时控制: 防止请求挂起</span><br><span class="line">日志记录: 详细的emoji标记日志</span><br><span class="line">错误处理: try-except捕获，不中断整体流程</span><br><span class="line">请求间隔: 避免过于频繁的请求</span><br><span class="line">核心差异</span><br><span class="line">特性	官网新闻	技术博客	轮播图</span><br><span class="line">数据源	API (<span class="built_in">type</span>=3)	API (<span class="built_in">type</span>=2)	HTML解析</span><br><span class="line">页面大小	300条/页	200条/页	N/A</span><br><span class="line">有效性校验	✅ 智能抽样	❌ 无	❌ 无</span><br><span class="line">分批回调	✅ 支持	✅ 支持	❌ 不支持</span><br><span class="line">内容类型	text/image/video	text/image/video/code	仅image</span><br><span class="line">本地下载	❌ 仅URL	❌ 仅URL	✅ 下载到本地</span><br><span class="line">数据验证	❌ 无	✅ 完整验证	✅ 下载验证</span><br><span class="line">category	<span class="string">&quot;官方动态&quot;</span>	<span class="string">&quot;技术博客&quot;</span>	N/A</span><br><span class="line">潜在问题点</span><br><span class="line">性能瓶颈</span><br><span class="line">官网/博客爬虫的内容解析是同步的（每篇文章1秒间隔）</span><br><span class="line">没有并发下载机制</span><br><span class="line">轮播图爬虫每次都重新下载，无缓存机制</span><br><span class="line">健壮性问题</span><br><span class="line">官网爬虫的快速校验可能不准确（只检查10个URL）</span><br><span class="line">博客爬虫缺少URL有效性预检</span><br><span class="line">所有爬虫缺少重试机制</span><br><span class="line">图片爬虫依赖特定class名称，易失效</span><br><span class="line">数据一致性</span><br><span class="line">两个新闻爬虫使用相同的ID生成方式（MD5），可能冲突</span><br><span class="line">日期格式化逻辑在两个爬虫中略有不同</span><br><span class="line">content结构验证不完整（批处理回调中有验证，但爬虫本身没有）</span><br><span class="line">可维护性</span><br><span class="line">HTML解析选择器硬编码</span><br><span class="line">三个爬虫缺少统一的基类</span><br><span class="line">配置项（超时、间隔）分散在代码中</span><br><span class="line">建议的重构方向</span><br><span class="line">如果后续要升级这三个爬虫，可以考虑：</span><br><span class="line">统一基类架构: 抽象公共逻辑（Session管理、错误处理、重试机制）</span><br><span class="line">并发优化: 引入异步爬取或线程池</span><br><span class="line">智能缓存: 轮播图增加本地缓存和更新检测</span><br><span class="line">健壮性增强:</span><br><span class="line">统一的重试装饰器</span><br><span class="line">更完善的URL有效性检查</span><br><span class="line">响应式选择器配置</span><br><span class="line">监控指标: 爬取耗时、成功率、数据质量统计</span><br><span class="line">您想先从哪个方向开始重构？</span><br></pre></td></tr></table></figure>
<h3 id="重构过程"><a href="#重构过程" class="headerlink" title="重构过程"></a>重构过程</h3><h4 id="文件重命名"><a href="#文件重命名" class="headerlink" title="文件重命名"></a>文件重命名</h4><p>我首先让CC先帮我针对于官网的咨询页爬虫进行一下重命名，因为当初他是第一个开发的就没有很规范的命名，而py这个东西又是解释型语言，不同文件之间调用有基本上是跑起来解释到那里才知道有问题，所以我就直接用CC去进行重构还是更快捷一些。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/4.png" alt="4"></p>
<p>嗯，就还挺爽的。</p>
<h4 id="old子域名重构"><a href="#old子域名重构" class="headerlink" title="old子域名重构"></a>old子域名重构</h4><p>这一块的话我得向CC阐述一下来龙去脉并给他新的API。所以首先我需要先去官网进行一下抓包找到之前用于获取目标网页的那个api接口，我希望它只是将原来的这套网页代码的基地址换成了新的子域名而不是说进行了完整的重构。这样我就只需要更换一下API就好了。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/5.png" alt="5"></p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/6.png" alt="6"></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// https://old.openharmony.cn/backend/knowledge/secondaryPage/queryBatch?type=3&amp;pageNum=1&amp;pageSize=20</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;成功&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pageSize&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pageNum&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;totalPage&quot;</span><span class="punctuation">:</span> <span class="number">21</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;totalNum&quot;</span><span class="punctuation">:</span> <span class="number">407</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1533</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;对话OpenHarmony开源先锋：如何用代码革新终端生态&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025年2月23日，由开放原子开源基金会主办的第二届OpenHarmony创新应用挑战赛决赛路演在北京圆满结束，作为第二届开放原子大赛的重要赛项之一，本届赛事汇聚全球418支团队，产出超过110个创新作品，集中展示了OpenHarmony在应用与游戏开发领域的前沿成果。&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/cHsMzPTmoYec-_VL6VllBQ&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025.02.28&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">961</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1532</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;12强终极PK！第二届OpenHarmony创新应用挑战赛引爆开源热潮&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;在智能化与万物互联的浪潮中，科技的每一次突破都可能颠覆未来格局。2024年10月21日，由开放原子开源基金会主办，OpenHarmony项目群工作委员会、厦门雅基软件有限公司联合承办的第二届OpenHarmony创新应用挑战赛正式启动。&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/2EeeruCTcZEq1qbydrgsKw&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025.02.24&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">478</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1531</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;第二届OpenHarmony创新应用挑战赛决赛路演队伍揭晓&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;第二届OpenHarmony创新应用挑战赛决赛路演队伍揭晓&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/scsUs8XKUMWp_kelThSetA&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025.02.20&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">233</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1530</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OpenHarmony社区2024年度运营报告发布，致谢每一位生态共建者！&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OpenHarmony社区2024年度运营报告发布！&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/njNirZfZFhwztz9zNnuc-A&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025.02.11&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">145</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1528</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;开源鸿蒙社区恭祝全体开发者2025新年快乐，新春大吉！&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;恭祝全体开发者2025新年快乐，新春大吉！&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/fVn6brUk2EnPbUcc3pLeCA&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025.01.29&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">76</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1527</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;共绘2025年开源新蓝图，OpenHarmony社区项目管理委员会年度工作会议在深圳成功举办&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025年1月12日上午，OpenHarmony社区项目管理委员会（PMC）（以下简称“PMC”）年度工作会议在深圳召开。本次会议全面总结了2024年PMC的工作及成果，以及明确了2025年PMC工作方向和重点工作，为OpenHarmony社区在2025年持续快速发展及繁荣打下厚实基础。&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/0q1ThRgDGocGMWp1ufHHrA&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025.01.27&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">121</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1526</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;开源鸿蒙项目群新增捐赠人（2024年12月）&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024年12月，新增以下单位成为开源鸿蒙项目群捐赠人：• 中国南方电网有限责任公司成为A类捐赠人• 宝马诚迈信息技术有限公司成为B类捐赠人&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/OG5vZWwXk5EaM5iomCCXzA&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025.01.21&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">119</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1525</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;开源鸿蒙社区隆重致谢授牌2024年度社区贡献单位和个人&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024 年，开源鸿蒙社区在各方共建下成绩卓著。截至2024年12月31日，开源鸿蒙社区成员单位已达 63 家，其中2024年新增 28家捐赠单位；累计发布 8 个大版本，2024年发布了OpenHarmony 4.1 Release与 5.0 Release；累计建立 68个 SIG，累计代码行数超1.2亿行。开源鸿蒙社区成功举办OpenHarmony开发者大会2024、第三届OpenHarmony技术大会、Oniro分论坛等多个社区旗舰活动，发布了《OpenHarmony共建地图3.0》并致谢授牌12家“百人代码贡献单位”和8家“应用建设领航单位”，社区代码共建单位超70家。&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/ns496Jff0FPMBuwgqnVTpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025.01.16&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">15</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1524</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;厚植根基，同启新程！一文回顾 2024 OpenHarmony 社区年度工作会议精彩瞬间&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025年1月10日-11日，OpenAtom OpenHarmony（开放原子开源鸿蒙，以下简称“OpenHarmony”或“开源鸿蒙”）社区2024年度工作会议于深圳盛大启幕，这场备受瞩目的盛会汇聚了开源鸿蒙社区众多成员单位，共同回顾过去一年OpenHarmony社区在技术研发、生态建设、教育推广等关键领域的卓越成就，并携手展望2025年发展宏图，旨在为OpenHarmony社区的持续繁荣注入新动力，引领开源技术迈向更广阔的发展天地，为构建智能互联的未来奠定坚实基石。&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/HFsNyhAxd17Ad4vRDYCAUQ&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025.01.16&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1523</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;第二届OpenHarmony创新应用挑战赛决赛晋级名单公示&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024年10月21日，第二届OpenHarmony创新应用挑战赛正式启动，双赛题总奖金高达50万元，吸引了全国各地418支队伍参赛。&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/JxWvIBGmTbUobjAaSQ3ViQ&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025.01.13&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">9</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1520</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;一元复始 万象更新|开源鸿蒙社区祝广大开发者元旦快乐！&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;祝广大开发者元旦快乐！&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/5DjNglcGividIsKrEeVrFA&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025.01.01&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">146</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1519</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OpenHarmony程序分析框架论文入选第50届国际软件工程大会ICSE2025&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;近日，ICSE 2025软件工程实践Track放榜，面向OpenAtom OpenHarmony（以下简称“OpenHarmony”）的ArkTS程序分析基础框架--方舟程序分析器（论文题目为《ArkAnalyzer：The Static Analysis Framework for OpenHarmony》）被接收。这是OpenHarmony相关研究首次在ICSE发表论文，这篇文章的接收意味着OpenHarmony正式被国际软件工程研究人员认可，为学术界研究OpenHarmony提供了参考。&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/RbTdqoOWJ6zv-bkFjZDb6g&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024.12.31&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">54</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1518</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OpenHarmony开发者激励计划 | 2024年度精彩回顾&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024年度精彩回顾&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/U1S4BXOFVMjFdKUdJ5lzgw&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024.12.31&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">149</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1517</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;开源鸿蒙荣获开放原子“2024年度操作系统领域国内活跃开源项目”&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;12月20日，2024开放原子开发者大会暨首届开源技术学术大会在武汉圆满召开。在大会开幕式“2024年度国内活跃开源项目&amp;开发者致谢仪式”上，开放原子开源鸿蒙（OpenAtom OpenHarmony，简称“开源鸿蒙”或“OpenHarmony”）荣获“2024年度操作系统领域国内活跃开源项目”。&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/mdfnnjNLiUrvnEk6PcVBTw&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024.12.27&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1516</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OpenHarmony项目群10-11月新增捐赠人&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024年10月，新增以下单位成为OpenHarmony项目群捐赠人：\n博赛数字科技集团有限公司成为C类捐赠人\n元心信息科技集团有限公司成为C类捐赠人\n上海健麾信息技术股份有限公司成为B类捐赠人\n2024年11月，新增以下单位成为OpenHarmony项目群捐赠人：\n武汉风行在线技术有限公司成为C类捐赠人\n诚迈科技（南京）股份有限公司成为A类捐赠人&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/8BD9TnuVTJaM4zn_58Te5A&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024.12.25&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">19</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1515</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;大咖导师 源力唤醒|第二届开源鸿蒙创新应用挑战赛导师阵容重磅亮相&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;导师阵容亮相&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/Mc2_FPR7qpO1zWAVxF5JOQ&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024.12.24&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">7</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1514</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;与鸿同行，探索无限！开源鸿蒙技术分论坛在武汉成功举办&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;12月20日，由开放原子开源基金会、中国通信学会主办，深圳开鸿数字产业发展有限公司（以下简称“深开鸿”）协办的2024开放原子开发者大会暨首届开源技术学术大会——开源鸿蒙技术分论坛在武汉顺利举行。本次论坛通过南北向开发赋能，融合前沿的行业案例经验，生动展现了开源鸿蒙在驱动技术创新与产业升级中的优势与无限潜能。&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/-WQvIFzU9g00dzJcQQQBGQ&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024.12.23&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1513</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;开源鸿蒙5.0重磅发布，共赴万物智联未来&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;12月20日，在2024开放原子开发者大会暨首届开源技术学术大会开幕式上，开放原子开源鸿蒙（即OpenAtom OpenHarmony，简称“开源鸿蒙”或“OpenHarmony”）项目群重磅发布了开源鸿蒙操作系统5.0 Release版本。&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/WQIbV9kwnhzeREaJHnEFVg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024.12.20&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">56</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1512</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;源鸿蒙 5.0 Release版本关键特性解读&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;开源鸿蒙 5.0 Release版本是开源鸿蒙操作系统的一个里程碑，在系统能力、性能优化等多个方面进一步增强。本文将从系统功能、性能优化，安全和隐私保护以及分布式能力等角度，解读该版本的关键特性。如果想了解该版本完整的特性，请参考版本的Release notes。&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/eA1ckQBLTnHEO0af98nDKg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024.12.18&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">23</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1507</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;精彩预告 | 2024开放原子开发者大会OpenHarmony技术分论坛等您来！&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024年12月20日，2024开放原子开发者大会暨首届开源技术学术大会即将在武汉举行。深开鸿在会上将承办“OpenHarmony技术分论坛”，通过南北向开发赋能，结合行业案例经验，让开发者更好更快地上手OpenHarmony开发流程。通过与不同技术的结合创新，展现OpenHarmony的技术优势和更多探索可能，诚邀更多开发者共赴这场探索之旅。&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/Bsx93rP5cj-vMgFjwIIeXg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot; 2024.12.17&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">135</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// https://old.openharmony.cn/backend/knowledge/secondaryPage/queryBatch?type=3&amp;pageNum=1&amp;pageSize=2</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;成功&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pageSize&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pageNum&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;totalPage&quot;</span><span class="punctuation">:</span> <span class="number">204</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;totalNum&quot;</span><span class="punctuation">:</span> <span class="number">407</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1533</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;对话OpenHarmony开源先锋：如何用代码革新终端生态&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025年2月23日，由开放原子开源基金会主办的第二届OpenHarmony创新应用挑战赛决赛路演在北京圆满结束，作为第二届开放原子大赛的重要赛项之一，本届赛事汇聚全球418支团队，产出超过110个创新作品，集中展示了OpenHarmony在应用与游戏开发领域的前沿成果。&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/cHsMzPTmoYec-_VL6VllBQ&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025.02.28&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">961</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1532</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;12强终极PK！第二届OpenHarmony创新应用挑战赛引爆开源热潮&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;在智能化与万物互联的浪潮中，科技的每一次突破都可能颠覆未来格局。2024年10月21日，由开放原子开源基金会主办，OpenHarmony项目群工作委员会、厦门雅基软件有限公司联合承办的第二届OpenHarmony创新应用挑战赛正式启动。&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;textDetails&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundImage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://images.openharmony.cn/%E5%86%85%E5%AE%B9%E5%B0%81%E9%9D%A2/%E8%B5%84%E8%AE%AF/%E6%B4%BB%E5%8A%A8%E5%9B%9E%E9%A1%BE.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mp.weixin.qq.com/s/2EeeruCTcZEq1qbydrgsKw&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseImage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;advertiseUrl&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;startTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025.02.24&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;endTime&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;recommend&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;likesCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareCount&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;browseCount&quot;</span><span class="punctuation">:</span> <span class="number">478</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>啊啊啊太感动了哥们，完全没变，和我猜想的一样。</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">现在的任务是这样的，当前的三个爬虫都是在官网重构之前的，现在我们的数据源根地址变成了https://old.openharmony.cn/像是 @services/openharmony_news_crawler.py 中所用的数据源API api_url = f&quot;&#123;self.base_url&#125;/backend/knowledge/secondaryPage/queryBatch?type=3&amp;pageNum=&#123;page_num&#125;&amp;pageSize=&#123;page_size&#125;&quot;这一段就要变成https://old.openharmony.cn/backend/knowledge/secondaryPage/queryBatch?type=3&amp;pageNum=1&amp;pageSize=300 请以此类推，在保持原有模板字符串拼接URL的基础上将基地址进行更换</span><br></pre></td></tr></table></figure>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/7.png" alt="7"></p>
<p>等了一会儿终于是跑完了，全部修改完成，现在让我试试吧。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/8.png" alt="8"></p>
<p>啊啊啊牛逼成功了，接下来就该去打包了。</p>
<h3 id="打包上线"><a href="#打包上线" class="headerlink" title="打包上线"></a>打包上线</h3><h4 id="本地打包"><a href="#本地打包" class="headerlink" title="本地打包"></a>本地打包</h4><p>有了上一次的经验我决定先将当前项目在本地打包成tar文件，因为服务器的CPU只有两核打包确实是太慢了，所以我现在开始让cc帮我去进行打包。</p>
<p>在等待cc执行玩之后我还是遇到了那个问题，我无法单独打包为tar，总是会直接被打包为.tar.gz格式，我尝试先去和CC交涉一下，看看是不是因为CC理解错了。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/9.png" alt="9"></p>
<p>奥，原来还真是CC写错了。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/10.png" alt="10"></p>
<h4 id="云端部署镜像"><a href="#云端部署镜像" class="headerlink" title="云端部署镜像"></a>云端部署镜像</h4><p>嘶，到了云端我才发现我好像理解错了，我只记得上次错在了导入镜像时需要的是tar不是tar.gz但是这次我直接选择tar包进行镜像导入的时候却还是报错了。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/11.png" alt="11"></p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/12.png" alt="12"></p>
<p>enm，我先给豆包看看吧。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/13.png" alt="13"></p>
<p>奥，纯粹的打包成tar文件是不够的我们还需要用docker save来去导出标准的镜像包文件。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/14.png" alt="14"></p>
<p>原来是这个原因。那我还是老老实实的去用命令行在云端构建吧。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/15.png" alt="15"></p>
<p>又开始了这个漫长的构建过程。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/16.png" alt="16"></p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/17.png" alt="17"></p>
<p>仔细观察日志发现了问题，原来是之前的爬虫修改过程有遗漏，还漏了几个基地址还是原来的老地址没有更新所以导致了404。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/18.png" alt="18"></p>
<h4 id="轮播图爬取问题"><a href="#轮播图爬取问题" class="headerlink" title="轮播图爬取问题"></a>轮播图爬取问题</h4><p>在经历了漫长的斗争之后，现在剩下的问题就在于轮播图接口始终是无法使用的状态，之前报过一个奇怪的错，再让CC修复了之后本地测试轮播图接口也是正常的，现在就是不知道为什么在远程部署后始终是无法访问。</p>
<p>当然我有一个推测是因为远程的处理器不如本地的好导致咨询的爬取占用了主要的资源导致轮播图爬虫的爬取被放到了后面，所以看起来像是轮播图的爬虫没有爬到数据。所以我决定先去等待一会儿，等第一轮爬取完全结束之后再去访问轮播图接口。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/19.png" alt="19"></p>
<p>已经全部结束了但是依旧没有数据。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/20.png" alt="20"></p>
<p>新闻接口是正常的。所以我现在怀疑就是因为Selenium在Docker容器中无法启动Chrome浏览器导致的。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/21.png" alt="21"></p>
<p>在更新了最新一版的镜像文件之后我再次去进行了尝试，但是依旧是报了和之前相同的错误。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">2025-10-13 11:52:51 - services.enhanced_mobile_banner_crawler - ERROR - ❌ Selenium WebDriver错误: Message: session not created: probably user data directory is already <span class="keyword">in</span> use, please specify a unique value <span class="keyword">for</span> --user-data-dir argument, or don<span class="string">&#x27;t use --user-data-dir</span></span><br><span class="line"><span class="string">Stacktrace:</span></span><br><span class="line"><span class="string">#0 0x55706355c6a2 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#1 0x557062fcc8ab &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#2 0x5570630083aa &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#3 0x55706300230f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#4 0x5570630512a7 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#5 0x557063050a07 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#6 0x557063041e97 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#7 0x55706300fbb1 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#8 0x557063010995 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#9 0x55706352661e &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#10 0x557063529a7f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#11 0x55706352951c &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#12 0x557063529f29 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#13 0x55706350fffb &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#14 0x55706352a2b4 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#15 0x5570634f988d &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#16 0x557063549339 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#17 0x55706354952f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#18 0x55706355b059 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#19 0x7f6356c33b7b &lt;unknown&gt;</span></span><br></pre></td></tr></table></figure>
<p>这里就说明了是因为使用selenium进行动态爬取时因为远程并没有谷歌浏览器以及浏览器的驱动程序导致了无法启动。我思考的解决方案有两种：一是直接将谷歌浏览器以及驱动程序下载到服务器上，二是更换动态爬取的方式。</p>
<h4 id="更换codex"><a href="#更换codex" class="headerlink" title="更换codex"></a>更换codex</h4><p>额，中间出了一点小状况导致我的CC401了，在和佳澎经过了一段长久的讨论之后我换成了codex，使用gpt5来去继续辅助我的工作。</p>
<p>我决定先去将上面的博文喂给它去弥补一下当前的工作状态。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/22.png" alt="22"></p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/23.png" alt="23"></p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/24.png" alt="24"></p>
<p>好好好，“顺手”你GPT5还是有点狂傲在里面的，算然确实是顺手的事，但Claude可不会这么说。</p>
<p>对于这个需求来说GPT5的high模式使用体感和Claude很类似，插件的便捷程度和界面的美观程度更胜于Claude，等我再多用一用再去进行评价吧，现在先再次部署进行轮播图接口的测试。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/25.png" alt="25"></p>
<p>果然还是没有办法一帆风顺吗。再打包并且部署了最新版本的代码之后依旧出现了熟悉的报错。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">2025-10-14 04:11:21 - services.enhanced_mobile_banner_crawler - WARNING - ⚠️ 首次启动Chrome失败: Message: session not created: probably user data directory is already <span class="keyword">in</span> use, please specify a unique value <span class="keyword">for</span> --user-data-dir argument, or don<span class="string">&#x27;t use --user-data-dir</span></span><br><span class="line"><span class="string">Stacktrace:</span></span><br><span class="line"><span class="string">#0 0x561fa3c466a2 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#1 0x561fa36b68ab &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#2 0x561fa36f23aa &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#3 0x561fa36ec30f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#4 0x561fa373b2a7 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#5 0x561fa373aa07 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#6 0x561fa372be97 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#7 0x561fa36f9bb1 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#8 0x561fa36fa995 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#9 0x561fa3c1061e &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#10 0x561fa3c13a7f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#11 0x561fa3c1351c &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#12 0x561fa3c13f29 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#13 0x561fa3bf9ffb &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#14 0x561fa3c142b4 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#15 0x561fa3be388d &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#16 0x561fa3c33339 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#17 0x561fa3c3352f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#18 0x561fa3c45059 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#19 0x7f4f9ed69b7b &lt;unknown&gt;</span></span><br><span class="line"><span class="string">2025-10-14T04:11:21.692726145Z</span></span><br><span class="line"><span class="string">2025-10-14 04:11:21 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span></span><br><span class="line"><span class="string">2025-10-14 04:11:21 - services.enhanced_mobile_banner_crawler - INFO - 📁 使用临时用户目录: /tmp/chrome_user_data_1_bf3792d4</span></span><br><span class="line"><span class="string">2025-10-14 04:11:22 - services.enhanced_mobile_banner_crawler - ERROR - ❌ Selenium WebDriver错误: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don&#x27;</span>t use --user-data-dir</span><br><span class="line">Stacktrace:</span><br><span class="line"><span class="comment">#0 0x564ea30b96a2 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#1 0x564ea2b298ab &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#2 0x564ea2b653aa &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#3 0x564ea2b5f30f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#4 0x564ea2bae2a7 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#5 0x564ea2bada07 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#6 0x564ea2b9ee97 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#7 0x564ea2b6cbb1 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#8 0x564ea2b6d995 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#9 0x564ea308361e &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#10 0x564ea3086a7f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#11 0x564ea308651c &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#12 0x564ea3086f29 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#13 0x564ea306cffb &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#14 0x564ea30872b4 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#15 0x564ea305688d &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#16 0x564ea30a6339 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#17 0x564ea30a652f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#18 0x564ea30b8059 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#19 0x7fadc5fd4b7b &lt;unknown&gt;</span></span><br><span class="line">2025-10-14T04:11:22.381714535Z</span><br><span class="line">2025-10-14 04:11:22 - services.enhanced_mobile_banner_crawler - INFO - 🧹 已清理临时用户目录: /tmp/chrome_user_data_1_bf3792d4</span><br><span class="line">2025-10-14 04:11:22 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法3: 传统HTML解析（兜底）</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 📱 已设置手机端请求头，User-Agent: Mozilla/5.0 (Linux; Android 13; SM-G991B) AppleWeb...</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 🚀 开始爬取OpenHarmony手机版banner图片</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 📱 正在请求手机版页面: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 📱 已设置手机端请求头，User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O...</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 📱 页面加载成功，内容长度: 534649 字符</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - ✅ 成功获取手机版页面内容</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 🔍 开始解析HTML内容，查找banner相关图片...</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 🔍 找到 0 个包含 banner-img 类名的元素</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*banner.*&#x27;</span> 找到 1 个元素</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*swiper.*slide.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*carousel.*&#x27;</span> 找到 5 个元素</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*slider.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*hero.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*main.*banner.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*top.*banner.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 🔍 页面总共有 16 张图片，筛选可能的banner图片...</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 🎯 共提取到 0 张唯一的banner相关图片</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - WARNING - 🔍 未找到banner图片，分析页面结构...</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - 📊 页面调试信息：</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - - 总图片数量: 16</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - - 图片1: src=https://images.openharmony.cn/compatibility/标识下载/p..., class=[<span class="string">&#x27;logo-pic&#x27;</span>], alt=无</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - - 图片2: src=/_nuxt/img/search.2585098.png..., class=[<span class="string">&#x27;search-img&#x27;</span>], alt=</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - - 图片3: src=/_nuxt/img/close.9ee23e2.svg..., class=[<span class="string">&#x27;close-img&#x27;</span>], alt=</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - - 图片4: src=/_nuxt/img/search.2585098.png..., class=[<span class="string">&#x27;search-img-instance&#x27;</span>], alt=</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - - 图片5: src=data:image/png;<span class="built_in">base64</span>,iVBORw0KGgoAAAANSUhEUgAAADAA..., class=[<span class="string">&#x27;menu-img-instance&#x27;</span>], alt=无</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - - 可能的banner容器数量: 3</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - - 容器1: class=[<span class="string">&#x27;banner&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - - 容器2: class=[<span class="string">&#x27;el-carousel&#x27;</span>, <span class="string">&#x27;el-carousel--horizontal&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - INFO - - 容器3: class=[<span class="string">&#x27;el-carousel__container&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 04:11:22 - services.mobile_banner_crawler - WARNING - ⚠️ 未找到任何banner图片</span><br><span class="line">2025-10-14 04:11:22 - services.enhanced_mobile_banner_crawler - INFO - 🎉 总共获取到 0 张唯一的banner图片</span><br><span class="line">2025-10-14 04:11:22 - services.enhanced_mobile_banner_crawler - ERROR - ❌ 保存结果失败: [Errno 2] No such file or directory: <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line">谢谢反馈，问题复现点明确了：Selenium 仍报 “user data directory is already <span class="keyword">in</span> use”，且传统解析对 Nuxt 动态页拿不到图片。我已就两处关键点做了代码级修复，并重新打包好一份可直接部署的包。</span><br><span class="line"></span><br><span class="line">已修复</span><br><span class="line"></span><br><span class="line">避免用户目录冲突</span><br><span class="line">默认不再传入 --user-data-dir；仅当你显式开启或重试时才切换策略使用唯一临时目录 services/enhanced_mobile_banner_crawler.py:80</span><br><span class="line">增加稳定性参数：--no-first-run、--no-default-browser-check、禁用部分特性 services/enhanced_mobile_banner_crawler.py:151</span><br><span class="line">远程 WebDriver 支持</span><br><span class="line">若设置 SELENIUM_REMOTE_URL（如 http://selenium:4444/wd/hub），优先使用 Remote WebDriver（适合在独立容器跑浏览器，彻底隔离） services/enhanced_mobile_banner_crawler.py:175</span><br><span class="line">保存结果路径报错</span><br><span class="line">当未提供保存目录时跳过保存，修复 “保存结果失败: No such file or directory: <span class="string">&#x27;&#x27;</span>” services/enhanced_mobile_banner_crawler.py:588</span><br><span class="line">新包已生成</span><br><span class="line"></span><br><span class="line">包路径: ../dist/openharmony-server_20251014_135500.tar.gz</span><br><span class="line">MD5: ../dist/openharmony-server_20251014_135500.tar.gz.md5</span><br><span class="line">部署步骤</span><br><span class="line"></span><br><span class="line">构建镜像（如走 Dockerfile 路径）</span><br><span class="line">docker build -t openharmony-server:latest .</span><br><span class="line">docker save -o openharmony-server-image.tar openharmony-server:latest</span><br><span class="line">上传新包或镜像</span><br><span class="line">scp ../dist/openharmony-server_20251014_135500.tar.gz &lt;server&gt;:/path/to/deploy/</span><br><span class="line">或 scp openharmony-server-image.tar &lt;server&gt;:/path/to/deploy/</span><br><span class="line">服务器加载运行（二选一）</span><br><span class="line">用 tar 包部署（含 docker-compose 与脚本）</span><br><span class="line">tar -xzf openharmony-server_20251014_135500.tar.gz &amp;&amp; <span class="built_in">cd</span> openharmony-server_20251014_135500</span><br><span class="line"><span class="built_in">chmod</span> +x deploy.sh &amp;&amp; ./deploy.sh install &amp;&amp; ./deploy.sh start</span><br><span class="line">直接加载镜像</span><br><span class="line">docker load -i openharmony-server-image.tar</span><br><span class="line">docker stop openharmony-server || <span class="literal">true</span> &amp;&amp; docker <span class="built_in">rm</span> openharmony-server || <span class="literal">true</span></span><br><span class="line">推荐启动（增强版Selenium开启）:</span><br><span class="line">docker run -d --name openharmony-server -p 8001:8001 --shm-size=1g openharmony-server:latest</span><br><span class="line">若需快速可用（禁用增强版，走传统解析）:</span><br><span class="line">docker run -d --name openharmony-server -p 8001:8001 --shm-size=1g -e BANNER_USE_ENHANCED=<span class="literal">false</span> openharmony-server:latest</span><br><span class="line">增强版仍失败时的两条建议</span><br><span class="line"></span><br><span class="line">明确关闭用户目录参数</span><br><span class="line">默认已关闭；如你在环境里曾设置过 SELENIUM_USE_USER_DATA_DIR=<span class="literal">true</span>，请移除或设为 <span class="literal">false</span></span><br><span class="line">使用远程 WebDriver（推荐，最稳）</span><br><span class="line">启动独立浏览器容器（同一网络）:</span><br><span class="line">docker network create ohnet || <span class="literal">true</span></span><br><span class="line">docker run -d --name selenium --network ohnet -p 4444:4444 --shm-size=2g selenium/standalone-chromium:latest</span><br><span class="line">启动应用容器并指向远程：</span><br><span class="line">docker run -d --name openharmony-server --network ohnet -p 8001:8001 -e SELENIUM_REMOTE_URL=http://selenium:4444/wd/hub openharmony-server:latest</span><br><span class="line">验证</span><br><span class="line"></span><br><span class="line">状态: curl http://&lt;host&gt;:8001/api/banner/status</span><br><span class="line">获取: curl http://&lt;host&gt;:8001/api/banner/mobile</span><br><span class="line">日志: docker logs -f openharmony-server | grep -Ei <span class="string">&#x27;banner|selenium&#x27;</span></span><br><span class="line">期望看到：不再打印 “📁 使用临时用户目录 …” 日志（默认关闭），或切换策略后成功启动；且不再出现 “保存结果失败…”</span><br><span class="line">是否需要我帮你把 docker-compose.prod.yml 也补上 SELENIUM_REMOTE_URL 和可选的 BANNER_USE_ENHANCED、SELENIUM_USE_USER_DATA_DIR 环境配置，以便一键部署？</span><br><span class="line"></span><br><span class="line">2 files changed</span><br><span class="line">+80</span><br><span class="line">-45</span><br><span class="line"></span><br><span class="line">Undo</span><br><span class="line"></span><br><span class="line">View all changes</span><br><span class="line">README.md</span><br><span class="line">+2</span><br><span class="line">-1</span><br><span class="line"></span><br><span class="line">enhanced_mobile_banner_crawler.py</span><br><span class="line">+78</span><br><span class="line">-44</span><br><span class="line"></span><br><span class="line">好，按你的方案去做，直接全部做完</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">已按方案完整落地并打包，包含代码修复、Compose 联动、远程 WebDriver、一键部署说明。</span><br><span class="line"></span><br><span class="line">核心改动</span><br><span class="line"></span><br><span class="line">增强版爬虫稳健化</span><br><span class="line">默认不传 --user-data-dir，失败自动切换策略；支持唯一临时目录并清理 services/enhanced_mobile_banner_crawler.py:80</span><br><span class="line">支持远程 WebDriver：SELENIUM_REMOTE_URL 指向 http://selenium:4444/wd/hub services/enhanced_mobile_banner_crawler.py:175</span><br><span class="line">稳定参数：--no-first-run --no-default-browser-check 等 services/enhanced_mobile_banner_crawler.py:151</span><br><span class="line">修复空目录保存报错（不再尝试保存到空路径） services/enhanced_mobile_banner_crawler.py:588</span><br><span class="line">调度与 API 行为</span><br><span class="line">通过 BANNER_USE_ENHANCED 开关控制增强版；失败回退传统爬虫 core/scheduler.py:134, api/banner.py:194</span><br><span class="line">Compose 与环境</span><br><span class="line">dev/prod Compose 均内置 selenium/standalone-chromium 服务，app 默认连到 http://selenium:4444/wd/hub docker-compose.yml: app.env、selenium 服务; docker-compose.prod.yml: app.env、selenium 服务</span><br><span class="line">app 容器 shm_size 增大至 1g（Selenium 稳定） docker-compose.yml, docker-compose.prod.yml</span><br><span class="line">修正 image 名称与默认环境变量串接 docker-compose.yml</span><br><span class="line">.env.example 新增所有相关环境变量 .env.example</span><br><span class="line">打包产物</span><br><span class="line"></span><br><span class="line">最新包: ../dist/openharmony-server_20251014_140146.tar.gz</span><br><span class="line">校验: ../dist/openharmony-server_20251014_140146.tar.gz.md5</span><br><span class="line">服务器部署（推荐使用包+Compose）</span><br><span class="line"></span><br><span class="line">上传与解压</span><br><span class="line">scp ../dist/openharmony-server_20251014_140146.tar.gz &lt;server&gt;:/path/to/deploy/</span><br><span class="line">tar -xzf openharmony-server_20251014_140146.tar.gz &amp;&amp; <span class="built_in">cd</span> openharmony-server_20251014_140146</span><br><span class="line">环境文件</span><br><span class="line"><span class="built_in">cp</span> .env.example .<span class="built_in">env</span></span><br><span class="line">默认已启用增强版并内置远程 WebDriver，无需修改即可用</span><br><span class="line">一键安装与启动</span><br><span class="line"><span class="built_in">chmod</span> +x deploy.sh</span><br><span class="line">./deploy.sh install</span><br><span class="line">./deploy.sh start prod</span><br><span class="line">验证</span><br><span class="line">健康: curl http://&lt;host&gt;:8001/health</span><br><span class="line">轮播图状态: curl http://&lt;host&gt;:8001/api/banner/status</span><br><span class="line">手动触发并取图:</span><br><span class="line">curl -X POST http://&lt;host&gt;:8001/api/banner/crawl</span><br><span class="line">curl http://&lt;host&gt;:8001/api/banner/mobile</span><br><span class="line">查看日志（确认远程 WebDriver 已连通）:</span><br><span class="line">docker-compose logs -f app | grep -Ei <span class="string">&#x27;Selenium|WebDriver|banner&#x27;</span></span><br><span class="line">可选切换</span><br><span class="line"></span><br><span class="line">若短期内想绕过 Selenium：在 .<span class="built_in">env</span> 设置 BANNER_USE_ENHANCED=<span class="literal">false</span>，再 ./deploy.sh restart prod</span><br><span class="line">若不需要远程 WebDriver（只用容器内本地 Chromium）：</span><br><span class="line">在 .<span class="built_in">env</span> 清空 SELENIUM_REMOTE_URL=</span><br><span class="line">保留 Dockerfile 已安装的 /usr/bin/chromium 与 /usr/bin/chromedriver</span><br><span class="line">需要我现在帮你把新包通过某个固定路径和用户上传的命令行准备好，或直接在 compose 中加入固定域名/端口配置吗？</span><br><span class="line"></span><br><span class="line">3 files changed</span><br><span class="line">+91</span><br><span class="line">-42</span><br><span class="line"></span><br><span class="line">Undo</span><br><span class="line"></span><br><span class="line">View all changes</span><br><span class="line">.env.example</span><br><span class="line">+11</span><br><span class="line">-4</span><br><span class="line"></span><br><span class="line">docker-compose.prod.yml</span><br><span class="line">+38</span><br><span class="line">-17</span><br><span class="line"></span><br><span class="line">docker-compose.yml</span><br><span class="line">+42</span><br><span class="line">-21</span><br><span class="line"></span><br><span class="line">可以</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">好的，给你一整套可直接执行的上传与部署命令（包含远程 WebDriver 方案和回退选项）。</span><br><span class="line"></span><br><span class="line">本地上传</span><br><span class="line"></span><br><span class="line">变量</span><br><span class="line"><span class="built_in">export</span> SERVER=your.server.com USER=ubuntu DEST=/opt/openharmony</span><br><span class="line">上传压缩包</span><br><span class="line">ssh <span class="variable">$USER</span>@<span class="variable">$SERVER</span> <span class="string">&quot;sudo mkdir -p <span class="variable">$DEST</span> &amp;&amp; sudo chown -R <span class="variable">$USER</span>:<span class="variable">$USER</span> <span class="variable">$DEST</span>&quot;</span></span><br><span class="line">scp ../dist/openharmony-server_20251014_140146.tar.gz <span class="variable">$USER</span>@<span class="variable">$SERVER</span>:<span class="variable">$DEST</span>/</span><br><span class="line">服务器部署</span><br><span class="line"></span><br><span class="line">解压进入目录</span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$DEST</span> &amp;&amp; tar -xzf openharmony-server_20251014_140146.tar.gz &amp;&amp; <span class="built_in">cd</span> openharmony-server_20251014_140146</span><br><span class="line">环境文件</span><br><span class="line"><span class="built_in">cp</span> .env.example .<span class="built_in">env</span></span><br><span class="line">默认已配置增强版和远程 WebDriver，无需改动。如需禁用增强版：sed -i <span class="string">&#x27;s/^BANNER_USE_ENHANCED=.*/BANNER_USE_ENHANCED=false/&#x27;</span> .<span class="built_in">env</span></span><br><span class="line">一键安装与启动（生产）</span><br><span class="line"><span class="built_in">chmod</span> +x deploy.sh</span><br><span class="line">./deploy.sh install</span><br><span class="line">./deploy.sh start prod</span><br><span class="line">验证</span><br><span class="line"></span><br><span class="line">健康: curl http://&lt;host&gt;:8001/health</span><br><span class="line">轮播图状态: curl http://&lt;host&gt;:8001/api/banner/status</span><br><span class="line">拉取图片: curl http://&lt;host&gt;:8001/api/banner/mobile</span><br><span class="line">日志筛选: docker-compose logs -f app | grep -Ei <span class="string">&#x27;selenium|webdriver|banner&#x27;</span></span><br><span class="line">域名与 HTTPS（可选）</span><br><span class="line"></span><br><span class="line">设置服务域名与证书路径</span><br><span class="line">编辑 nginx/conf.d/openharmony.conf 中 server_name 为你的域名，证书放到 ssl/ 目录</span><br><span class="line">重载 Nginx</span><br><span class="line">docker-compose restart nginx</span><br><span class="line">常用切换</span><br><span class="line"></span><br><span class="line">禁用增强版（纯传统解析，最稳妥）: .<span class="built_in">env</span> 中 BANNER_USE_ENHANCED=<span class="literal">false</span>，执行 ./deploy.sh restart prod</span><br><span class="line">使用本地 Chromium 而非远程：.<span class="built_in">env</span> 中清空 SELENIUM_REMOTE_URL=（保留默认的 CHROME_BIN 与 CHROMEDRIVER_PATH）</span><br><span class="line">需要我帮你把以上命令替换为你的服务器 IP/用户名并生成一段可粘贴的一键脚本吗？</span><br></pre></td></tr></table></figure>
<p>如果说这一次的尝试再次失败我就要开始针对于轮播图爬虫开始进行重构。</p>
<p>让我先进行一下新镜像的部署工作。</p>
<p>随后查看日志</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br></pre></td><td class="code"><pre><span class="line">113.47.8.204</span><br><span class="line">0</span><br><span class="line">首页</span><br><span class="line">网站</span><br><span class="line">数据库</span><br><span class="line">Docker</span><br><span class="line">监控</span><br><span class="line">安全</span><br><span class="line">WAF</span><br><span class="line">文件</span><br><span class="line">日志</span><br><span class="line">WP Tools</span><br><span class="line">多用户</span><br><span class="line">终端</span><br><span class="line">节点管理</span><br><span class="line">计划任务</span><br><span class="line">软件商店</span><br><span class="line">设置</span><br><span class="line">退出</span><br><span class="line">应用商店</span><br><span class="line">总览</span><br><span class="line">网站</span><br><span class="line">容器</span><br><span class="line">线上镜像</span><br><span class="line">本地镜像</span><br><span class="line">容器编排</span><br><span class="line">网络</span><br><span class="line">存储卷</span><br><span class="line">仓库</span><br><span class="line">设置</span><br><span class="line">企业版</span><br><span class="line">需求反馈</span><br><span class="line">&gt;&gt;使用帮助</span><br><span class="line">请输入容器名、ID、容器镜像</span><br><span class="line">容器名</span><br><span class="line">容器ID</span><br><span class="line">状态</span><br><span class="line">镜像</span><br><span class="line">端口(主机--&gt;容器)</span><br><span class="line">操作</span><br><span class="line">NIOHSERVER</span><br><span class="line">8648cb6af6a4</span><br><span class="line">运行中</span><br><span class="line">openharmony-server:latest	</span><br><span class="line">0.0.0.0:32775--&gt;8001/tcp</span><br><span class="line">管理终端删除</span><br><span class="line">更多</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">共 1 条</span><br><span class="line">前往</span><br><span class="line">1</span><br><span class="line">页</span><br><span class="line">宝塔Linux面板©2014-2025 广东堡塔安全技术有限公司 (bt.cn)</span><br><span class="line">论坛求助</span><br><span class="line">使用手册</span><br><span class="line">微信公众号</span><br><span class="line">正版查询</span><br><span class="line">联系人工客服</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2025-10-14 06:55:21 - root - INFO - 日志系统初始化完成</span><br><span class="line">============================================================</span><br><span class="line">🚀 NowInOpenHarmony API 服务启动成功!</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14T06:55:21.825177385Z</span><br><span class="line">📡 服务可通过以下地址访问:</span><br><span class="line">----------------------------------------</span><br><span class="line">主要IP: http://172.17.0.2:8001</span><br><span class="line">API文档: http://172.17.0.2:8001/docs</span><br><span class="line">健康检查: http://172.17.0.2:8001/health</span><br><span class="line">全部新闻: http://172.17.0.2:8001/api/news/?all=<span class="literal">true</span></span><br><span class="line">Banner图片: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">----------------------------------------</span><br><span class="line">2025-10-14T06:55:21.825217345Z</span><br><span class="line">🎯 主要API端点:</span><br><span class="line">📰 全部新闻: http://172.17.0.2:8001/api/news/?all=<span class="literal">true</span></span><br><span class="line">🌐 官网新闻: http://172.17.0.2:8001/api/news/openharmony</span><br><span class="line">📚 技术博客: http://172.17.0.2:8001/api/news/blog</span><br><span class="line">📱 Banner图片: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">⚡ 服务状态: http://172.17.0.2:8001/api/health</span><br><span class="line">2025-10-14T06:55:21.825336075Z</span><br><span class="line">📋 完整API路径列表:</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">🔧 基础服务:</span><br><span class="line">根路径: http://172.17.0.2:8001/</span><br><span class="line">API文档: http://172.17.0.2:8001/docs</span><br><span class="line">ReDoc文档: http://172.17.0.2:8001/redoc</span><br><span class="line">健康检查: http://172.17.0.2:8001/health</span><br><span class="line">API健康检查: http://172.17.0.2:8001/api/health</span><br><span class="line">2025-10-14T06:55:21.825385335Z</span><br><span class="line">📰 新闻API:</span><br><span class="line">全部新闻: http://172.17.0.2:8001/api/news/</span><br><span class="line">分页新闻: http://172.17.0.2:8001/api/news/?page=1&amp;page_size=20</span><br><span class="line">搜索新闻: http://172.17.0.2:8001/api/news/?search=关键词</span><br><span class="line">分类新闻: http://172.17.0.2:8001/api/news/?category=官方动态</span><br><span class="line">OpenHarmony官网: http://172.17.0.2:8001/api/news/openharmony</span><br><span class="line">OpenHarmony技术博客: http://172.17.0.2:8001/api/news/blog</span><br><span class="line">手动爬取: http://172.17.0.2:8001/api/news/crawl (POST)</span><br><span class="line">新闻服务状态: http://172.17.0.2:8001/api/news/status/info</span><br><span class="line">2025-10-14T06:55:21.825444405Z</span><br><span class="line">🖼️ Banner轮播图API:</span><br><span class="line">手机版Banner: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">增强版Banner: http://172.17.0.2:8001/api/banner/mobile/enhanced</span><br><span class="line">Banner状态: http://172.17.0.2:8001/api/banner/status</span><br><span class="line">手动爬取Banner: http://172.17.0.2:8001/api/banner/crawl (POST)</span><br><span class="line">Banner缓存信息: http://172.17.0.2:8001/api/banner/cache</span><br><span class="line">清空Banner缓存: http://172.17.0.2:8001/api/banner/cache/clear (DELETE)</span><br><span class="line">2025-10-14T06:55:21.825471565Z</span><br><span class="line">📊 API参数示例:</span><br><span class="line">强制爬取全部新闻: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=all&amp;<span class="built_in">limit</span>=50</span><br><span class="line">爬取官网新闻: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=openharmony</span><br><span class="line">爬取技术博客: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=openharmony_blog</span><br><span class="line">强制爬取Banner: http://172.17.0.2:8001/api/banner/mobile?force_crawl=<span class="literal">true</span></span><br><span class="line">下载Banner图片: http://172.17.0.2:8001/api/banner/mobile/enhanced?download_images=<span class="literal">true</span></span><br><span class="line">增强版爬取: http://172.17.0.2:8001/api/banner/crawl?use_enhanced=<span class="literal">true</span></span><br><span class="line">2025-10-14T06:55:21.825499015Z</span><br><span class="line">💡 提示:</span><br><span class="line">- 局域网IP可供同一网络下的其他设备访问</span><br><span class="line">- GET请求可直接在浏览器中访问</span><br><span class="line">- POST/DELETE请求需要使用API工具(如Postman)或curl命令</span><br><span class="line">- 使用 Ctrl+C 停止服务</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14T06:55:21.825523525Z</span><br><span class="line">⚙️ 启动配置:</span><br><span class="line">绑定地址: 0.0.0.0</span><br><span class="line">端口: 8001</span><br><span class="line">调试模式: False</span><br><span class="line">日志级别: INFO</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14 06:55:22 - root - INFO - 日志系统初始化完成</span><br><span class="line">INFO: Started server process [1]</span><br><span class="line">INFO: Waiting <span class="keyword">for</span> application startup.</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 应用启动中...</span><br><span class="line">2025-10-14 06:55:22 - core.database - INFO - 数据库初始化完成</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 数据库初始化完成</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 新闻缓存初始化完成</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 轮播图缓存初始化完成</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 缓存初始化完成</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 定时任务设置完成</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;更新所有新闻源缓存&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;更新轮播图缓存&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;完整爬取任务&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Scheduler started</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 定时任务调度器已启动</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 定时任务调度器启动完成</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 开始执行初始缓存加载...</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 开始执行初始缓存加载</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 📦 分批写入模式：将在第一批数据写入后立即变为可用状态</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 🚀 开始执行初始缓存加载 - 来源: all</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 📊 初始缓存加载 - 准备并行爬取数据...</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 🖼️ 开始执行初始轮播图加载</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 初始缓存加载任务已提交到后台线程，服务可以立即响应请求</span><br><span class="line">2025-10-14 06:55:22 - services.news_service - INFO - 🌐 开始爬取OpenHarmony官网新闻...</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 开始轮播图数据更新，状态设为准备中</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 初始轮播图加载任务已提交到后台线程</span><br><span class="line">2025-10-14 06:55:22 - services.openharmony_news_crawler - INFO - 🌐 开始爬取OpenHarmony官网新闻...</span><br><span class="line">2025-10-14 06:55:22 - services.openharmony_news_crawler - INFO - 📦 启用分批处理模式，每 20 篇文章执行一次回调</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 初始缓存加载完成</span><br><span class="line">🚀 开始高效获取OpenHarmony文章信息，每页300条数据...</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 轮播图服务状态更新: preparing</span><br><span class="line">📡 请求API: 第1页</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 应用启动完成</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🚀 初始化增强版手机Banner爬虫</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - - Selenium可用: True</span><br><span class="line">INFO: Application startup complete.</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - - requests-html可用: False</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🚀 开始增强版手机Banner爬取...</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法1: Selenium WebDriver</span><br><span class="line">INFO: Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🎯 使用Selenium获取动态轮播图...</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chromedriver: /usr/bin/chromedriver</span><br><span class="line">📊 第1页获取到300条数据</span><br><span class="line">📈 第1页新增300条有效数据，累计300条</span><br><span class="line">📡 请求API: 第2页</span><br><span class="line">📊 第2页获取到107条数据</span><br><span class="line">📈 第2页新增107条有效数据，累计407条</span><br><span class="line">🎯 第2页数据量(107)小于页面大小(300)，爬取完成</span><br><span class="line">📋 共���取到407条有效文章信息</span><br><span class="line">🔍 进行快速有效性校验...</span><br><span class="line">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - WARNING - ⚠️ 首次启动Chrome失败: Message: session not created: probably user data directory is already <span class="keyword">in</span> use, please specify a unique value <span class="keyword">for</span> --user-data-dir argument, or don<span class="string">&#x27;t use --user-data-dir</span></span><br><span class="line"><span class="string">Stacktrace:</span></span><br><span class="line"><span class="string">#0 0x560a5870c6a2 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#1 0x560a5817c8ab &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#2 0x560a581b83aa &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#3 0x560a581b230f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#4 0x560a582012a7 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#5 0x560a58200a07 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#6 0x560a581f1e97 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#7 0x560a581bfbb1 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#8 0x560a581c0995 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#9 0x560a586d661e &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#10 0x560a586d9a7f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#11 0x560a586d951c &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#12 0x560a586d9f29 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#13 0x560a586bfffb &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#14 0x560a586da2b4 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#15 0x560a586a988d &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#16 0x560a586f9339 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#17 0x560a586f952f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#18 0x560a5870b059 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#19 0x7fc084eebb7b &lt;unknown&gt;</span></span><br><span class="line"><span class="string">2025-10-14T06:55:23.266969990Z</span></span><br><span class="line"><span class="string">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span></span><br><span class="line"><span class="string">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 📁 使用临时用户目录: /tmp/chrome_user_data_1_dcac6900</span></span><br><span class="line"><span class="string">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - ERROR - ❌ Selenium WebDriver错误: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don&#x27;</span>t use --user-data-dir</span><br><span class="line">Stacktrace:</span><br><span class="line"><span class="comment">#0 0x5630b3df96a2 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#1 0x5630b38698ab &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#2 0x5630b38a53aa &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#3 0x5630b389f30f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#4 0x5630b38ee2a7 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#5 0x5630b38eda07 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#6 0x5630b38dee97 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#7 0x5630b38acbb1 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#8 0x5630b38ad995 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#9 0x5630b3dc361e &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#10 0x5630b3dc6a7f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#11 0x5630b3dc651c &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#12 0x5630b3dc6f29 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#13 0x5630b3dacffb &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#14 0x5630b3dc72b4 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#15 0x5630b3d9688d &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#16 0x5630b3de6339 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#17 0x5630b3de652f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#18 0x5630b3df8059 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#19 0x7f43d226fb7b &lt;unknown&gt;</span></span><br><span class="line">2025-10-14T06:55:23.947789883Z</span><br><span class="line">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 🧹 已清理临时用户目录: /tmp/chrome_user_data_1_dcac6900</span><br><span class="line">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法3: 传统HTML解析（兜底）</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 📱 已设置手机端请求头，User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O...</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 🚀 开始爬取OpenHarmony手机版banner图片</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 📱 正在请求手机版页面: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 📱 已设置手机端请求头，User-Agent: Mozilla/5.0 (Linux; Android 13; SM-G991B) AppleWeb...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 📱 页面加载成功，内容长度: 534649 字符</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - ✅ 成功获取手机版页面内容</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 开始解析HTML内容，查找banner相关图片...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 找到 0 个包含 banner-img 类名的元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*banner.*&#x27;</span> 找到 1 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*swiper.*slide.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*carousel.*&#x27;</span> 找到 5 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*slider.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*hero.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*main.*banner.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*top.*banner.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 页面总共有 16 张图片，筛选可能的banner图片...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🎯 共提取到 0 张唯一的banner相关图片</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - WARNING - 🔍 未找到banner图片，分析页面结构...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 📊 页面调试信息：</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 总图片数量: 16</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片1: src=https://images.openharmony.cn/compatibility/标识下载/p..., class=[<span class="string">&#x27;logo-pic&#x27;</span>], alt=无</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片2: src=/_nuxt/img/search.2585098.png..., class=[<span class="string">&#x27;search-img&#x27;</span>], alt=</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片3: src=/_nuxt/img/close.9ee23e2.svg..., class=[<span class="string">&#x27;close-img&#x27;</span>], alt=</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片4: src=/_nuxt/img/search.2585098.png..., class=[<span class="string">&#x27;search-img-instance&#x27;</span>], alt=</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片5: src=data:image/png;<span class="built_in">base64</span>,iVBORw0KGgoAAAANSUhEUgAAADAA..., class=[<span class="string">&#x27;menu-img-instance&#x27;</span>], alt=无</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 可能的banner容器数量: 3</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 容器1: class=[<span class="string">&#x27;banner&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 容器2: class=[<span class="string">&#x27;el-carousel&#x27;</span>, <span class="string">&#x27;el-carousel--horizontal&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 容器3: class=[<span class="string">&#x27;el-carousel__container&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - WARNING - ⚠️ 未找到任何banner图片</span><br><span class="line">2025-10-14 06:55:25 - services.enhanced_mobile_banner_crawler - INFO - 🎉 总共获取到 0 张唯一的banner图片</span><br><span class="line">2025-10-14 06:55:25 - core.scheduler - INFO - ✅ 使用增强版爬虫成功，获取 0 张图片</span><br><span class="line">2025-10-14 06:55:25 - core.cache - INFO - 开始轮播图数据更新，状态设为准备中</span><br><span class="line">2025-10-14 06:55:25 - core.cache - INFO - 轮播图服务状态更新: preparing</span><br><span class="line">2025-10-14 06:55:25 - core.cache - INFO - 🎉 轮播图首次加载完成</span><br><span class="line">2025-10-14 06:55:25 - core.cache - WARNING - ⚠️ 轮播图缓存更新完成，但未获取到数据，状态保持：PREPARING</span><br><span class="line">2025-10-14 06:55:25 - core.scheduler - WARNING - ⚠️ 初始轮播图加载完成，但未找到任何轮播图，状态保持PREPARING</span><br><span class="line">2025-10-14 06:55:26 - main - INFO - GET /health - Status: 200 - Process Time: 0.001s</span><br><span class="line">INFO: 127.0.0.1:58790 - <span class="string">&quot;GET /health HTTP/1.1&quot;</span> 200 OK</span><br><span class="line">✅ 快速校验完成：10/10 有效，有效率100.0%</span><br><span class="line">🚀 有效率高，跳过完整校验，直接返回所有数据</span><br><span class="line">2025-10-14 06:55:26 - services.openharmony_news_crawler - INFO - 📋 获取到 407 篇文章信息</span><br><span class="line">2025-10-14 06:55:26 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 1/407 篇文章: 对话OpenHarmony开源先锋：如何用代码革新终端生态</span><br><span class="line">2025-10-14 06:55:27 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 27 个内容块</span><br><span class="line">2025-10-14 06:55:28 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 2/407 篇文章: 12强终极PK！第二届OpenHarmony创新应用挑战赛引爆开源热潮</span><br><span class="line">2025-10-14 06:55:28 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 11 个内容块</span><br><span class="line">2025-10-14 06:55:29 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 3/407 篇文章: 第二届OpenHarmony创新应用挑战赛决赛路演队伍揭晓</span><br><span class="line">2025-10-14 06:55:30 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 06:55:31 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 4/407 篇文章: OpenHarmony社区2024年度运营报告发布，致谢每一位生态共建者！</span><br><span class="line">2025-10-14 06:55:31 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 34 个内容块</span><br><span class="line">2025-10-14 06:55:32 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 5/407 篇文章: 开源鸿蒙社区恭祝全体开发者2025新年快乐，新春大吉！</span><br><span class="line">2025-10-14 06:55:33 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 06:55:34 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 6/407 篇文章: 共绘2025年开源新蓝图，OpenHarmony社区项目管理委员会年度工作会议在深圳成功举办</span><br><span class="line">2025-10-14 06:55:34 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 41 个内容块</span><br><span class="line">2025-10-14 06:55:35 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 7/407 篇文章: 开源鸿蒙项目群新增捐赠人（2024年12月）</span><br><span class="line">2025-10-14 06:55:36 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 16 个内容块</span><br><span class="line">2025-10-14 06:55:37 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 8/407 篇文章: 开源鸿蒙社区隆重致谢授牌2024年度社区贡献单位和个人</span><br><span class="line">2025-10-14 06:55:37 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 4 个内容块</span><br><span class="line">2025-10-14 06:55:38 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 9/407 篇文章: 厚植根基，同启新程！一文回顾 2024 OpenHarmony 社区年度工作会议精彩瞬间</span><br><span class="line">2025-10-14 06:55:39 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 44 个内容块</span><br><span class="line">2025-10-14 06:55:40 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 10/407 篇文章: 第二届OpenHarmony创新应用挑战赛决赛晋级名单公示</span><br><span class="line">2025-10-14 06:55:40 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 06:55:41 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 11/407 篇文章: 一元复始 万象更新|开源鸿蒙社区祝广大开发者元旦快乐！</span><br><span class="line">2025-10-14 06:55:42 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 06:55:43 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 12/407 篇文章: OpenHarmony程序分析框架论文入选第50届国际软件工程大会ICSE2025</span><br><span class="line">2025-10-14 06:55:43 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 8 个内容块</span><br><span class="line">2025-10-14 06:55:44 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 13/407 篇文章: OpenHarmony开发者激励计划 | 2024年度精彩回顾</span><br><span class="line">2025-10-14 06:55:45 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 4 个内容块</span><br><span class="line">2025-10-14 06:55:46 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 14/407 篇文章: 开源鸿蒙荣获开放原子“2024年度操作系统领域国内活跃开源项目”</span><br><span class="line">2025-10-14 06:55:47 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 8 个内容块</span><br><span class="line">2025-10-14 06:55:48 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 15/407 篇文章: OpenHarmony项目群10-11月新增捐赠人</span><br><span class="line">2025-10-14 06:55:48 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 39 个内容块</span><br><span class="line">2025-10-14 06:55:49 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 16/407 篇文章: 大咖导师 源力唤醒|第二届开源鸿蒙创新应用挑战赛导师阵容重磅亮相</span><br><span class="line">2025-10-14 06:55:50 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 06:55:51 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 17/407 篇文章: 与鸿同行，探索无限！开源鸿蒙技术分论坛在武汉成功举办</span><br><span class="line">2025-10-14 06:55:51 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 49 个内容块</span><br><span class="line">2025-10-14 06:55:52 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 18/407 篇文章: 开源鸿蒙5.0重磅发布，共赴万物智联未来</span><br><span class="line">2025-10-14 06:55:53 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 17 个内容块</span><br><span class="line">2025-10-14 06:55:54 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 19/407 篇文章: 源鸿蒙 5.0 Release版本关键特性解读</span><br><span class="line">2025-10-14 06:55:54 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 24 个内容块</span><br><span class="line">2025-10-14 06:55:55 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 20/407 篇文章: 精彩预告 | 2024开放原子开发者大会OpenHarmony技术分论坛等您来！</span><br><span class="line">2025-10-14 06:55:56 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 06:55:56 - services.openharmony_news_crawler - INFO - 📦 [分批处理] 达到批处理大小 20，执行回调...</span><br><span class="line">2025-10-14 06:55:56 - core.cache - INFO - 🔄 [分批更新] 追加 20 篇文章后触发排序</span><br><span class="line">2025-10-14 06:55:56 - core.cache - INFO - 🔄 [缓存排序] 开始对 20 篇文章进行日期排序...</span><br><span class="line">2025-10-14 06:55:56 - core.cache - INFO - ✅ [缓存排序] 排序完成！</span><br><span class="line">2025-10-14 06:55:56 - core.cache - INFO - 📊 [缓存排序] 成功解析: 20/20 (100.0%)</span><br><span class="line">2025-10-14 06:55:56 - core.cache - INFO - 📅 [缓存排序] 解析示例: 2025-02-28 -&gt; 2025-02-28, 2025-02-24 -&gt; 2025-02-24, 2025-02-20 -&gt; 2025-02-20</span><br><span class="line">2025-10-14 06:55:56 - core.cache - INFO - 📈 [缓存排序] 最新文章日期: [<span class="string">&#x27;2025-02-28&#x27;</span>, <span class="string">&#x27;2025-02-24&#x27;</span>, <span class="string">&#x27;2025-02-20&#x27;</span>]</span><br><span class="line">2025-10-14 06:55:56 - core.cache - INFO - 📝 [首次加载] 增量追加 20 篇新文章到缓存（跳过 0 篇重复）</span><br><span class="line">2025-10-14 06:55:56 - core.cache - INFO - 📊 [首次加载] 缓存总数: 20 篇文章</span><br><span class="line">2025-10-14 06:55:56 - services.news_service - INFO - 📝 [OpenHarmony官网批次] 已写入 20 篇文章到缓存</span><br><span class="line">2025-10-14 06:55:56 - services.openharmony_news_crawler - INFO - ✅ [分批处理] 回调执行成功，继续处理后续文章</span><br><span class="line">2025-10-14 06:55:56 - main - INFO - GET /health - Status: 200 - Process Time: 0.001s</span><br><span class="line">INFO: 127.0.0.1:43648 - <span class="string">&quot;GET /health HTTP/1.1&quot;</span> 200 OK</span><br><span class="line">2025-10-14 06:55:57 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 21/407 篇文章: OpenHarmony安全漏洞奖励计划诚邀您参与安全研究，赢取丰厚漏洞奖金</span><br><span class="line">2025-10-14 06:55:57 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 12 个内容块</span><br><span class="line">2025-10-14 06:55:58 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 22/407 篇文章: OpenHarmony统一互联PMC（筹）研讨会在武汉顺利召开</span><br><span class="line">2025-10-14 06:55:58 - services.openharmony_news_crawler - WARNING - ⚠️ 文章内容解析失败: OpenHarmony统一互联PMC（筹）研讨会在武汉顺利召开</span><br><span class="line">2025-10-14 06:55:59 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 23/407 篇文章: OpenHarmony人才生态大会2024在武汉成功举办</span><br><span class="line">2025-10-14 06:56:00 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 37 个内容块</span><br><span class="line">2025-10-14 06:56:01 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 24/407 篇文章: OpenHarmony硬件芯片工作组系列直播课</span><br><span class="line">2025-10-14 06:56:01 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 17 个内容块</span><br><span class="line">2025-10-14 06:56:02 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 25/407 篇文章: 开源因你，熠熠生辉！第三届OpenHarmony技术大会致演讲嘉宾的感谢信</span><br><span class="line">2025-10-14 06:56:03 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 06:56:04 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 26/407 篇文章: 开源有你，一路同行！第三届OpenHarmony技术大会致工作人员的感谢信</span><br><span class="line">2025-10-14 06:56:04 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 4 个内容块</span><br><span class="line">2025-10-14 06:56:05 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 27/407 篇文章: OpenHarmony人才认证授权培训伙伴招募</span><br><span class="line">2025-10-14 06:56:06 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 20 个内容块</span><br><span class="line">2025-10-14 06:56:07 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 28/407 篇文章: OpenHarmony人才生态大会2024|11月27日·武汉，诚邀您参会！</span><br><span class="line">2025-10-14 06:56:07 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 06:56:08 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 29/407 篇文章: OpenHarmony赛道斩获最多奖项！“松山湖杯”第一届中国研究生操作系统开源创新大赛圆满落幕</span><br><span class="line">NIOHSERVER</span><br><span class="line">(44.79 KB)</span><br><span class="line">2025-10-14 06:55:21 - root - INFO - 日志系统初始化完成</span><br><span class="line">============================================================</span><br><span class="line">🚀 NowInOpenHarmony API 服务启动成功!</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14T06:55:21.825177385Z</span><br><span class="line">📡 服务可通过以下地址访问:</span><br><span class="line">----------------------------------------</span><br><span class="line">主要IP: http://172.17.0.2:8001</span><br><span class="line">API文档: http://172.17.0.2:8001/docs</span><br><span class="line">健康检查: http://172.17.0.2:8001/health</span><br><span class="line">全部新闻: http://172.17.0.2:8001/api/news/?all=<span class="literal">true</span></span><br><span class="line">Banner图片: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">----------------------------------------</span><br><span class="line">2025-10-14T06:55:21.825217345Z</span><br><span class="line">🎯 主要API端点:</span><br><span class="line">📰 全部新闻: http://172.17.0.2:8001/api/news/?all=<span class="literal">true</span></span><br><span class="line">🌐 官网新闻: http://172.17.0.2:8001/api/news/openharmony</span><br><span class="line">📚 技术博客: http://172.17.0.2:8001/api/news/blog</span><br><span class="line">📱 Banner图片: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">⚡ 服务状态: http://172.17.0.2:8001/api/health</span><br><span class="line">2025-10-14T06:55:21.825336075Z</span><br><span class="line">📋 完整API路径列表:</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">🔧 基础服务:</span><br><span class="line">根路径: http://172.17.0.2:8001/</span><br><span class="line">API文档: http://172.17.0.2:8001/docs</span><br><span class="line">ReDoc文档: http://172.17.0.2:8001/redoc</span><br><span class="line">健康检查: http://172.17.0.2:8001/health</span><br><span class="line">API健康检查: http://172.17.0.2:8001/api/health</span><br><span class="line">2025-10-14T06:55:21.825385335Z</span><br><span class="line">📰 新闻API:</span><br><span class="line">全部新闻: http://172.17.0.2:8001/api/news/</span><br><span class="line">分页新闻: http://172.17.0.2:8001/api/news/?page=1&amp;page_size=20</span><br><span class="line">搜索新闻: http://172.17.0.2:8001/api/news/?search=关键词</span><br><span class="line">分类新闻: http://172.17.0.2:8001/api/news/?category=官方动态</span><br><span class="line">OpenHarmony官网: http://172.17.0.2:8001/api/news/openharmony</span><br><span class="line">OpenHarmony技术博客: http://172.17.0.2:8001/api/news/blog</span><br><span class="line">手动爬取: http://172.17.0.2:8001/api/news/crawl (POST)</span><br><span class="line">新闻服务状态: http://172.17.0.2:8001/api/news/status/info</span><br><span class="line">2025-10-14T06:55:21.825444405Z</span><br><span class="line">🖼️ Banner轮播图API:</span><br><span class="line">手机版Banner: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">增强版Banner: http://172.17.0.2:8001/api/banner/mobile/enhanced</span><br><span class="line">Banner状态: http://172.17.0.2:8001/api/banner/status</span><br><span class="line">手动爬取Banner: http://172.17.0.2:8001/api/banner/crawl (POST)</span><br><span class="line">Banner缓存信息: http://172.17.0.2:8001/api/banner/cache</span><br><span class="line">清空Banner缓存: http://172.17.0.2:8001/api/banner/cache/clear (DELETE)</span><br><span class="line">2025-10-14T06:55:21.825471565Z</span><br><span class="line">📊 API参数示例:</span><br><span class="line">强制爬取全部新闻: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=all&amp;<span class="built_in">limit</span>=50</span><br><span class="line">爬取官网新闻: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=openharmony</span><br><span class="line">爬取技术博客: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=openharmony_blog</span><br><span class="line">强制爬取Banner: http://172.17.0.2:8001/api/banner/mobile?force_crawl=<span class="literal">true</span></span><br><span class="line">下载Banner图片: http://172.17.0.2:8001/api/banner/mobile/enhanced?download_images=<span class="literal">true</span></span><br><span class="line">增强版爬取: http://172.17.0.2:8001/api/banner/crawl?use_enhanced=<span class="literal">true</span></span><br><span class="line">2025-10-14T06:55:21.825499015Z</span><br><span class="line">💡 提示:</span><br><span class="line">- 局域网IP可供同一网络下的其他设备访问</span><br><span class="line">- GET请求可直接在浏览器中访问</span><br><span class="line">- POST/DELETE请求需要使用API工具(如Postman)或curl命令</span><br><span class="line">- 使用 Ctrl+C 停止服务</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14T06:55:21.825523525Z</span><br><span class="line">⚙️ 启动配置:</span><br><span class="line">绑定地址: 0.0.0.0</span><br><span class="line">端口: 8001</span><br><span class="line">调试模式: False</span><br><span class="line">日志级别: INFO</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14 06:55:22 - root - INFO - 日志系统初始化完成</span><br><span class="line">INFO: Started server process [1]</span><br><span class="line">INFO: Waiting <span class="keyword">for</span> application startup.</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 应用启动中...</span><br><span class="line">2025-10-14 06:55:22 - core.database - INFO - 数据库初始化完成</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 数据库初始化完成</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 新闻缓存初始化完成</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 轮播图缓存初始化完成</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 缓存初始化完成</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 定时任务设置完成</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;更新所有新闻源缓存&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;更新轮播图缓存&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;完整爬取任务&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Scheduler started</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 定时任务调度器已启动</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 定时任务调度器启动完成</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 开始执行初始缓存加载...</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 开始执行初始缓存加载</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 📦 分批写入模式：将在第一批数据写入后立即变为可用状态</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 🚀 开始执行初始缓存加载 - 来源: all</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 📊 初始缓存加载 - 准备并行爬取数据...</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 🖼️ 开始执行初始轮播图加载</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 初始缓存加载任务已提交到后台线程，服务可以立即响应请求</span><br><span class="line">2025-10-14 06:55:22 - services.news_service - INFO - 🌐 开始爬取OpenHarmony官网新闻...</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 开始轮播图数据更新，状态设为准备中</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 初始轮播图加载任务已提交到后台线程</span><br><span class="line">2025-10-14 06:55:22 - services.openharmony_news_crawler - INFO - 🌐 开始爬取OpenHarmony官网新闻...</span><br><span class="line">2025-10-14 06:55:22 - services.openharmony_news_crawler - INFO - 📦 启用分批处理模式，每 20 篇文章执行一次回调</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 初始缓存加载完成</span><br><span class="line">🚀 开始高效获取OpenHarmony文章信息，每页300条数据...</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 轮播图服务状态更新: preparing</span><br><span class="line">📡 请求API: 第1页</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 应用启动完成</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🚀 初始化增强版手机Banner爬虫</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - - Selenium可用: True</span><br><span class="line">INFO: Application startup complete.</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - - requests-html可用: False</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🚀 开始增强版手机Banner爬取...</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法1: Selenium WebDriver</span><br><span class="line">INFO: Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🎯 使用Selenium获取动态轮播图...</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chromedriver: /usr/bin/chromedriver</span><br><span class="line">📊 第1页获取到300条数据</span><br><span class="line">📈 第1页新增300条有效数据，累计300条</span><br><span class="line">📡 请求API: 第2页</span><br><span class="line">📊 第2页获取到107条数据</span><br><span class="line">📈 第2页新增107条有效数据，累计407条</span><br><span class="line">🎯 第2页数据量(107)小于页面大小(300)，爬取完成</span><br><span class="line">📋 共���取到407条有效文章信息</span><br><span class="line">🔍 进行快速有效性校验...</span><br><span class="line">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - WARNING - ⚠️ 首次启动Chrome失败: Message: session not created: probably user data directory is already <span class="keyword">in</span> use, please specify a unique value <span class="keyword">for</span> --user-data-dir argument, or don<span class="string">&#x27;t use --user-data-dir</span></span><br><span class="line"><span class="string">Stacktrace:</span></span><br><span class="line"><span class="string">#0 0x560a5870c6a2 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#1 0x560a5817c8ab &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#2 0x560a581b83aa &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#3 0x560a581b230f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#4 0x560a582012a7 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#5 0x560a58200a07 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#6 0x560a581f1e97 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#7 0x560a581bfbb1 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#8 0x560a581c0995 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#9 0x560a586d661e &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#10 0x560a586d9a7f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#11 0x560a586d951c &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#12 0x560a586d9f29 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#13 0x560a586bfffb &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#14 0x560a586da2b4 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#15 0x560a586a988d &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#16 0x560a586f9339 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#17 0x560a586f952f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#18 0x560a5870b059 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#19 0x7fc084eebb7b &lt;unknown&gt;</span></span><br><span class="line"><span class="string">2025-10-14T06:55:23.266969990Z</span></span><br><span class="line"><span class="string">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span></span><br><span class="line"><span class="string">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 📁 使用临时用户目录: /tmp/chrome_user_data_1_dcac6900</span></span><br><span class="line"><span class="string">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - ERROR - ❌ Selenium WebDriver错误: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don&#x27;</span>t use --user-data-dir</span><br><span class="line">Stacktrace:</span><br><span class="line"><span class="comment">#0 0x5630b3df96a2 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#1 0x5630b38698ab &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#2 0x5630b38a53aa &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#3 0x5630b389f30f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#4 0x5630b38ee2a7 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#5 0x5630b38eda07 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#6 0x5630b38dee97 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#7 0x5630b38acbb1 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#8 0x5630b38ad995 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#9 0x5630b3dc361e &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#10 0x5630b3dc6a7f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#11 0x5630b3dc651c &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#12 0x5630b3dc6f29 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#13 0x5630b3dacffb &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#14 0x5630b3dc72b4 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#15 0x5630b3d9688d &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#16 0x5630b3de6339 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#17 0x5630b3de652f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#18 0x5630b3df8059 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#19 0x7f43d226fb7b &lt;unknown&gt;</span></span><br><span class="line">2025-10-14T06:55:23.947789883Z</span><br><span class="line">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 🧹 已清理临时用户目录: /tmp/chrome_user_data_1_dcac6900</span><br><span class="line">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法3: 传统HTML解析（兜底）</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 📱 已设置手机端请求头，User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O...</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 🚀 开始爬取OpenHarmony手机版banner图片</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 📱 正在请求手机版页面: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 📱 已设置手机端请求头，User-Agent: Mozilla/5.0 (Linux; Android 13; SM-G991B) AppleWeb...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 📱 页面加载成功，内容长度: 534649 字符</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - ✅ 成功获取手机版页面内容</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 开始解析HTML内容，查找banner相关图片...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 找到 0 个包含 banner-img 类名的元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*banner.*&#x27;</span> 找到 1 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*swiper.*slide.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*carousel.*&#x27;</span> 找到 5 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*slider.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*hero.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*main.*banner.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*top.*banner.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 页面总共有 16 张图片，筛选可能的banner图片...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🎯 共提取到 0 张唯一的banner相关图片</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - WARNING - 🔍 未找到banner图片，分析页面结构...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 📊 页面调试信息：</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 总图片数量: 16</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片1: src=https://images.openharmony.cn/compatibility/标识下载/p..., class=[<span class="string">&#x27;logo-pic&#x27;</span>], alt=无</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片2: src=/_nuxt/img/search.2585098.png..., class=[<span class="string">&#x27;search-img&#x27;</span>], alt=</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片3: src=/_nuxt/img/close.9ee23e2.svg..., class=[<span class="string">&#x27;close-img&#x27;</span>], alt=</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片4: src=/_nuxt/img/search.2585098.png..., class=[<span class="string">&#x27;search-img-instance&#x27;</span>], alt=</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片5: src=data:image/png;<span class="built_in">base64</span>,iVBORw0KGgoAAAANSUhEUgAAADAA..., class=[<span class="string">&#x27;menu-img-instance&#x27;</span>], alt=无</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 可能的banner容器数量: 3</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 容器1: class=[<span class="string">&#x27;banner&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 容器2: class=[<span class="string">&#x27;el-carousel&#x27;</span>, <span class="string">&#x27;el-carousel--horizontal&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 容器3: class=[<span class="string">&#x27;el-carousel__container&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - WARNING - ⚠️ 未找到任何banner图片</span><br><span class="line">2025-10-14 06:55:25 - services.enhanced_mobile_banner_crawler - INFO - 🎉 总共获取到 0 张唯一的banner图片</span><br><span class="line">2025-10-14 06:55:25 - core.scheduler - INFO - ✅ 使用增强版爬虫成功，获取 0 张图片</span><br><span class="line">2025-10-14 06:55:25 - core.cache - INFO - 开始轮播图数据更新，状态设为准备中</span><br><span class="line">2025-10-14 06:55:25 - core.cache - INFO - 轮播图服务状态更新: preparing</span><br><span class="line">2025-10-14 06:55:25 - core.cache - INFO - 🎉 轮播图首次加载完成</span><br><span class="line">2025-10-14 06:55:25 - core.cache - WARNING - ⚠️ 轮播图缓存更新完成，但未获取到数据，状态保持：PREPARING</span><br><span class="line">2025-10-14 06:55:25 - core.scheduler - WARNING - ⚠️ 初始轮播图加载完成，但未找到任何轮播图，状态保持PREPARING</span><br><span class="line">2025-10-14 06:55:26 - main - INFO - GET /health - Status: 200 - Process Time: 0.001s</span><br><span class="line">INFO: 127.0.0.1:58790 - <span class="string">&quot;GET /health HTTP/1.1&quot;</span> 200 OK</span><br><span class="line">✅ 快速校验完成：10/10 有效，有效率100.0%</span><br><span class="line">🚀 有效率高，跳过完整校验，直接返回所有数据</span><br><span class="line">2025-10-14 06:55:26 - services.openharmony_news_crawler - INFO - 📋 获取到 407 篇文章信息</span><br><span class="line">2025-10-14 06:55:26 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 1/407 篇文章: 对话OpenHarmony开源先锋：如何用代码革新终端生态</span><br><span class="line">2025-10-14 06:55:27 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 27 个内容块</span><br><span class="line">2025-10-14 06:55:28 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 2/407 篇文章: 12强终极PK！第二届OpenHarmony创新应用挑战赛引爆开源热潮</span><br><span class="line">2025-10-14 06:55:28 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 11 个内容块</span><br><span class="line">2025-10-14 06:55:29 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 3/407 篇文章: 第二届OpenHarmony创新应用挑战赛决赛路演队伍揭晓</span><br><span class="line">2025-10-14 06:55:30 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 06:55:31 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 4/407 篇文章: OpenHarmony社区2024年度运营报告发布，致谢每一位生态共建者！</span><br><span class="line">2025-10-14 06:55:31 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 34 个内容块</span><br><span class="line">2025-10-14 06:55:32 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 5/407 篇文章: 开源鸿蒙社区恭祝全体开发者2025新年快乐，新春大吉！</span><br><span class="line">2025-10-14 06:55:21 - root - INFO - 日志系统初始化完成</span><br><span class="line">============================================================</span><br><span class="line">🚀 NowInOpenHarmony API 服务启动成功!</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14T06:55:21.825177385Z</span><br><span class="line">📡 服务可通过以下地址访问:</span><br><span class="line">----------------------------------------</span><br><span class="line">主要IP: http://172.17.0.2:8001</span><br><span class="line">API文档: http://172.17.0.2:8001/docs</span><br><span class="line">健康检查: http://172.17.0.2:8001/health</span><br><span class="line">全部新闻: http://172.17.0.2:8001/api/news/?all=<span class="literal">true</span></span><br><span class="line">Banner图片: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">----------------------------------------</span><br><span class="line">2025-10-14T06:55:21.825217345Z</span><br><span class="line">🎯 主要API端点:</span><br><span class="line">📰 全部新闻: http://172.17.0.2:8001/api/news/?all=<span class="literal">true</span></span><br><span class="line">🌐 官网新闻: http://172.17.0.2:8001/api/news/openharmony</span><br><span class="line">📚 技术博客: http://172.17.0.2:8001/api/news/blog</span><br><span class="line">📱 Banner图片: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">⚡ 服务状态: http://172.17.0.2:8001/api/health</span><br><span class="line">2025-10-14T06:55:21.825336075Z</span><br><span class="line">📋 完整API路径列表:</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">🔧 基础服务:</span><br><span class="line">根路径: http://172.17.0.2:8001/</span><br><span class="line">API文档: http://172.17.0.2:8001/docs</span><br><span class="line">ReDoc文档: http://172.17.0.2:8001/redoc</span><br><span class="line">健康检查: http://172.17.0.2:8001/health</span><br><span class="line">API健康检查: http://172.17.0.2:8001/api/health</span><br><span class="line">2025-10-14T06:55:21.825385335Z</span><br><span class="line">📰 新闻API:</span><br><span class="line">全部新闻: http://172.17.0.2:8001/api/news/</span><br><span class="line">分页新闻: http://172.17.0.2:8001/api/news/?page=1&amp;page_size=20</span><br><span class="line">搜索新闻: http://172.17.0.2:8001/api/news/?search=关键词</span><br><span class="line">分类新闻: http://172.17.0.2:8001/api/news/?category=官方动态</span><br><span class="line">OpenHarmony官网: http://172.17.0.2:8001/api/news/openharmony</span><br><span class="line">OpenHarmony技术博客: http://172.17.0.2:8001/api/news/blog</span><br><span class="line">手动爬取: http://172.17.0.2:8001/api/news/crawl (POST)</span><br><span class="line">新闻服务状态: http://172.17.0.2:8001/api/news/status/info</span><br><span class="line">2025-10-14T06:55:21.825444405Z</span><br><span class="line">🖼️ Banner轮播图API:</span><br><span class="line">手机版Banner: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">增强版Banner: http://172.17.0.2:8001/api/banner/mobile/enhanced</span><br><span class="line">Banner状态: http://172.17.0.2:8001/api/banner/status</span><br><span class="line">手动爬取Banner: http://172.17.0.2:8001/api/banner/crawl (POST)</span><br><span class="line">Banner缓存信息: http://172.17.0.2:8001/api/banner/cache</span><br><span class="line">清空Banner缓存: http://172.17.0.2:8001/api/banner/cache/clear (DELETE)</span><br><span class="line">2025-10-14T06:55:21.825471565Z</span><br><span class="line">📊 API参数示例:</span><br><span class="line">强制爬取全部新闻: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=all&amp;<span class="built_in">limit</span>=50</span><br><span class="line">爬取官网新闻: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=openharmony</span><br><span class="line">爬取技术博客: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=openharmony_blog</span><br><span class="line">强制爬取Banner: http://172.17.0.2:8001/api/banner/mobile?force_crawl=<span class="literal">true</span></span><br><span class="line">下载Banner图片: http://172.17.0.2:8001/api/banner/mobile/enhanced?download_images=<span class="literal">true</span></span><br><span class="line">增强版爬取: http://172.17.0.2:8001/api/banner/crawl?use_enhanced=<span class="literal">true</span></span><br><span class="line">2025-10-14T06:55:21.825499015Z</span><br><span class="line">💡 提示:</span><br><span class="line">- 局域网IP可供同一网络下的其他设备访问</span><br><span class="line">- GET请求可直接在浏览器中访问</span><br><span class="line">- POST/DELETE请求需要使用API工具(如Postman)或curl命令</span><br><span class="line">- 使用 Ctrl+C 停止服务</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14T06:55:21.825523525Z</span><br><span class="line">⚙️ 启动配置:</span><br><span class="line">绑定地址: 0.0.0.0</span><br><span class="line">端口: 8001</span><br><span class="line">调试模式: False</span><br><span class="line">日志级别: INFO</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14 06:55:22 - root - INFO - 日志系统初始化完成</span><br><span class="line">INFO: Started server process [1]</span><br><span class="line">INFO: Waiting <span class="keyword">for</span> application startup.</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 应用启动中...</span><br><span class="line">2025-10-14 06:55:22 - core.database - INFO - 数据库初始化完成</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 数据库初始化完成</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 新闻缓存初始化完成</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 轮播图缓存初始化完成</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 缓存初始化完成</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 定时任务设置完成</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;更新所有新闻源缓存&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;更新轮播图缓存&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;完整爬取任务&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Scheduler started</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 定时任务调度器已启动</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 定时任务调度器启动完成</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 开始执行初始缓存加载...</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 开始执行初始缓存加载</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 📦 分批写入模式：将在第一批数据写入后立即变为可用状态</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 🚀 开始执行初始缓存加载 - 来源: all</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 📊 初始缓存加载 - 准备并行爬取数据...</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 🖼️ 开始执行初始轮播图加载</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 初始缓存加载任务已提交到后台线程，服务可以立即响应请求</span><br><span class="line">2025-10-14 06:55:22 - services.news_service - INFO - 🌐 开始爬取OpenHarmony官网新闻...</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 开始轮播图数据更新，状态设为准备中</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 初始轮播图加载任务已提交到后台线程</span><br><span class="line">2025-10-14 06:55:22 - services.openharmony_news_crawler - INFO - 🌐 开始爬取OpenHarmony官网新闻...</span><br><span class="line">2025-10-14 06:55:22 - services.openharmony_news_crawler - INFO - 📦 启用分批处理模式，每 20 篇文章执行一次回调</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 初始缓存加载完成</span><br><span class="line">🚀 开始高效获取OpenHarmony文章信息，每页300条数据...</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 轮播图服务状态更新: preparing</span><br><span class="line">📡 请求API: 第1页</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 应用启动完成</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🚀 初始化增强版手机Banner爬虫</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - - Selenium可用: True</span><br><span class="line">INFO: Application startup complete.</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - - requests-html可用: False</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🚀 开始增强版手机Banner爬取...</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法1: Selenium WebDriver</span><br><span class="line">INFO: Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🎯 使用Selenium获取动态轮播图...</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chromedriver: /usr/bin/chromedriver</span><br><span class="line">📊 第1页获取到300条数据</span><br><span class="line">📈 第1页新增300条有效数据，累计300条</span><br><span class="line">📡 请求API: 第2页</span><br><span class="line">📊 第2页获取到107条数据</span><br><span class="line">📈 第2页新增107条有效数据，累计407条</span><br><span class="line">🎯 第2页数据量(107)小于页面大小(300)，爬取完成</span><br><span class="line">📋 共���取到407条有效文章信息</span><br><span class="line">🔍 进行快速有效性校验...</span><br><span class="line">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - WARNING - ⚠️ 首次启动Chrome失败: Message: session not created: probably user data directory is already <span class="keyword">in</span> use, please specify a unique value <span class="keyword">for</span> --user-data-dir argument, or don<span class="string">&#x27;t use --user-data-dir</span></span><br><span class="line"><span class="string">Stacktrace:</span></span><br><span class="line"><span class="string">#0 0x560a5870c6a2 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#1 0x560a5817c8ab &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#2 0x560a581b83aa &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#3 0x560a581b230f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#4 0x560a582012a7 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#5 0x560a58200a07 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#6 0x560a581f1e97 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#7 0x560a581bfbb1 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#8 0x560a581c0995 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#9 0x560a586d661e &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#10 0x560a586d9a7f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#11 0x560a586d951c &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#12 0x560a586d9f29 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#13 0x560a586bfffb &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#14 0x560a586da2b4 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#15 0x560a586a988d &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#16 0x560a586f9339 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#17 0x560a586f952f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#18 0x560a5870b059 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#19 0x7fc084eebb7b &lt;unknown&gt;</span></span><br><span class="line"><span class="string">2025-10-14T06:55:23.266969990Z</span></span><br><span class="line"><span class="string">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span></span><br><span class="line"><span class="string">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 📁 使用临时用户目录: /tmp/chrome_user_data_1_dcac6900</span></span><br><span class="line"><span class="string">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - ERROR - ❌ Selenium WebDriver错误: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don&#x27;</span>t use --user-data-dir</span><br><span class="line">Stacktrace:</span><br><span class="line"><span class="comment">#0 0x5630b3df96a2 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#1 0x5630b38698ab &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#2 0x5630b38a53aa &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#3 0x5630b389f30f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#4 0x5630b38ee2a7 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#5 0x5630b38eda07 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#6 0x5630b38dee97 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#7 0x5630b38acbb1 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#8 0x5630b38ad995 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#9 0x5630b3dc361e &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#10 0x5630b3dc6a7f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#11 0x5630b3dc651c &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#12 0x5630b3dc6f29 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#13 0x5630b3dacffb &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#14 0x5630b3dc72b4 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#15 0x5630b3d9688d &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#16 0x5630b3de6339 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#17 0x5630b3de652f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#18 0x5630b3df8059 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#19 0x7f43d226fb7b &lt;unknown&gt;</span></span><br><span class="line">2025-10-14T06:55:23.947789883Z</span><br><span class="line">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 🧹 已清理临时用户目录: /tmp/chrome_user_data_1_dcac6900</span><br><span class="line">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法3: 传统HTML解析（兜底）</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 📱 已设置手机端请求头，User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O...</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 🚀 开始爬取OpenHarmony手机版banner图片</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 📱 正在请求手机版页面: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 📱 已设置手机端请求头，User-Agent: Mozilla/5.0 (Linux; Android 13; SM-G991B) AppleWeb...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 📱 页面加载成功，内容长度: 534649 字符</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - ✅ 成功获取手机版页面内容</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 开始解析HTML内容，查找banner相关图片...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 找到 0 个包含 banner-img 类名的元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*banner.*&#x27;</span> 找到 1 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*swiper.*slide.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*carousel.*&#x27;</span> 找到 5 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*slider.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*hero.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*main.*banner.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*top.*banner.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 页面总共有 16 张图片，筛选可能的banner图片...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🎯 共提取到 0 张唯一的banner相关图片</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - WARNING - 🔍 未找到banner图片，分析页面结构...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 📊 页面调试信息：</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 总图片数量: 16</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片1: src=https://images.openharmony.cn/compatibility/标识下载/p..., class=[<span class="string">&#x27;logo-pic&#x27;</span>], alt=无</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片2: src=/_nuxt/img/search.2585098.png..., class=[<span class="string">&#x27;search-img&#x27;</span>], alt=</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片3: src=/_nuxt/img/close.9ee23e2.svg..., class=[<span class="string">&#x27;close-img&#x27;</span>], alt=</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片4: src=/_nuxt/img/search.2585098.png..., class=[<span class="string">&#x27;search-img-instance&#x27;</span>], alt=</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片5: src=data:image/png;<span class="built_in">base64</span>,iVBORw0KGgoAAAANSUhEUgAAADAA..., class=[<span class="string">&#x27;menu-img-instance&#x27;</span>], alt=无</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 可能的banner容器数量: 3</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 容器1: class=[<span class="string">&#x27;banner&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 容器2: class=[<span class="string">&#x27;el-carousel&#x27;</span>, <span class="string">&#x27;el-carousel--horizontal&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 容器3: class=[<span class="string">&#x27;el-carousel__container&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - WARNING - ⚠️ 未找到任何banner图片</span><br><span class="line">2025-10-14 06:55:25 - services.enhanced_mobile_banner_crawler - INFO - 🎉 总共获取到 0 张唯一的banner图片</span><br><span class="line">2025-10-14 06:55:25 - core.scheduler - INFO - ✅ 使用增强版爬虫成功，获取 0 张图片</span><br><span class="line">2025-10-14 06:55:25 - core.cache - INFO - 开始轮播图数据更新，状态设为准备中</span><br><span class="line">2025-10-14 06:55:25 - core.cache - INFO - 轮播图服务状态更新: preparing</span><br><span class="line">2025-10-14 06:55:25 - core.cache - INFO - 🎉 轮播图首次加载完成</span><br><span class="line">2025-10-14 06:55:25 - core.cache - WARNING - ⚠️ 轮播图缓存更新完成，但未获取到数据，状态保持：PREPARING</span><br><span class="line">2025-10-14 06:55:25 - core.scheduler - WARNING - ⚠️ 初始轮播图加载完成，但未找到任何轮播图，状态保持PREPARING</span><br><span class="line">2025-10-14 06:55:26 - main - INFO - GET /health - Status: 200 - Process Time: 0.001s</span><br><span class="line">INFO: 127.0.0.1:58790 - <span class="string">&quot;GET /health HTTP/1.1&quot;</span> 200 OK</span><br><span class="line">✅ 快速校验完成：10/10 有效，有效率100.0%</span><br><span class="line">🚀 有效率高，跳过完整校验，直接返回所有数据</span><br><span class="line">2025-10-14 06:55:26 - services.openharmony_news_crawler - INFO - 📋 获取到 407 篇文章信息</span><br><span class="line">2025-10-14 06:55:26 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 1/407 篇文章: 对话OpenHarmony开源先锋：如何用代码革新终端生态</span><br><span class="line">2025-10-14 06:55:27 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 27 个内容块</span><br><span class="line">2025-10-14 06:55:28 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 2/407 篇文章: 12强终极PK！第二届OpenHarmony创新应用挑战赛引爆开源热潮</span><br><span class="line">2025-10-14 06:55:28 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 11 个内容块</span><br><span class="line">2025-10-14 06:55:29 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 3/407 篇文章: 第二届OpenHarmony创新应用挑战赛决赛路演队伍揭晓</span><br><span class="line">2025-10-14 06:55:30 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 06:55:31 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 4/407 篇文章: OpenHarmony社区2024年度运营报告发布，致谢每一位生态共建者！</span><br><span class="line">2025-10-14 06:55:31 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 34 个内容块</span><br><span class="line">2025-10-14 06:55:32 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 5/407 篇文章: 开源鸿蒙社区恭祝全体开发者2025新年快乐，新春大吉！</span><br><span class="line">2025-10-14 06:55:21 - root - INFO - 日志系统初始化完成</span><br><span class="line">============================================================</span><br><span class="line">🚀 NowInOpenHarmony API 服务启动成功!</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14T06:55:21.825177385Z</span><br><span class="line">📡 服务可通过以下地址访问:</span><br><span class="line">----------------------------------------</span><br><span class="line">主要IP: http://172.17.0.2:8001</span><br><span class="line">API文档: http://172.17.0.2:8001/docs</span><br><span class="line">健康检查: http://172.17.0.2:8001/health</span><br><span class="line">全部新闻: http://172.17.0.2:8001/api/news/?all=<span class="literal">true</span></span><br><span class="line">Banner图片: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">----------------------------------------</span><br><span class="line">2025-10-14T06:55:21.825217345Z</span><br><span class="line">🎯 主要API端点:</span><br><span class="line">📰 全部新闻: http://172.17.0.2:8001/api/news/?all=<span class="literal">true</span></span><br><span class="line">🌐 官网新闻: http://172.17.0.2:8001/api/news/openharmony</span><br><span class="line">📚 技术博客: http://172.17.0.2:8001/api/news/blog</span><br><span class="line">📱 Banner图片: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">⚡ 服务状态: http://172.17.0.2:8001/api/health</span><br><span class="line">2025-10-14T06:55:21.825336075Z</span><br><span class="line">📋 完整API路径列表:</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">🔧 基础服务:</span><br><span class="line">根路径: http://172.17.0.2:8001/</span><br><span class="line">API文档: http://172.17.0.2:8001/docs</span><br><span class="line">ReDoc文档: http://172.17.0.2:8001/redoc</span><br><span class="line">健康检查: http://172.17.0.2:8001/health</span><br><span class="line">API健康检查: http://172.17.0.2:8001/api/health</span><br><span class="line">2025-10-14T06:55:21.825385335Z</span><br><span class="line">📰 新闻API:</span><br><span class="line">全部新闻: http://172.17.0.2:8001/api/news/</span><br><span class="line">分页新闻: http://172.17.0.2:8001/api/news/?page=1&amp;page_size=20</span><br><span class="line">搜索新闻: http://172.17.0.2:8001/api/news/?search=关键词</span><br><span class="line">分类新闻: http://172.17.0.2:8001/api/news/?category=官方动态</span><br><span class="line">OpenHarmony官网: http://172.17.0.2:8001/api/news/openharmony</span><br><span class="line">OpenHarmony技术博客: http://172.17.0.2:8001/api/news/blog</span><br><span class="line">手动爬取: http://172.17.0.2:8001/api/news/crawl (POST)</span><br><span class="line">新闻服务状态: http://172.17.0.2:8001/api/news/status/info</span><br><span class="line">2025-10-14T06:55:21.825444405Z</span><br><span class="line">🖼️ Banner轮播图API:</span><br><span class="line">手机版Banner: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">增强版Banner: http://172.17.0.2:8001/api/banner/mobile/enhanced</span><br><span class="line">Banner状态: http://172.17.0.2:8001/api/banner/status</span><br><span class="line">手动爬取Banner: http://172.17.0.2:8001/api/banner/crawl (POST)</span><br><span class="line">Banner缓存信息: http://172.17.0.2:8001/api/banner/cache</span><br><span class="line">清空Banner缓存: http://172.17.0.2:8001/api/banner/cache/clear (DELETE)</span><br><span class="line">2025-10-14T06:55:21.825471565Z</span><br><span class="line">📊 API参数示例:</span><br><span class="line">强制爬取全部新闻: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=all&amp;<span class="built_in">limit</span>=50</span><br><span class="line">爬取官网新闻: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=openharmony</span><br><span class="line">爬取技术博客: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=openharmony_blog</span><br><span class="line">强制爬取Banner: http://172.17.0.2:8001/api/banner/mobile?force_crawl=<span class="literal">true</span></span><br><span class="line">下载Banner图片: http://172.17.0.2:8001/api/banner/mobile/enhanced?download_images=<span class="literal">true</span></span><br><span class="line">增强版爬取: http://172.17.0.2:8001/api/banner/crawl?use_enhanced=<span class="literal">true</span></span><br><span class="line">2025-10-14T06:55:21.825499015Z</span><br><span class="line">💡 提示:</span><br><span class="line">- 局域网IP可供同一网络下的其他设备访问</span><br><span class="line">- GET请求可直接在浏览器中访问</span><br><span class="line">- POST/DELETE请求需要使用API工具(如Postman)或curl命令</span><br><span class="line">- 使用 Ctrl+C 停止服务</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14T06:55:21.825523525Z</span><br><span class="line">⚙️ 启动配置:</span><br><span class="line">绑定地址: 0.0.0.0</span><br><span class="line">端口: 8001</span><br><span class="line">调试模式: False</span><br><span class="line">日志级别: INFO</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14 06:55:22 - root - INFO - 日志系统初始化完成</span><br><span class="line">INFO: Started server process [1]</span><br><span class="line">INFO: Waiting <span class="keyword">for</span> application startup.</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 应用启动中...</span><br><span class="line">2025-10-14 06:55:22 - core.database - INFO - 数据库初始化完成</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 数据库初始化完成</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 新闻缓存初始化完成</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 轮播图缓存初始化完成</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 缓存初始化完成</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 定时任务设置完成</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;更新所有新闻源缓存&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;更新轮播图缓存&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;完整爬取任务&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Scheduler started</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 定时任务调度器已启动</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 定时任务调度器启动完成</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 开始执行初始缓存加载...</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 开始执行初始缓存加载</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 📦 分批写入模式：将在第一批数据写入后立即变为可用状态</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 🚀 开始执行初始缓存加载 - 来源: all</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 📊 初始缓存加载 - 准备并行爬取数据...</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 🖼️ 开始执行初始轮播图加载</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 初始缓存加载任务已提交到后台线程，服务可以立即响应请求</span><br><span class="line">2025-10-14 06:55:22 - services.news_service - INFO - 🌐 开始爬取OpenHarmony官网新闻...</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 开始轮播图数据更新，状态设为准备中</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 初始轮播图加载任务已提交到后台线程</span><br><span class="line">2025-10-14 06:55:22 - services.openharmony_news_crawler - INFO - 🌐 开始爬取OpenHarmony官网新闻...</span><br><span class="line">2025-10-14 06:55:22 - services.openharmony_news_crawler - INFO - 📦 启用分批处理模式，每 20 篇文章执行一次回调</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 初始缓存加载完成</span><br><span class="line">🚀 开始高效获取OpenHarmony文章信息，每页300条数据...</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 轮播图服务状态更新: preparing</span><br><span class="line">📡 请求API: 第1页</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 应用启动完成</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🚀 初始化增强版手机Banner爬虫</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - - Selenium可用: True</span><br><span class="line">INFO: Application startup complete.</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - - requests-html可用: False</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🚀 开始增强版手机Banner爬取...</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法1: Selenium WebDriver</span><br><span class="line">INFO: Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🎯 使用Selenium获取动态轮播图...</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chromedriver: /usr/bin/chromedriver</span><br><span class="line">📊 第1页获取到300条数据</span><br><span class="line">📈 第1页新增300条有效数据，累计300条</span><br><span class="line">📡 请求API: 第2页</span><br><span class="line">📊 第2页获取到107条数据</span><br><span class="line">📈 第2页新增107条有效数据，累计407条</span><br><span class="line">🎯 第2页数据量(107)小于页面大小(300)，爬取完成</span><br><span class="line">📋 共���取到407条有效文章信息</span><br><span class="line">🔍 进行快速有效性校验...</span><br><span class="line">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - WARNING - ⚠️ 首次启动Chrome失败: Message: session not created: probably user data directory is already <span class="keyword">in</span> use, please specify a unique value <span class="keyword">for</span> --user-data-dir argument, or don<span class="string">&#x27;t use --user-data-dir</span></span><br><span class="line"><span class="string">Stacktrace:</span></span><br><span class="line"><span class="string">#0 0x560a5870c6a2 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#1 0x560a5817c8ab &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#2 0x560a581b83aa &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#3 0x560a581b230f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#4 0x560a582012a7 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#5 0x560a58200a07 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#6 0x560a581f1e97 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#7 0x560a581bfbb1 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#8 0x560a581c0995 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#9 0x560a586d661e &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#10 0x560a586d9a7f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#11 0x560a586d951c &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#12 0x560a586d9f29 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#13 0x560a586bfffb &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#14 0x560a586da2b4 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#15 0x560a586a988d &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#16 0x560a586f9339 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#17 0x560a586f952f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#18 0x560a5870b059 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#19 0x7fc084eebb7b &lt;unknown&gt;</span></span><br><span class="line"><span class="string">2025-10-14T06:55:23.266969990Z</span></span><br><span class="line"><span class="string">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span></span><br><span class="line"><span class="string">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 📁 使用临时用户目录: /tmp/chrome_user_data_1_dcac6900</span></span><br><span class="line"><span class="string">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - ERROR - ❌ Selenium WebDriver错误: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don&#x27;</span>t use --user-data-dir</span><br><span class="line">Stacktrace:</span><br><span class="line"><span class="comment">#0 0x5630b3df96a2 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#1 0x5630b38698ab &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#2 0x5630b38a53aa &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#3 0x5630b389f30f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#4 0x5630b38ee2a7 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#5 0x5630b38eda07 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#6 0x5630b38dee97 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#7 0x5630b38acbb1 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#8 0x5630b38ad995 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#9 0x5630b3dc361e &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#10 0x5630b3dc6a7f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#11 0x5630b3dc651c &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#12 0x5630b3dc6f29 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#13 0x5630b3dacffb &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#14 0x5630b3dc72b4 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#15 0x5630b3d9688d &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#16 0x5630b3de6339 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#17 0x5630b3de652f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#18 0x5630b3df8059 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#19 0x7f43d226fb7b &lt;unknown&gt;</span></span><br><span class="line">2025-10-14T06:55:23.947789883Z</span><br><span class="line">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 🧹 已清理临时用户目录: /tmp/chrome_user_data_1_dcac6900</span><br><span class="line">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法3: 传统HTML解析（兜底）</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 📱 已设置手机端请求头，User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O...</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 🚀 开始爬取OpenHarmony手机版banner图片</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 📱 正在请求手机版页面: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 📱 已设置手机端请求头，User-Agent: Mozilla/5.0 (Linux; Android 13; SM-G991B) AppleWeb...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 📱 页面加载成功，内容长度: 534649 字符</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - ✅ 成功获取手机版页面内容</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 开始解析HTML内容，查找banner相关图片...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 找到 0 个包含 banner-img 类名的元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*banner.*&#x27;</span> 找到 1 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*swiper.*slide.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*carousel.*&#x27;</span> 找到 5 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*slider.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*hero.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*main.*banner.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*top.*banner.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 页面总共有 16 张图片，筛选可能的banner图片...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🎯 共提取到 0 张唯一的banner相关图片</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - WARNING - 🔍 未找到banner图片，分析页面结构...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 📊 页面调试信息：</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 总图片数量: 16</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片1: src=https://images.openharmony.cn/compatibility/标识下载/p..., class=[<span class="string">&#x27;logo-pic&#x27;</span>], alt=无</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片2: src=/_nuxt/img/search.2585098.png..., class=[<span class="string">&#x27;search-img&#x27;</span>], alt=</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片3: src=/_nuxt/img/close.9ee23e2.svg..., class=[<span class="string">&#x27;close-img&#x27;</span>], alt=</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片4: src=/_nuxt/img/search.2585098.png..., class=[<span class="string">&#x27;search-img-instance&#x27;</span>], alt=</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片5: src=data:image/png;<span class="built_in">base64</span>,iVBORw0KGgoAAAANSUhEUgAAADAA..., class=[<span class="string">&#x27;menu-img-instance&#x27;</span>], alt=无</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 可能的banner容器数量: 3</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 容器1: class=[<span class="string">&#x27;banner&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 容器2: class=[<span class="string">&#x27;el-carousel&#x27;</span>, <span class="string">&#x27;el-carousel--horizontal&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 容器3: class=[<span class="string">&#x27;el-carousel__container&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - WARNING - ⚠️ 未找到任何banner图片</span><br><span class="line">2025-10-14 06:55:25 - services.enhanced_mobile_banner_crawler - INFO - 🎉 总共获取到 0 张唯一的banner图片</span><br><span class="line">2025-10-14 06:55:25 - core.scheduler - INFO - ✅ 使用增强版爬虫成功，获取 0 张图片</span><br><span class="line">2025-10-14 06:55:25 - core.cache - INFO - 开始轮播图数据更新，状态设为准备中</span><br><span class="line">2025-10-14 06:55:25 - core.cache - INFO - 轮播图服务状态更新: preparing</span><br><span class="line">2025-10-14 06:55:25 - core.cache - INFO - 🎉 轮播图首次加载完成</span><br><span class="line">2025-10-14 06:55:25 - core.cache - WARNING - ⚠️ 轮播图缓存更新完成，但未获取到数据，状态保持：PREPARING</span><br><span class="line">2025-10-14 06:55:25 - core.scheduler - WARNING - ⚠️ 初始轮播图加载完成，但未找到任何轮播图，状态保持PREPARING</span><br><span class="line">2025-10-14 06:55:26 - main - INFO - GET /health - Status: 200 - Process Time: 0.001s</span><br><span class="line">INFO: 127.0.0.1:58790 - <span class="string">&quot;GET /health HTTP/1.1&quot;</span> 200 OK</span><br><span class="line">✅ 快速校验完成：10/10 有效，有效率100.0%</span><br><span class="line">🚀 有效率高，跳过完整校验，直接返回所有数据</span><br><span class="line">2025-10-14 06:55:26 - services.openharmony_news_crawler - INFO - 📋 获取到 407 篇文章信息</span><br><span class="line">2025-10-14 06:55:26 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 1/407 篇文章: 对话OpenHarmony开源先锋：如何用代码革新终端生态</span><br><span class="line">2025-10-14 06:55:27 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 27 个内容块</span><br><span class="line">2025-10-14 06:55:28 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 2/407 篇文章: 12强终极PK！第二届OpenHarmony创新应用挑战赛引爆开源热潮</span><br><span class="line">2025-10-14 06:55:28 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 11 个内容块</span><br><span class="line">2025-10-14 06:55:29 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 3/407 篇文章: 第二届OpenHarmony创新应用挑战赛决赛路演队伍揭晓</span><br><span class="line">2025-10-14 06:55:30 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 06:55:31 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 4/407 篇文章: OpenHarmony社区2024年度运营报告发布，致谢每一位生态共建者！</span><br><span class="line">2025-10-14 06:55:31 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 34 个内容块</span><br><span class="line">2025-10-14 06:55:32 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 5/407 篇文章: 开源鸿蒙社区恭祝全体开发者2025新年快乐，新春大吉！</span><br><span class="line">2025-10-14 06:55:21 - root - INFO - 日志系统初始化完成</span><br><span class="line">============================================================</span><br><span class="line">🚀 NowInOpenHarmony API 服务启动成功!</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14T06:55:21.825177385Z</span><br><span class="line">📡 服务可通过以下地址访问:</span><br><span class="line">----------------------------------------</span><br><span class="line">主要IP: http://172.17.0.2:8001</span><br><span class="line">API文档: http://172.17.0.2:8001/docs</span><br><span class="line">健康检查: http://172.17.0.2:8001/health</span><br><span class="line">全部新闻: http://172.17.0.2:8001/api/news/?all=<span class="literal">true</span></span><br><span class="line">Banner图片: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">----------------------------------------</span><br><span class="line">2025-10-14T06:55:21.825217345Z</span><br><span class="line">🎯 主要API端点:</span><br><span class="line">📰 全部新闻: http://172.17.0.2:8001/api/news/?all=<span class="literal">true</span></span><br><span class="line">🌐 官网新闻: http://172.17.0.2:8001/api/news/openharmony</span><br><span class="line">📚 技术博客: http://172.17.0.2:8001/api/news/blog</span><br><span class="line">📱 Banner图片: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">⚡ 服务状态: http://172.17.0.2:8001/api/health</span><br><span class="line">2025-10-14T06:55:21.825336075Z</span><br><span class="line">📋 完整API路径列表:</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">🔧 基础服务:</span><br><span class="line">根路径: http://172.17.0.2:8001/</span><br><span class="line">API文档: http://172.17.0.2:8001/docs</span><br><span class="line">ReDoc文档: http://172.17.0.2:8001/redoc</span><br><span class="line">健康检查: http://172.17.0.2:8001/health</span><br><span class="line">API健康检查: http://172.17.0.2:8001/api/health</span><br><span class="line">2025-10-14T06:55:21.825385335Z</span><br><span class="line">📰 新闻API:</span><br><span class="line">全部新闻: http://172.17.0.2:8001/api/news/</span><br><span class="line">分页新闻: http://172.17.0.2:8001/api/news/?page=1&amp;page_size=20</span><br><span class="line">搜索新闻: http://172.17.0.2:8001/api/news/?search=关键词</span><br><span class="line">分类新闻: http://172.17.0.2:8001/api/news/?category=官方动态</span><br><span class="line">OpenHarmony官网: http://172.17.0.2:8001/api/news/openharmony</span><br><span class="line">OpenHarmony技术博客: http://172.17.0.2:8001/api/news/blog</span><br><span class="line">手动爬取: http://172.17.0.2:8001/api/news/crawl (POST)</span><br><span class="line">新闻服务状态: http://172.17.0.2:8001/api/news/status/info</span><br><span class="line">2025-10-14T06:55:21.825444405Z</span><br><span class="line">🖼️ Banner轮播图API:</span><br><span class="line">手机版Banner: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">增强版Banner: http://172.17.0.2:8001/api/banner/mobile/enhanced</span><br><span class="line">Banner状态: http://172.17.0.2:8001/api/banner/status</span><br><span class="line">手动爬取Banner: http://172.17.0.2:8001/api/banner/crawl (POST)</span><br><span class="line">Banner缓存信息: http://172.17.0.2:8001/api/banner/cache</span><br><span class="line">清空Banner缓存: http://172.17.0.2:8001/api/banner/cache/clear (DELETE)</span><br><span class="line">2025-10-14T06:55:21.825471565Z</span><br><span class="line">📊 API参数示例:</span><br><span class="line">强制爬取全部新闻: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=all&amp;<span class="built_in">limit</span>=50</span><br><span class="line">爬取官网新闻: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=openharmony</span><br><span class="line">爬取技术博客: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=openharmony_blog</span><br><span class="line">强制爬取Banner: http://172.17.0.2:8001/api/banner/mobile?force_crawl=<span class="literal">true</span></span><br><span class="line">下载Banner图片: http://172.17.0.2:8001/api/banner/mobile/enhanced?download_images=<span class="literal">true</span></span><br><span class="line">增强版爬取: http://172.17.0.2:8001/api/banner/crawl?use_enhanced=<span class="literal">true</span></span><br><span class="line">2025-10-14T06:55:21.825499015Z</span><br><span class="line">💡 提示:</span><br><span class="line">- 局域网IP可供同一网络下的其他设备访问</span><br><span class="line">- GET请求可直接在浏览器中访问</span><br><span class="line">- POST/DELETE请求需要使用API工具(如Postman)或curl命令</span><br><span class="line">- 使用 Ctrl+C 停止服务</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14T06:55:21.825523525Z</span><br><span class="line">⚙️ 启动配置:</span><br><span class="line">绑定地址: 0.0.0.0</span><br><span class="line">端口: 8001</span><br><span class="line">调试模式: False</span><br><span class="line">日志级别: INFO</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14 06:55:22 - root - INFO - 日志系统初始化完成</span><br><span class="line">INFO: Started server process [1]</span><br><span class="line">INFO: Waiting <span class="keyword">for</span> application startup.</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 应用启动中...</span><br><span class="line">2025-10-14 06:55:22 - core.database - INFO - 数据库初始化完成</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 数据库初始化完成</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 新闻缓存初始化完成</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 轮播图缓存初始化完成</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 缓存初始化完成</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 定时任务设置完成</span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;更新所有新闻源缓存&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;更新轮播图缓存&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;完整爬取任务&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 06:55:22 - apscheduler.scheduler - INFO - Scheduler started</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 定时任务调度器已启动</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 定时任务调度器启动完成</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 开始执行初始缓存加载...</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 开始执行初始缓存加载</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 📦 分批写入模式：将在第一批数据写入后立即变为可用状态</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 🚀 开始执行初始缓存加载 - 来源: all</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 📊 初始缓存加载 - 准备并行爬取数据...</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 🖼️ 开始执行初始轮播图加载</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 初始缓存加载任务已提交到后台线程，服务可以立即响应请求</span><br><span class="line">2025-10-14 06:55:22 - services.news_service - INFO - 🌐 开始爬取OpenHarmony官网新闻...</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 开始轮播图数据更新，状态设为准备中</span><br><span class="line">2025-10-14 06:55:22 - core.scheduler - INFO - 初始轮播图加载任务已提交到后台线程</span><br><span class="line">2025-10-14 06:55:22 - services.openharmony_news_crawler - INFO - 🌐 开始爬取OpenHarmony官网新闻...</span><br><span class="line">2025-10-14 06:55:22 - services.openharmony_news_crawler - INFO - 📦 启用分批处理模式，每 20 篇文章执行一次回调</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 初始缓存加载完成</span><br><span class="line">🚀 开始高效获取OpenHarmony文章信息，每页300条数据...</span><br><span class="line">2025-10-14 06:55:22 - core.cache - INFO - 轮播图服务状态更新: preparing</span><br><span class="line">📡 请求API: 第1页</span><br><span class="line">2025-10-14 06:55:22 - main - INFO - 应用启动完成</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🚀 初始化增强版手机Banner爬虫</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - - Selenium可用: True</span><br><span class="line">INFO: Application startup complete.</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - - requests-html可用: False</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🚀 开始增强版手机Banner爬取...</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法1: Selenium WebDriver</span><br><span class="line">INFO: Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🎯 使用Selenium获取动态轮播图...</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span><br><span class="line">2025-10-14 06:55:22 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chromedriver: /usr/bin/chromedriver</span><br><span class="line">📊 第1页获取到300条数据</span><br><span class="line">📈 第1页新增300条有效数据，累计300条</span><br><span class="line">📡 请求API: 第2页</span><br><span class="line">📊 第2页获取到107条数据</span><br><span class="line">📈 第2页新增107条有效数据，累计407条</span><br><span class="line">🎯 第2页数据量(107)小于页面大小(300)，爬取完成</span><br><span class="line">📋 共���取到407条有效文章信息</span><br><span class="line">🔍 进行快速有效性校验...</span><br><span class="line">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - WARNING - ⚠️ 首次启动Chrome失败: Message: session not created: probably user data directory is already <span class="keyword">in</span> use, please specify a unique value <span class="keyword">for</span> --user-data-dir argument, or don<span class="string">&#x27;t use --user-data-dir</span></span><br><span class="line"><span class="string">Stacktrace:</span></span><br><span class="line"><span class="string">#0 0x560a5870c6a2 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#1 0x560a5817c8ab &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#2 0x560a581b83aa &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#3 0x560a581b230f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#4 0x560a582012a7 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#5 0x560a58200a07 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#6 0x560a581f1e97 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#7 0x560a581bfbb1 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#8 0x560a581c0995 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#9 0x560a586d661e &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#10 0x560a586d9a7f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#11 0x560a586d951c &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#12 0x560a586d9f29 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#13 0x560a586bfffb &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#14 0x560a586da2b4 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#15 0x560a586a988d &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#16 0x560a586f9339 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#17 0x560a586f952f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#18 0x560a5870b059 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#19 0x7fc084eebb7b &lt;unknown&gt;</span></span><br><span class="line"><span class="string">2025-10-14T06:55:23.266969990Z</span></span><br><span class="line"><span class="string">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span></span><br><span class="line"><span class="string">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 📁 使用临时用户目录: /tmp/chrome_user_data_1_dcac6900</span></span><br><span class="line"><span class="string">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - ERROR - ❌ Selenium WebDriver错误: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don&#x27;</span>t use --user-data-dir</span><br><span class="line">Stacktrace:</span><br><span class="line"><span class="comment">#0 0x5630b3df96a2 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#1 0x5630b38698ab &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#2 0x5630b38a53aa &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#3 0x5630b389f30f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#4 0x5630b38ee2a7 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#5 0x5630b38eda07 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#6 0x5630b38dee97 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#7 0x5630b38acbb1 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#8 0x5630b38ad995 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#9 0x5630b3dc361e &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#10 0x5630b3dc6a7f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#11 0x5630b3dc651c &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#12 0x5630b3dc6f29 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#13 0x5630b3dacffb &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#14 0x5630b3dc72b4 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#15 0x5630b3d9688d &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#16 0x5630b3de6339 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#17 0x5630b3de652f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#18 0x5630b3df8059 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#19 0x7f43d226fb7b &lt;unknown&gt;</span></span><br><span class="line">2025-10-14T06:55:23.947789883Z</span><br><span class="line">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 🧹 已清理临时用户目录: /tmp/chrome_user_data_1_dcac6900</span><br><span class="line">2025-10-14 06:55:23 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法3: 传统HTML解析（兜底）</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 📱 已设置手机端请求头，User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O...</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 🚀 开始爬取OpenHarmony手机版banner图片</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 📱 正在请求手机版页面: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 06:55:23 - services.mobile_banner_crawler - INFO - 📱 已设置手机端请求头，User-Agent: Mozilla/5.0 (Linux; Android 13; SM-G991B) AppleWeb...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 📱 页面加载成功，内容长度: 534649 字符</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - ✅ 成功获取手机版页面内容</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 开始解析HTML内容，查找banner相关图片...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 找到 0 个包含 banner-img 类名的元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*banner.*&#x27;</span> 找到 1 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*swiper.*slide.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*carousel.*&#x27;</span> 找到 5 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*slider.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*hero.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*main.*banner.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*top.*banner.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🔍 页面总共有 16 张图片，筛选可能的banner图片...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 🎯 共提取到 0 张唯一的banner相关图片</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - WARNING - 🔍 未找到banner图片，分析页面结构...</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - 📊 页面调试信息：</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 总图片数量: 16</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片1: src=https://images.openharmony.cn/compatibility/标识下载/p..., class=[<span class="string">&#x27;logo-pic&#x27;</span>], alt=无</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片2: src=/_nuxt/img/search.2585098.png..., class=[<span class="string">&#x27;search-img&#x27;</span>], alt=</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片3: src=/_nuxt/img/close.9ee23e2.svg..., class=[<span class="string">&#x27;close-img&#x27;</span>], alt=</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片4: src=/_nuxt/img/search.2585098.png..., class=[<span class="string">&#x27;search-img-instance&#x27;</span>], alt=</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 图片5: src=data:image/png;<span class="built_in">base64</span>,iVBORw0KGgoAAAANSUhEUgAAADAA..., class=[<span class="string">&#x27;menu-img-instance&#x27;</span>], alt=无</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 可能的banner容器数量: 3</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 容器1: class=[<span class="string">&#x27;banner&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 容器2: class=[<span class="string">&#x27;el-carousel&#x27;</span>, <span class="string">&#x27;el-carousel--horizontal&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - INFO - - 容器3: class=[<span class="string">&#x27;el-carousel__container&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 06:55:25 - services.mobile_banner_crawler - WARNING - ⚠️ 未找到任何banner图片</span><br><span class="line">2025-10-14 06:55:25 - services.enhanced_mobile_banner_crawler - INFO - 🎉 总共获取到 0 张唯一的banner图片</span><br><span class="line">2025-10-14 06:55:25 - core.scheduler - INFO - ✅ 使用增强版爬虫成功，获取 0 张图片</span><br><span class="line">2025-10-14 06:55:25 - core.cache - INFO - 开始轮播图数据更新，状态设为准备中</span><br><span class="line">2025-10-14 06:55:25 - core.cache - INFO - 轮播图服务状态更新: preparing</span><br><span class="line">2025-10-14 06:55:25 - core.cache - INFO - 🎉 轮播图首次加载完成</span><br><span class="line">2025-10-14 06:55:25 - core.cache - WARNING - ⚠️ 轮播图缓存更新完成，但未获取到数据，状态保持：PREPARING</span><br><span class="line">2025-10-14 06:55:25 - core.scheduler - WARNING - ⚠️ 初始轮播图加载完成，但未找到任何轮播图，状态保持PREPARING</span><br><span class="line">2025-10-14 06:55:26 - main - INFO - GET /health - Status: 200 - Process Time: 0.001s</span><br><span class="line">INFO: 127.0.0.1:58790 - <span class="string">&quot;GET /health HTTP/1.1&quot;</span> 200 OK</span><br><span class="line">✅ 快速校验完成：10/10 有效，有效率100.0%</span><br><span class="line">🚀 有效率高，跳过完整校验，直接返回所有数据</span><br><span class="line">2025-10-14 06:55:26 - services.openharmony_news_crawler - INFO - 📋 获取到 407 篇文章信息</span><br><span class="line">2025-10-14 06:55:26 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 1/407 篇文章: 对话OpenHarmony开源先锋：如何用代码革新终端生态</span><br><span class="line">2025-10-14 06:55:27 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 27 个内容块</span><br><span class="line">2025-10-14 06:55:28 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 2/407 篇文章: 12强终极PK！第二届OpenHarmony创新应用挑战赛引爆开源热潮</span><br><span class="line">2025-10-14 06:55:28 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 11 个内容块</span><br><span class="line">2025-10-14 06:55:29 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 3/407 篇文章: 第二届OpenHarmony创新应用挑战赛决赛路演队伍揭晓</span><br><span class="line">2025-10-14 06:55:30 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 06:55:31 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 4/407 篇文章: OpenHarmony社区2024年度运营报告发布，致谢每一位生态共建者！</span><br><span class="line">2025-10-14 06:55:31 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 34 个内容块</span><br><span class="line">2025-10-14 06:55:32 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 5/407 篇文章: 开源鸿蒙社区恭祝全体开发者2025新年快乐，新春大吉！</span><br></pre></td></tr></table></figure>
<p>还是失败了，我本打算直接开始去进行重构，但是考虑到Selenium与ChromeDriver是当下比较主流的工具所以我还是考虑再去上网搜索一下解决方案。</p>
<p>我找到了很多，Selenium的官方文档中也有介绍，所以我决定先去尝试一下这些方式。</p>
<p><a target="_blank" rel="noopener" href="https://selenium.net.cn/documentation/webdriver/drivers/remote_webdriver/">Selenium的官方文档</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_35732273/article/details/149556717">CSDN</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/2556817">腾讯云文章</a></p>
<p>从这些文章中我了解到Selenium与ChromeDriver是当下浏览器自动化爬虫还有测试等应用场景的主流王者。（应该能解决吧~）</p>
<p>这一次GPT5又提出了一个新的方案，这个新的方案是通过添加一个兜底机制，利用 Nuxt 状态解析兜底：解析页面里的 <code>window.__NUXT__</code> 预渲染 JSON，直接提取 banner 图地址（对这种站点通常有效），避免 JS 执行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">看日志点：现在容器还是在用本地 Chromium/Chromedriver（日志里出现 “使用Chromedriver: /usr/bin/chromedriver”），并未启用远程 WebDriver；而传统解析对 Nuxt 动态页拿不到图。所以这次要落地远程 WebDriver 方案，让增强版走独立浏览器容器。</span><br><span class="line"></span><br><span class="line">方案一（推荐，最稳）：启用远程 WebDriver</span><br><span class="line"></span><br><span class="line">启动独立浏览器容器</span><br><span class="line">docker network create ohnet || <span class="literal">true</span></span><br><span class="line">docker run -d --name selenium --network ohnet -p 4444:4444 --shm-size=2g --restart unless-stopped selenium/standalone-chromium:latest</span><br><span class="line">以远程地址启动 API 容器（和 selenium 同网段）</span><br><span class="line">停现有容器: docker stop NIOHSERVER &amp;&amp; docker <span class="built_in">rm</span> NIOHSERVER</span><br><span class="line">启动新容器（关键 <span class="built_in">env</span>）:</span><br><span class="line">docker run -d --name NIOHSERVER --network ohnet -p 8001:8001 --shm-size=1g</span><br><span class="line">-e BANNER_USE_ENHANCED=<span class="literal">true</span></span><br><span class="line">-e SELENIUM_REMOTE_URL=http://selenium:4444/wd/hub</span><br><span class="line">-e SELENIUM_USE_USER_DATA_DIR=<span class="literal">false</span></span><br><span class="line">openharmony-server:latest</span><br><span class="line">验证日志关键行</span><br><span class="line">需要看到 “🌐 使用远程WebDriver: http://selenium:4444/wd/hub”</span><br><span class="line">不应再出现 “使用Chromedriver: /usr/bin/chromedriver”</span><br><span class="line">验证接口</span><br><span class="line">curl <span class="string">&quot;http://&lt;服务器IP&gt;:8001/api/banner/crawl?use_enhanced=true&quot;</span> -X POST</span><br><span class="line">curl <span class="string">&quot;http://&lt;服务器IP&gt;:8001/api/banner/mobile&quot;</span></span><br><span class="line">观察日志：应看到 Selenium 页面解析后有 img 数量&gt;0，并且轮播图缓存状态从 preparing 变为 ready</span><br><span class="line">提示（你目前用宝塔面板部署）：</span><br><span class="line"></span><br><span class="line">面板里“容器”新建一个 selenium/standalone-chromium 容器，映射 4444 端口，SHM 设置成 2g；然后在 API 容器里添加环境变量 SELENIUM_REMOTE_URL=http://selenium:4444/wd/hub，并把两个容器加入同一个 docker 网络（或把 SELENIUM_REMOTE_URL 指向宿主机 IP:4444）。</span><br><span class="line">方案二（过渡）</span><br><span class="line"></span><br><span class="line">直接禁用增强版，先让服务启动不报错（但很可能仍无图）</span><br><span class="line">docker run ... -e BANNER_USE_ENHANCED=<span class="literal">false</span> openharmony-server:latest</span><br><span class="line">这不会解决取图问题（因为 Nuxt 动态页），只是规避 Selenium 问题。</span><br><span class="line">下一步（若远程 WebDriver 仍不行）我来做小重构：无 Selenium 提取</span><br><span class="line"></span><br><span class="line">增加 Nuxt 状态解析兜底：解析页面里的 window.__NUXT__ 预渲染 JSON，直接提取 banner 图地址（对这种站点通常有效），避免 JS 执行。</span><br><span class="line">如你同意，我会在 MobileBannerCrawler 增加这一兜底解析，并在 Enhanced 里做第零优先级尝试，保证即使 Selenium 不可用，也能稳定拿到图片。</span><br><span class="line">要不要我现在就加上 Nuxt 状态解析的兜底实现？你这边先按上面的远程 WebDriver 方案部署一次，我同时可以把兜底代码补上，双保险。</span><br><span class="line"></span><br><span class="line">添加兜底解析，我尝试完兜底解析后如果成功了的话再进行进一步的重构</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">已为轮播图爬虫加上 Nuxt/SSR 兜底解析，并提交到当前分支。具体如下：</span><br><span class="line"></span><br><span class="line">实现内容</span><br><span class="line"></span><br><span class="line">在 MobileBannerCrawler 增加从内联脚本提取的兜底解析</span><br><span class="line">新增方法：从 window.__NUXT__/nuxtState 所在 &lt;script&gt; 中用正则提取图片 URL，按关键词过滤 banner/carousel/swiper/slide/hero/main/top/header</span><br><span class="line">解析相对路径为绝对 URL，去重并返回</span><br><span class="line">文件：services/mobile_banner_crawler.py: 新增 _extract_banner_images_from_nuxt</span><br><span class="line">调整解析顺序</span><br><span class="line">crawl_mobile_banners 中优先调用 Nuxt 兜底解析，若无结果，再走原传统 HTML 解析</span><br><span class="line">这样 Enhanced 爬虫回退到 MobileBannerCrawler 时，也会优先使用 Nuxt 兜底</span><br><span class="line">提交记录</span><br><span class="line">feat(banner/nuxt-fallback): add Nuxt/SSR inline script parser to extract banner images; use as first fallback before traditional HTML parsing</span><br><span class="line">如何验证</span><br><span class="line"></span><br><span class="line">手动触发并观察日志</span><br><span class="line">curl -X POST <span class="string">&quot;http://&lt;host&gt;:8001/api/banner/crawl?use_enhanced=true&quot;</span></span><br><span class="line">curl <span class="string">&quot;http://&lt;host&gt;:8001/api/banner/mobile&quot;</span></span><br><span class="line">期望日志出现类似：</span><br><span class="line">“🎯 [Nuxt兜底] 从内联脚本提取到 N 张可能的banner图片”</span><br><span class="line">Banner 缓存状态从 preparing 变为 ready</span><br><span class="line">如你已启用远程 WebDriver，则 Enhanced 成功也会返回；若仍失败，Nuxt 兜底应能返回图片。</span><br><span class="line">需要我再把关键词或正则调得更宽松/更严格（例如只保留包含 banner/carousel 的 URL），或立刻继续做“进一步重构”版本（从 Nuxt JSON 深层键结构精准取图）吗？</span><br></pre></td></tr></table></figure>
<p>如果这一次成功了的话我就会考虑去除前面的方式，但仔细阅读它给出的解决方案之后我认为核心还是在于远程WebDriver，但还是先试一试吧，不试一试怎么知道呢。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br></pre></td><td class="code"><pre><span class="line">113.47.8.204</span><br><span class="line">0</span><br><span class="line">首页</span><br><span class="line">网站</span><br><span class="line">数据库</span><br><span class="line">Docker</span><br><span class="line">监控</span><br><span class="line">安全</span><br><span class="line">WAF</span><br><span class="line">文件</span><br><span class="line">日志</span><br><span class="line">WP Tools</span><br><span class="line">多用户</span><br><span class="line">终端</span><br><span class="line">节点管理</span><br><span class="line">计划任务</span><br><span class="line">软件商店</span><br><span class="line">设置</span><br><span class="line">退出</span><br><span class="line">应用商店</span><br><span class="line">总览</span><br><span class="line">网站</span><br><span class="line">容器</span><br><span class="line">线上镜像</span><br><span class="line">本地镜像</span><br><span class="line">容器编排</span><br><span class="line">网络</span><br><span class="line">存储卷</span><br><span class="line">仓库</span><br><span class="line">设置</span><br><span class="line">企业版</span><br><span class="line">需求反馈</span><br><span class="line">&gt;&gt;使用帮助</span><br><span class="line">请输入容器名、ID、容器镜像</span><br><span class="line">容器名</span><br><span class="line">容器ID</span><br><span class="line">状态</span><br><span class="line">镜像</span><br><span class="line">端口(主机--&gt;容器)</span><br><span class="line">操作</span><br><span class="line">NIOHServer</span><br><span class="line">cc06e8accfbb</span><br><span class="line">运行中</span><br><span class="line">openharmony-server:latest	</span><br><span class="line">0.0.0.0:32776--&gt;8001/tcp</span><br><span class="line">管理终端删除</span><br><span class="line">更多</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">共 1 条</span><br><span class="line">前往</span><br><span class="line">1</span><br><span class="line">页</span><br><span class="line">宝塔Linux面板©2014-2025 广东堡塔安全技术有限公司 (bt.cn)</span><br><span class="line">论坛求助</span><br><span class="line">使用手册</span><br><span class="line">微信公众号</span><br><span class="line">正版查询</span><br><span class="line">联系人工客服</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2025-10-14 11:30:53 - root - INFO - 日志系统初始化完成</span><br><span class="line">============================================================</span><br><span class="line">🚀 NowInOpenHarmony API 服务启动成功!</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14T11:30:53.320056323Z</span><br><span class="line">📡 服务可通过以下地址访问:</span><br><span class="line">----------------------------------------</span><br><span class="line">主要IP: http://172.17.0.2:8001</span><br><span class="line">API文档: http://172.17.0.2:8001/docs</span><br><span class="line">健康检查: http://172.17.0.2:8001/health</span><br><span class="line">全部新闻: http://172.17.0.2:8001/api/news/?all=<span class="literal">true</span></span><br><span class="line">Banner图片: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">----------------------------------------</span><br><span class="line">2025-10-14T11:30:53.320109783Z</span><br><span class="line">🎯 主要API端点:</span><br><span class="line">📰 全部新闻: http://172.17.0.2:8001/api/news/?all=<span class="literal">true</span></span><br><span class="line">🌐 官网新闻: http://172.17.0.2:8001/api/news/openharmony</span><br><span class="line">📚 技术博客: http://172.17.0.2:8001/api/news/blog</span><br><span class="line">📱 Banner图片: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">⚡ 服务状态: http://172.17.0.2:8001/api/health</span><br><span class="line">2025-10-14T11:30:53.320161334Z</span><br><span class="line">📋 完整API路径列表:</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">🔧 基础服务:</span><br><span class="line">根路径: http://172.17.0.2:8001/</span><br><span class="line">API文档: http://172.17.0.2:8001/docs</span><br><span class="line">ReDoc文档: http://172.17.0.2:8001/redoc</span><br><span class="line">健康检查: http://172.17.0.2:8001/health</span><br><span class="line">API健康检查: http://172.17.0.2:8001/api/health</span><br><span class="line">2025-10-14T11:30:53.320342843Z</span><br><span class="line">📰 新闻API:</span><br><span class="line">全部新闻: http://172.17.0.2:8001/api/news/</span><br><span class="line">分页新闻: http://172.17.0.2:8001/api/news/?page=1&amp;page_size=20</span><br><span class="line">搜索新闻: http://172.17.0.2:8001/api/news/?search=关键词</span><br><span class="line">分类新闻: http://172.17.0.2:8001/api/news/?category=官方动态</span><br><span class="line">OpenHarmony官网: http://172.17.0.2:8001/api/news/openharmony</span><br><span class="line">OpenHarmony技术博客: http://172.17.0.2:8001/api/news/blog</span><br><span class="line">手动爬取: http://172.17.0.2:8001/api/news/crawl (POST)</span><br><span class="line">新闻服务状态: http://172.17.0.2:8001/api/news/status/info</span><br><span class="line">2025-10-14T11:30:53.320620303Z</span><br><span class="line">🖼️ Banner轮播图API:</span><br><span class="line">手机版Banner: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">增强版Banner: http://172.17.0.2:8001/api/banner/mobile/enhanced</span><br><span class="line">Banner状态: http://172.17.0.2:8001/api/banner/status</span><br><span class="line">手动爬取Banner: http://172.17.0.2:8001/api/banner/crawl (POST)</span><br><span class="line">Banner缓存信息: http://172.17.0.2:8001/api/banner/cache</span><br><span class="line">清空Banner缓存: http://172.17.0.2:8001/api/banner/cache/clear (DELETE)</span><br><span class="line">2025-10-14T11:30:53.320657383Z</span><br><span class="line">📊 API参数示例:</span><br><span class="line">强制爬取全部新闻: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=all&amp;<span class="built_in">limit</span>=50</span><br><span class="line">爬取官网新闻: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=openharmony</span><br><span class="line">爬取技术博客: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=openharmony_blog</span><br><span class="line">强制爬取Banner: http://172.17.0.2:8001/api/banner/mobile?force_crawl=<span class="literal">true</span></span><br><span class="line">下载Banner图片: http://172.17.0.2:8001/api/banner/mobile/enhanced?download_images=<span class="literal">true</span></span><br><span class="line">增强版爬取: http://172.17.0.2:8001/api/banner/crawl?use_enhanced=<span class="literal">true</span></span><br><span class="line">2025-10-14T11:30:53.320684943Z</span><br><span class="line">💡 提示:</span><br><span class="line">- 局域网IP可供同一网络下的其他设备访问</span><br><span class="line">- GET请求可直接在浏览器中访问</span><br><span class="line">- POST/DELETE请求需要使用API工具(如Postman)或curl命令</span><br><span class="line">- 使用 Ctrl+C 停止服务</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14T11:30:53.320708674Z</span><br><span class="line">⚙️ 启动配置:</span><br><span class="line">绑定地址: 0.0.0.0</span><br><span class="line">端口: 8001</span><br><span class="line">调试模式: False</span><br><span class="line">日志级别: INFO</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14 11:30:54 - root - INFO - 日志系统初始化完成</span><br><span class="line">INFO: Started server process [1]</span><br><span class="line">INFO: Waiting <span class="keyword">for</span> application startup.</span><br><span class="line">2025-10-14 11:30:54 - main - INFO - 应用启动中...</span><br><span class="line">2025-10-14 11:30:54 - core.database - INFO - 数据库初始化完成</span><br><span class="line">2025-10-14 11:30:54 - main - INFO - 数据库初始化完成</span><br><span class="line">2025-10-14 11:30:54 - core.cache - INFO - 新闻缓存初始化完成</span><br><span class="line">2025-10-14 11:30:54 - core.cache - INFO - 轮播图缓存初始化完成</span><br><span class="line">2025-10-14 11:30:54 - main - INFO - 缓存初始化完成</span><br><span class="line">2025-10-14 11:30:54 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 11:30:54 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 11:30:54 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 定时任务设置完成</span><br><span class="line">2025-10-14 11:30:54 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;更新所有新闻源缓存&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 11:30:54 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;更新轮播图缓存&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 11:30:54 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;完整爬取任务&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 11:30:54 - apscheduler.scheduler - INFO - Scheduler started</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 定时任务调度器已启动</span><br><span class="line">2025-10-14 11:30:54 - main - INFO - 定时任务调度器启动完成</span><br><span class="line">2025-10-14 11:30:54 - main - INFO - 开始执行初始缓存加载...</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 开始执行初始缓存加载</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 📦 分批写入模式：将在第一批数据写入后立即变为可用状态</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 🚀 开始执行初始缓存加载 - 来源: all</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 🖼️ 开始执行初始轮播图加载</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 📊 初始缓存加载 - 准备并行爬取数据...</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 初始缓存加载任务已提交到后台线程，服务可以立即响应请求</span><br><span class="line">2025-10-14 11:30:54 - core.cache - INFO - 开始轮播图数据更新，状态设为准备中</span><br><span class="line">2025-10-14 11:30:54 - services.news_service - INFO - 🌐 开始爬取OpenHarmony官网新闻...</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 初始轮播图加载任务已提交到后台线程</span><br><span class="line">2025-10-14 11:30:54 - core.cache - INFO - 轮播图服务状态更新: preparing</span><br><span class="line">2025-10-14 11:30:54 - services.openharmony_news_crawler - INFO - 🌐 开始爬取OpenHarmony官网新闻...</span><br><span class="line">2025-10-14 11:30:54 - services.openharmony_news_crawler - INFO - 📦 启用分批处理模式，每 20 篇文章执行一次回调</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - 🚀 初始化增强版手机Banner爬虫</span><br><span class="line">2025-10-14 11:30:54 - main - INFO - 初始缓存加载完成</span><br><span class="line">🚀 开始高效获取OpenHarmony文章信息，每页300条数据...</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - - Selenium可用: True</span><br><span class="line">📡 请求API: 第1页</span><br><span class="line">2025-10-14 11:30:54 - main - INFO - 应用启动完成</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - - requests-html可用: False</span><br><span class="line">INFO: Application startup complete.</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - 🚀 开始增强版手机Banner爬取...</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法1: Selenium WebDriver</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - 🎯 使用Selenium获取动态轮播图...</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chromedriver: /usr/bin/chromedriver</span><br><span class="line">INFO: Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)</span><br><span class="line">📊 第1页获取到300条数据</span><br><span class="line">📈 第1页新增300条有效数据，累计300条</span><br><span class="line">📡 请求API: 第2页</span><br><span class="line">📊 第2页获取到107条数据</span><br><span class="line">📈 第2页新增107条有效数据，累计407条</span><br><span class="line">🎯 第2页数据量(107)小于页面大小(300)，爬取完成</span><br><span class="line">📋 共���取到407条有效文章信息</span><br><span class="line">🔍 进行快速有效性校验...</span><br><span class="line">2025-10-14 11:30:56 - main - INFO - GET /health - Status: 200 - Process Time: 0.001s</span><br><span class="line">INFO: 127.0.0.1:59172 - <span class="string">&quot;GET /health HTTP/1.1&quot;</span> 200 OK</span><br><span class="line">2025-10-14 11:30:56 - services.enhanced_mobile_banner_crawler - WARNING - ⚠️ 首次启动Chrome失败: Message: session not created: probably user data directory is already <span class="keyword">in</span> use, please specify a unique value <span class="keyword">for</span> --user-data-dir argument, or don<span class="string">&#x27;t use --user-data-dir</span></span><br><span class="line"><span class="string">Stacktrace:</span></span><br><span class="line"><span class="string">#0 0x556676dc86a2 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#1 0x5566768388ab &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#2 0x5566768743aa &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#3 0x55667686e30f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#4 0x5566768bd2a7 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#5 0x5566768bca07 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#6 0x5566768ade97 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#7 0x55667687bbb1 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#8 0x55667687c995 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#9 0x556676d9261e &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#10 0x556676d95a7f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#11 0x556676d9551c &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#12 0x556676d95f29 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#13 0x556676d7bffb &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#14 0x556676d962b4 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#15 0x556676d6588d &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#16 0x556676db5339 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#17 0x556676db552f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#18 0x556676dc7059 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#19 0x7f3270a12b7b &lt;unknown&gt;</span></span><br><span class="line"><span class="string">2025-10-14T11:30:56.913639249Z</span></span><br><span class="line"><span class="string">2025-10-14 11:30:56 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span></span><br><span class="line"><span class="string">2025-10-14 11:30:56 - services.enhanced_mobile_banner_crawler - INFO - 📁 使用临时用户目录: /tmp/chrome_user_data_1_fa10d476</span></span><br><span class="line"><span class="string">2025-10-14 11:30:57 - services.enhanced_mobile_banner_crawler - ERROR - ❌ Selenium WebDriver错误: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don&#x27;</span>t use --user-data-dir</span><br><span class="line">Stacktrace:</span><br><span class="line"><span class="comment">#0 0x563460ed76a2 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#1 0x5634609478ab &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#2 0x5634609833aa &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#3 0x56346097d30f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#4 0x5634609cc2a7 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#5 0x5634609cba07 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#6 0x5634609bce97 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#7 0x56346098abb1 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#8 0x56346098b995 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#9 0x563460ea161e &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#10 0x563460ea4a7f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#11 0x563460ea451c &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#12 0x563460ea4f29 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#13 0x563460e8affb &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#14 0x563460ea52b4 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#15 0x563460e7488d &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#16 0x563460ec4339 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#17 0x563460ec452f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#18 0x563460ed6059 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#19 0x7fa0d51b7b7b &lt;unknown&gt;</span></span><br><span class="line">2025-10-14T11:30:57.655037457Z</span><br><span class="line">2025-10-14 11:30:57 - services.enhanced_mobile_banner_crawler - INFO - 🧹 已清理临时用户目录: /tmp/chrome_user_data_1_fa10d476</span><br><span class="line">2025-10-14 11:30:57 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法3: 传统HTML解析（兜底）</span><br><span class="line">2025-10-14 11:30:57 - services.mobile_banner_crawler - INFO - 📱 已设置手机端请求头，User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac O...</span><br><span class="line">2025-10-14 11:30:57 - services.mobile_banner_crawler - INFO - 🚀 开始爬取OpenHarmony手机版banner图片</span><br><span class="line">2025-10-14 11:30:57 - services.mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 11:30:57 - services.mobile_banner_crawler - INFO - 📱 正在请求手机版页面: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 11:30:57 - services.mobile_banner_crawler - INFO - 📱 已设置手机端请求头，User-Agent: Mozilla/5.0 (Linux; Android 13; SM-G991B) AppleWeb...</span><br><span class="line">2025-10-14 11:30:57 - services.mobile_banner_crawler - INFO - 📱 页面加载成功，内容长度: 534650 字符</span><br><span class="line">2025-10-14 11:30:57 - services.mobile_banner_crawler - INFO - ✅ 成功获取手机版页面内容</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 [Nuxt兜底] 未在内联脚本中提取到匹配的banner图片</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 开始解析HTML内容，查找banner相关图片...</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 找到 0 个包含 banner-img 类名的元素</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*banner.*&#x27;</span> 找到 1 个元素</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*swiper.*slide.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*carousel.*&#x27;</span> 找到 5 个元素</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*slider.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*hero.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*main.*banner.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*top.*banner.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 页面总共有 16 张图片，筛选可能的banner图片...</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🎯 共提取到 0 张唯一的banner相关图片</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - WARNING - 🔍 未找到banner图片，分析页面结构...</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 📊 页面调试信息：</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 总图片数量: 16</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 图片1: src=https://images.openharmony.cn/compatibility/标识下载/p..., class=[<span class="string">&#x27;logo-pic&#x27;</span>], alt=无</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 图片2: src=/_nuxt/img/search.2585098.png..., class=[<span class="string">&#x27;search-img&#x27;</span>], alt=</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 图片3: src=/_nuxt/img/close.9ee23e2.svg..., class=[<span class="string">&#x27;close-img&#x27;</span>], alt=</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 图片4: src=/_nuxt/img/search.2585098.png..., class=[<span class="string">&#x27;search-img-instance&#x27;</span>], alt=</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 图片5: src=data:image/png;<span class="built_in">base64</span>,iVBORw0KGgoAAAANSUhEUgAAADAA..., class=[<span class="string">&#x27;menu-img-instance&#x27;</span>], alt=无</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 可能的banner容器数量: 3</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 容器1: class=[<span class="string">&#x27;banner&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 容器2: class=[<span class="string">&#x27;el-carousel&#x27;</span>, <span class="string">&#x27;el-carousel--horizontal&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 容器3: class=[<span class="string">&#x27;el-carousel__container&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - WARNING - ⚠️ 未找到任何banner图片</span><br><span class="line">2025-10-14 11:30:58 - services.enhanced_mobile_banner_crawler - INFO - 🎉 总共获取到 0 张唯一的banner图片</span><br><span class="line">2025-10-14 11:30:58 - core.scheduler - INFO - ✅ 使用增强版爬虫成功，获取 0 张图片</span><br><span class="line">2025-10-14 11:30:58 - core.cache - INFO - 开始轮播图数据更新，状态设为准备中</span><br><span class="line">2025-10-14 11:30:58 - core.cache - INFO - 轮播图服务状态更新: preparing</span><br><span class="line">2025-10-14 11:30:58 - core.cache - INFO - 🎉 轮播图首次加载完成</span><br><span class="line">2025-10-14 11:30:58 - core.cache - WARNING - ⚠️ 轮播图缓存更新完成，但未获取到数据，状态保持：PREPARING</span><br><span class="line">2025-10-14 11:30:58 - core.scheduler - WARNING - ⚠️ 初始轮播图加载完成，但未找到任何轮播图，状态保持PREPARING</span><br><span class="line">✅ 快速校验完成：10/10 有效，有效率100.0%</span><br><span class="line">🚀 有效率高，跳过完整校验，直接返回所有数据</span><br><span class="line">2025-10-14 11:31:01 - services.openharmony_news_crawler - INFO - 📋 获取到 407 篇文章信息</span><br><span class="line">2025-10-14 11:31:01 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 1/407 篇文章: 对话OpenHarmony开源先锋：如何用代码革新终端生态</span><br><span class="line">2025-10-14 11:31:01 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 27 个内容块</span><br><span class="line">NIOHServer</span><br><span class="line">(29.53 KB)</span><br><span class="line">2025-10-14 11:30:53 - root - INFO - 日志系统初始化完成</span><br><span class="line">============================================================</span><br><span class="line">🚀 NowInOpenHarmony API 服务启动成功!</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14T11:30:53.320056323Z</span><br><span class="line">📡 服务可通过以下地址访问:</span><br><span class="line">----------------------------------------</span><br><span class="line">主要IP: http://172.17.0.2:8001</span><br><span class="line">API文档: http://172.17.0.2:8001/docs</span><br><span class="line">健康检查: http://172.17.0.2:8001/health</span><br><span class="line">全部新闻: http://172.17.0.2:8001/api/news/?all=<span class="literal">true</span></span><br><span class="line">Banner图片: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">----------------------------------------</span><br><span class="line">2025-10-14T11:30:53.320109783Z</span><br><span class="line">🎯 主要API端点:</span><br><span class="line">📰 全部新闻: http://172.17.0.2:8001/api/news/?all=<span class="literal">true</span></span><br><span class="line">🌐 官网新闻: http://172.17.0.2:8001/api/news/openharmony</span><br><span class="line">📚 技术博客: http://172.17.0.2:8001/api/news/blog</span><br><span class="line">📱 Banner图片: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">⚡ 服务状态: http://172.17.0.2:8001/api/health</span><br><span class="line">2025-10-14T11:30:53.320161334Z</span><br><span class="line">📋 完整API路径列表:</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">🔧 基础服务:</span><br><span class="line">根路径: http://172.17.0.2:8001/</span><br><span class="line">API文档: http://172.17.0.2:8001/docs</span><br><span class="line">ReDoc文档: http://172.17.0.2:8001/redoc</span><br><span class="line">健康检查: http://172.17.0.2:8001/health</span><br><span class="line">API健康检查: http://172.17.0.2:8001/api/health</span><br><span class="line">2025-10-14T11:30:53.320342843Z</span><br><span class="line">📰 新闻API:</span><br><span class="line">全部新闻: http://172.17.0.2:8001/api/news/</span><br><span class="line">分页新闻: http://172.17.0.2:8001/api/news/?page=1&amp;page_size=20</span><br><span class="line">搜索新闻: http://172.17.0.2:8001/api/news/?search=关键词</span><br><span class="line">分类新闻: http://172.17.0.2:8001/api/news/?category=官方动态</span><br><span class="line">OpenHarmony官网: http://172.17.0.2:8001/api/news/openharmony</span><br><span class="line">OpenHarmony技术博客: http://172.17.0.2:8001/api/news/blog</span><br><span class="line">手动爬取: http://172.17.0.2:8001/api/news/crawl (POST)</span><br><span class="line">新闻服务状态: http://172.17.0.2:8001/api/news/status/info</span><br><span class="line">2025-10-14T11:30:53.320620303Z</span><br><span class="line">🖼️ Banner轮播图API:</span><br><span class="line">手机版Banner: http://172.17.0.2:8001/api/banner/mobile</span><br><span class="line">增强版Banner: http://172.17.0.2:8001/api/banner/mobile/enhanced</span><br><span class="line">Banner状态: http://172.17.0.2:8001/api/banner/status</span><br><span class="line">手动爬取Banner: http://172.17.0.2:8001/api/banner/crawl (POST)</span><br><span class="line">Banner缓存信息: http://172.17.0.2:8001/api/banner/cache</span><br><span class="line">清空Banner缓存: http://172.17.0.2:8001/api/banner/cache/clear (DELETE)</span><br><span class="line">2025-10-14T11:30:53.320657383Z</span><br><span class="line">📊 API参数示例:</span><br><span class="line">强制爬取全部新闻: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=all&amp;<span class="built_in">limit</span>=50</span><br><span class="line">爬取官网新闻: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=openharmony</span><br><span class="line">爬取技术博客: http://172.17.0.2:8001/api/news/crawl?<span class="built_in">source</span>=openharmony_blog</span><br><span class="line">强制爬取Banner: http://172.17.0.2:8001/api/banner/mobile?force_crawl=<span class="literal">true</span></span><br><span class="line">下载Banner图片: http://172.17.0.2:8001/api/banner/mobile/enhanced?download_images=<span class="literal">true</span></span><br><span class="line">增强版爬取: http://172.17.0.2:8001/api/banner/crawl?use_enhanced=<span class="literal">true</span></span><br><span class="line">2025-10-14T11:30:53.320684943Z</span><br><span class="line">💡 提示:</span><br><span class="line">- 局域网IP可供同一网络下的其他设备访问</span><br><span class="line">- GET请求可直接在浏览器中访问</span><br><span class="line">- POST/DELETE请求需要使用API工具(如Postman)或curl命令</span><br><span class="line">- 使用 Ctrl+C 停止服务</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14T11:30:53.320708674Z</span><br><span class="line">⚙️ 启动配置:</span><br><span class="line">绑定地址: 0.0.0.0</span><br><span class="line">端口: 8001</span><br><span class="line">调试模式: False</span><br><span class="line">日志级别: INFO</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14 11:30:54 - root - INFO - 日志系统初始化完成</span><br><span class="line">INFO: Started server process [1]</span><br><span class="line">INFO: Waiting <span class="keyword">for</span> application startup.</span><br><span class="line">2025-10-14 11:30:54 - main - INFO - 应用启动中...</span><br><span class="line">2025-10-14 11:30:54 - core.database - INFO - 数据库初始化完成</span><br><span class="line">2025-10-14 11:30:54 - main - INFO - 数据库初始化完成</span><br><span class="line">2025-10-14 11:30:54 - core.cache - INFO - 新闻缓存初始化完成</span><br><span class="line">2025-10-14 11:30:54 - core.cache - INFO - 轮播图缓存初始化完成</span><br><span class="line">2025-10-14 11:30:54 - main - INFO - 缓存初始化完成</span><br><span class="line">2025-10-14 11:30:54 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 11:30:54 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 11:30:54 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 定时任务设置完成</span><br><span class="line">2025-10-14 11:30:54 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;更新所有新闻源缓存&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 11:30:54 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;更新轮播图缓存&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 11:30:54 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;完整爬取任务&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 11:30:54 - apscheduler.scheduler - INFO - Scheduler started</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 定时任务调度器已启动</span><br><span class="line">2025-10-14 11:30:54 - main - INFO - 定时任务调度器启动完成</span><br><span class="line">2025-10-14 11:30:54 - main - INFO - 开始执行初始缓存加载...</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 开始执行初始缓存加载</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 📦 分批写入模式：将在第一批数据写入后立即变为可用状态</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 🚀 开始执行初始缓存加载 - 来源: all</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 🖼️ 开始执行初始轮播图加载</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 📊 初始缓存加载 - 准备并行爬取数据...</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 初始缓存加载任务已提交到后台线程，服务可以立即响应请求</span><br><span class="line">2025-10-14 11:30:54 - core.cache - INFO - 开始轮播图数据更新，状态设为准备中</span><br><span class="line">2025-10-14 11:30:54 - services.news_service - INFO - 🌐 开始爬取OpenHarmony官网新闻...</span><br><span class="line">2025-10-14 11:30:54 - core.scheduler - INFO - 初始轮播图加载任务已提交到后台线程</span><br><span class="line">2025-10-14 11:30:54 - core.cache - INFO - 轮播图服务状态更新: preparing</span><br><span class="line">2025-10-14 11:30:54 - services.openharmony_news_crawler - INFO - 🌐 开始爬取OpenHarmony官网新闻...</span><br><span class="line">2025-10-14 11:30:54 - services.openharmony_news_crawler - INFO - 📦 启用分批处理模式，每 20 篇文章执行一次回调</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - 🚀 初始化增强版手机Banner爬虫</span><br><span class="line">2025-10-14 11:30:54 - main - INFO - 初始缓存加载完成</span><br><span class="line">🚀 开始高效获取OpenHarmony文章信息，每页300条数据...</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - - Selenium可用: True</span><br><span class="line">📡 请求API: 第1页</span><br><span class="line">2025-10-14 11:30:54 - main - INFO - 应用启动完成</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - - requests-html可用: False</span><br><span class="line">INFO: Application startup complete.</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - 🚀 开始增强版手机Banner爬取...</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法1: Selenium WebDriver</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - 🎯 使用Selenium获取动态轮播图...</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span><br><span class="line">2025-10-14 11:30:54 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chromedriver: /usr/bin/chromedriver</span><br><span class="line">INFO: Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)</span><br><span class="line">📊 第1页获取到300条数据</span><br><span class="line">📈 第1页新增300条有效数据，累计300条</span><br><span class="line">📡 请求API: 第2页</span><br><span class="line">📊 第2页获取到107条数据</span><br><span class="line">📈 第2页新增107条有效数据，累计407条</span><br><span class="line">🎯 第2页数据量(107)小于页面大小(300)，爬取完成</span><br><span class="line">📋 共���取到407条有效文章信息</span><br><span class="line">🔍 进行快速有效性校验...</span><br><span class="line">2025-10-14 11:30:56 - main - INFO - GET /health - Status: 200 - Process Time: 0.001s</span><br><span class="line">INFO: 127.0.0.1:59172 - <span class="string">&quot;GET /health HTTP/1.1&quot;</span> 200 OK</span><br><span class="line">2025-10-14 11:30:56 - services.enhanced_mobile_banner_crawler - WARNING - ⚠️ 首次启动Chrome失败: Message: session not created: probably user data directory is already <span class="keyword">in</span> use, please specify a unique value <span class="keyword">for</span> --user-data-dir argument, or don<span class="string">&#x27;t use --user-data-dir</span></span><br><span class="line"><span class="string">Stacktrace:</span></span><br><span class="line"><span class="string">#0 0x556676dc86a2 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#1 0x5566768388ab &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#2 0x5566768743aa &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#3 0x55667686e30f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#4 0x5566768bd2a7 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#5 0x5566768bca07 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#6 0x5566768ade97 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#7 0x55667687bbb1 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#8 0x55667687c995 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#9 0x556676d9261e &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#10 0x556676d95a7f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#11 0x556676d9551c &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#12 0x556676d95f29 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#13 0x556676d7bffb &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#14 0x556676d962b4 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#15 0x556676d6588d &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#16 0x556676db5339 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#17 0x556676db552f &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#18 0x556676dc7059 &lt;unknown&gt;</span></span><br><span class="line"><span class="string">#19 0x7f3270a12b7b &lt;unknown&gt;</span></span><br><span class="line"><span class="string">2025-10-14T11:30:56.913639249Z</span></span><br><span class="line"><span class="string">2025-10-14 11:30:56 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span></span><br><span class="line"><span class="string">2025-10-14 11:30:56 - services.enhanced_mobile_banner_crawler - INFO - 📁 使用临时用户目录: /tmp/chrome_user_data_1_fa10d476</span></span><br><span class="line"><span class="string">2025-10-14 11:30:57 - services.enhanced_mobile_banner_crawler - ERROR - ❌ Selenium WebDriver错误: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don&#x27;</span>t use --user-data-dir</span><br><span class="line">Stacktrace:</span><br><span class="line"><span class="comment">#0 0x563460ed76a2 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#1 0x5634609478ab &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#2 0x5634609833aa &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#3 0x56346097d30f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#4 0x5634609cc2a7 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#5 0x5634609cba07 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#6 0x5634609bce97 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#7 0x56346098abb1 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#8 0x56346098b995 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#9 0x563460ea161e &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#10 0x563460ea4a7f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#11 0x563460ea451c &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#12 0x563460ea4f29 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#13 0x563460e8affb &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#14 0x563460ea52b4 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#15 0x563460e7488d &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#16 0x563460ec4339 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#17 0x563460ec452f &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#18 0x563460ed6059 &lt;unknown&gt;</span></span><br><span class="line"><span class="comment">#19 0x7fa0d51b7b7b &lt;unknown&gt;</span></span><br><span class="line">2025-10-14T11:30:57.655037457Z</span><br><span class="line">2025-10-14 11:30:57 - services.enhanced_mobile_banner_crawler - INFO - 🧹 已清理临时用户目录: /tmp/chrome_user_data_1_fa10d476</span><br><span class="line">2025-10-14 11:30:57 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法3: 传统HTML解析（兜底）</span><br><span class="line">2025-10-14 11:30:57 - services.mobile_banner_crawler - INFO - 📱 已设置手机端请求头，User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac O...</span><br><span class="line">2025-10-14 11:30:57 - services.mobile_banner_crawler - INFO - 🚀 开始爬取OpenHarmony手机版banner图片</span><br><span class="line">2025-10-14 11:30:57 - services.mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 11:30:57 - services.mobile_banner_crawler - INFO - 📱 正在请求手机版页面: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 11:30:57 - services.mobile_banner_crawler - INFO - 📱 已设置手机端请求头，User-Agent: Mozilla/5.0 (Linux; Android 13; SM-G991B) AppleWeb...</span><br><span class="line">2025-10-14 11:30:57 - services.mobile_banner_crawler - INFO - 📱 页面加载成功，内容长度: 534650 字符</span><br><span class="line">2025-10-14 11:30:57 - services.mobile_banner_crawler - INFO - ✅ 成功获取手机版页面内容</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 [Nuxt兜底] 未在内联脚本中提取到匹配的banner图片</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 开始解析HTML内容，查找banner相关图片...</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 找到 0 个包含 banner-img 类名的元素</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*banner.*&#x27;</span> 找到 1 个元素</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*swiper.*slide.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*carousel.*&#x27;</span> 找到 5 个元素</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*slider.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*hero.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*main.*banner.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 通过模式 <span class="string">&#x27;.*top.*banner.*&#x27;</span> 找到 0 个元素</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🔍 页面总共有 16 张图片，筛选可能的banner图片...</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 🎯 共提取到 0 张唯一的banner相关图片</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - WARNING - 🔍 未找到banner图片，分析页面结构...</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - 📊 页面调试信息：</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 总图片数量: 16</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 图片1: src=https://images.openharmony.cn/compatibility/标识下载/p..., class=[<span class="string">&#x27;logo-pic&#x27;</span>], alt=无</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 图片2: src=/_nuxt/img/search.2585098.png..., class=[<span class="string">&#x27;search-img&#x27;</span>], alt=</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 图片3: src=/_nuxt/img/close.9ee23e2.svg..., class=[<span class="string">&#x27;close-img&#x27;</span>], alt=</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 图片4: src=/_nuxt/img/search.2585098.png..., class=[<span class="string">&#x27;search-img-instance&#x27;</span>], alt=</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 图片5: src=data:image/png;<span class="built_in">base64</span>,iVBORw0KGgoAAAANSUhEUgAAADAA..., class=[<span class="string">&#x27;menu-img-instance&#x27;</span>], alt=无</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 可能的banner容器数量: 3</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 容器1: class=[<span class="string">&#x27;banner&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 容器2: class=[<span class="string">&#x27;el-carousel&#x27;</span>, <span class="string">&#x27;el-carousel--horizontal&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - INFO - - 容器3: class=[<span class="string">&#x27;el-carousel__container&#x27;</span>], 包含图片=0张</span><br><span class="line">2025-10-14 11:30:58 - services.mobile_banner_crawler - WARNING - ⚠️ 未找到任何banner图片</span><br><span class="line">2025-10-14 11:30:58 - services.enhanced_mobile_banner_crawler - INFO - 🎉 总共获取到 0 张唯一的banner图片</span><br><span class="line">2025-10-14 11:30:58 - core.scheduler - INFO - ✅ 使用增强版爬虫成功，获取 0 张图片</span><br><span class="line">2025-10-14 11:30:58 - core.cache - INFO - 开始轮播图数据更新，状态设为准备中</span><br><span class="line">2025-10-14 11:30:58 - core.cache - INFO - 轮播图服务状态更新: preparing</span><br><span class="line">2025-10-14 11:30:58 - core.cache - INFO - 🎉 轮播图首次加载完成</span><br><span class="line">2025-10-14 11:30:58 - core.cache - WARNING - ⚠️ 轮播图缓存更新完成，但未获取到数据，状态保持：PREPARING</span><br><span class="line">2025-10-14 11:30:58 - core.scheduler - WARNING - ⚠️ 初始轮播图加载完成，但未找到任何轮播图，状态保持PREPARING</span><br><span class="line">✅ 快速校验完成：10/10 有效，有效率100.0%</span><br><span class="line">🚀 有效率高，跳过完整校验，直接返回所有数据</span><br><span class="line">2025-10-14 11:31:01 - services.openharmony_news_crawler - INFO - 📋 获取到 407 篇文章信息</span><br><span class="line">2025-10-14 11:31:01 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 1/407 篇文章: 对话OpenHarmony开源先锋：如何用代码革新终端生态</span><br><span class="line">2025-10-14 11:31:01 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 27 个内容块</span><br></pre></td></tr></table></figure>
<p>好吧依旧失败了，现在尝试一下独立浏览器容器，当然我的前提肯定是不能在额外购置服务器，最好是直接在这个服务器上实现，我将会让GPT带着我去做，一步一步的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line">看到了，还是在用本地 Chromedriver。我们直接按远程 WebDriver 落地，保证增强版能跑起来。给你两套可执行方案，按你当前“单容器（宝塔）”场景优先用方案A。</span><br><span class="line"></span><br><span class="line">方案A（单机两容器，最稳）</span><br><span class="line"></span><br><span class="line">创建网络</span><br><span class="line">docker network create ohnet || <span class="literal">true</span></span><br><span class="line">启动独立浏览器容器</span><br><span class="line">docker run -d --name selenium --network ohnet -p 4444:4444 --shm-size=2g --restart unless-stopped selenium/standalone-chromium:latest</span><br><span class="line">重建 API 容器并接入远程 WebDriver</span><br><span class="line">docker stop NIOHServer || <span class="literal">true</span> &amp;&amp; docker <span class="built_in">rm</span> NIOHServer || <span class="literal">true</span></span><br><span class="line">docker run -d --name NIOHServer --network ohnet -p 8001:8001 --shm-size=1g</span><br><span class="line">-e BANNER_USE_ENHANCED=<span class="literal">true</span></span><br><span class="line">-e SELENIUM_REMOTE_URL=http://selenium:4444/wd/hub</span><br><span class="line">-e SELENIUM_USE_USER_DATA_DIR=<span class="literal">false</span></span><br><span class="line">openharmony-server:latest</span><br><span class="line">验证</span><br><span class="line">需要在日志看到“🌐 使用远程WebDriver: http://selenium:4444/wd/hub”</span><br><span class="line">触发一次爬取：curl -X POST <span class="string">&quot;http://&lt;服务器IP&gt;:8001/api/banner/crawl?use_enhanced=true&quot;</span></span><br><span class="line">查看结果：curl <span class="string">&quot;http://&lt;服务器IP&gt;:8001/api/banner/mobile&quot;</span></span><br><span class="line">方案B（若不方便建自定义网络）</span><br><span class="line"></span><br><span class="line">启动浏览器容器并映射到宿主</span><br><span class="line">docker run -d --name selenium -p 4444:4444 --shm-size=2g --restart unless-stopped selenium/standalone-chromium:latest</span><br><span class="line">重建 API 容器，远程地址指向宿主</span><br><span class="line">docker stop NIOHServer || <span class="literal">true</span> &amp;&amp; docker <span class="built_in">rm</span> NIOHServer || <span class="literal">true</span></span><br><span class="line">docker run -d --name NIOHServer -p 8001:8001 --shm-size=1g</span><br><span class="line">-e BANNER_USE_ENHANCED=<span class="literal">true</span></span><br><span class="line">-e SELENIUM_REMOTE_URL=http://172.17.0.1:4444/wd/hub</span><br><span class="line">-e SELENIUM_USE_USER_DATA_DIR=<span class="literal">false</span></span><br><span class="line">openharmony-server:latest</span><br><span class="line">说明：在 Linux 默认 bridge 下，容器访问宿主端口用 172.17.0.1；或改为你的公网/内网 IP:4444</span><br><span class="line">注意点</span><br><span class="line"></span><br><span class="line">成功标志：日志不再出现“使用Chromedriver: /usr/bin/chromedriver”，而是“使用远程WebDriver…”</span><br><span class="line">如果仍失败：curl http://&lt;宿主IP&gt;:4444/status 看看 Selenium 是否正常；如有防火墙需放行 4444</span><br><span class="line">要不要我把你当前容器名/端口换成你实际值，给你一段可复制的一键脚本？</span><br><span class="line"></span><br><span class="line">告诉我需要提替换的值，我直接给你找</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">好的，我列出需要你替换/确认的值，并给出两套命令模板。你把占位符替换成你环境里的实际值后，直接复制执行即可。</span><br><span class="line"></span><br><span class="line">需要替换的值</span><br><span class="line"></span><br><span class="line">APP_CONTAINER_NAME：你现有 API 容器名。示例：NIOHServer（在面板“容器”列表可见）</span><br><span class="line">APP_IMAGE：API 镜像名。示例：openharmony-server:latest</span><br><span class="line">HOST_PORT：主机映射到容器 8001 的端口。示例：32776（面板显示 0.0.0.0:32776→8001）</span><br><span class="line">DOCKER_NETWORK：用于让两个容器互通的自定义网络名。建议：ohnet</span><br><span class="line">SELENIUM_CONTAINER_NAME：浏览器容器名。建议：selenium</span><br><span class="line">SELENIUM_REMOTE_URL：</span><br><span class="line">同网段（推荐）：http://selenium:4444/wd/hub</span><br><span class="line">不建网络时（容器访问宿主）：http://172.17.0.1:4444/wd/hub（或宿主内网/公网IP:4444）</span><br><span class="line">TZ：时区，例：Asia/Shanghai（可不改）</span><br><span class="line">提示：</span><br><span class="line"></span><br><span class="line">容器访问宿主常用网关 IP 是 172.17.0.1（Linux 默认 bridge）。也可在容器里 ip route | awk <span class="string">&#x27;/default/ &#123;print $3&#125;&#x27;</span> 查实际值。</span><br><span class="line">若用面板创建容器，它可能自动分配 HOST_PORT；你可以沿用这个端口避免冲突。</span><br><span class="line">方案A（推荐，同网段）</span><br><span class="line"></span><br><span class="line">创建网络</span><br><span class="line">docker network create DOCKER_NETWORK || <span class="literal">true</span></span><br><span class="line">启动 Selenium 容器</span><br><span class="line">docker run -d --name SELENIUM_CONTAINER_NAME --network DOCKER_NETWORK -p 4444:4444 --shm-size=2g --restart unless-stopped selenium/standalone-chromium:latest</span><br><span class="line">重建 API 容器（连接到远程 WebDriver）</span><br><span class="line">docker stop APP_CONTAINER_NAME || <span class="literal">true</span> &amp;&amp; docker <span class="built_in">rm</span> APP_CONTAINER_NAME || <span class="literal">true</span></span><br><span class="line">docker run -d --name APP_CONTAINER_NAME --network DOCKER_NETWORK -p HOST_PORT:8001 --shm-size=1g -e BANNER_USE_ENHANCED=<span class="literal">true</span> -e SELENIUM_REMOTE_URL=http://SELENIUM_CONTAINER_NAME:4444/wd/hub -e SELENIUM_USE_USER_DATA_DIR=<span class="literal">false</span> APP_IMAGE</span><br><span class="line">替换示例：</span><br><span class="line"></span><br><span class="line">DOCKER_NETWORK=ohnet</span><br><span class="line">SELENIUM_CONTAINER_NAME=selenium</span><br><span class="line">APP_CONTAINER_NAME=NIOHServer</span><br><span class="line">HOST_PORT=32776</span><br><span class="line">APP_IMAGE=openharmony-server:latest</span><br><span class="line">方案B（不建网络，容器访问宿主）</span><br><span class="line"></span><br><span class="line">启动 Selenium 容器（映射到宿主 4444）</span><br><span class="line">docker run -d --name SELENIUM_CONTAINER_NAME -p 4444:4444 --shm-size=2g --restart unless-stopped selenium/standalone-chromium:latest</span><br><span class="line">重建 API 容器（远程 URL 指向宿主）</span><br><span class="line">docker stop APP_CONTAINER_NAME || <span class="literal">true</span> &amp;&amp; docker <span class="built_in">rm</span> APP_CONTAINER_NAME || <span class="literal">true</span></span><br><span class="line">docker run -d --name APP_CONTAINER_NAME -p HOST_PORT:8001 --shm-size=1g -e BANNER_USE_ENHANCED=<span class="literal">true</span> -e SELENIUM_REMOTE_URL=http://172.17.0.1:4444/wd/hub -e SELENIUM_USE_USER_DATA_DIR=<span class="literal">false</span> APP_IMAGE</span><br><span class="line">如 172.17.0.1 不通，可改用你的宿主 IP：http://服务器内网/公网IP:4444/wd/hub</span><br><span class="line"></span><br><span class="line">验证步骤</span><br><span class="line"></span><br><span class="line">浏览器容器健康：curl http://&lt;宿主或容器可达地址&gt;:4444/status</span><br><span class="line">日志关键行（API容器）：应出现“使用远程WebDriver: …”，不再出现“使用Chromedriver: /usr/bin/chromedriver”</span><br><span class="line">触发爬取：curl -X POST <span class="string">&quot;http://&lt;服务器IP或域名&gt;:HOST_PORT/api/banner/crawl?use_enhanced=true&quot;</span></span><br><span class="line">查看图片列表：curl <span class="string">&quot;http://&lt;服务器IP或域名&gt;:HOST_PORT/api/banner/mobile&quot;</span></span><br><span class="line">把上面占位符替换后发我一份命令，我帮你再过目确认无误。</span><br><span class="line"></span><br><span class="line">其余的你自定义，给我完整的可直接执行的命令</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">User attachment</span><br><span class="line">User attachment</span><br><span class="line">下面是一套可直接执行的命令，我已替你填好所有值（基于你当前环境：容器名 NIOHServer、镜像 openharmony-server:latest、对外端口 32776）。按顺序整段复制执行即可。</span><br><span class="line"></span><br><span class="line">创建网络 + 启动独立浏览器容器 + 重新创建 API 容器（使用远程 WebDriver）</span><br><span class="line">`bash</span><br><span class="line">1) 创建独立网络（如已存在不报错）</span><br><span class="line">docker network create ohnet || <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">2) 启动 Selenium 独立浏览器容器（远程 WebDriver）</span><br><span class="line">docker <span class="built_in">rm</span> -f selenium 2&gt;/dev/null || <span class="literal">true</span></span><br><span class="line">docker run -d --name selenium --network ohnet</span><br><span class="line">-p 4444:4444</span><br><span class="line">--shm-size=2g</span><br><span class="line">--restart unless-stopped</span><br><span class="line">selenium/standalone-chromium:latest</span><br><span class="line"></span><br><span class="line">等待 Selenium 就绪</span><br><span class="line"><span class="keyword">until</span> curl -sf http://127.0.0.1:4444/status | grep -q <span class="string">&#x27;&quot;ready&quot;:true&#x27;</span>; <span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Waiting for Selenium remote WebDriver on :4444 ...&quot;</span>; <span class="built_in">sleep</span> 2;</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">3) 重建 API 容器（连接到远程 WebDriver）</span><br><span class="line">docker <span class="built_in">rm</span> -f NIOHServer 2&gt;/dev/null || <span class="literal">true</span></span><br><span class="line">docker run -d --name NIOHServer --network ohnet</span><br><span class="line">-p 32776:8001</span><br><span class="line">--shm-size=1g</span><br><span class="line">-e TZ=Asia/Shanghai</span><br><span class="line">-e BANNER_USE_ENHANCED=<span class="literal">true</span></span><br><span class="line">-e SELENIUM_REMOTE_URL=http://selenium:4444/wd/hub</span><br><span class="line">-e SELENIUM_USE_USER_DATA_DIR=<span class="literal">false</span></span><br><span class="line">openharmony-server:latest</span><br><span class="line"></span><br><span class="line">4) 基础连通性与状态检查</span><br><span class="line"><span class="built_in">echo</span>; <span class="built_in">echo</span> <span class="string">&quot;Selenium status:&quot;</span>; curl -s http://127.0.0.1:4444/status || <span class="literal">true</span></span><br><span class="line"><span class="built_in">echo</span>; <span class="built_in">echo</span> <span class="string">&quot;API health:&quot;</span>; curl -s http://127.0.0.1:32776/health || <span class="literal">true</span></span><br><span class="line">`</span><br><span class="line"></span><br><span class="line">触发与验证轮播图</span><br><span class="line">`bash</span><br><span class="line">触发增强版爬取（走远程 WebDriver）</span><br><span class="line">curl -s -X POST <span class="string">&quot;http://127.0.0.1:32776/api/banner/crawl?use_enhanced=true&quot;</span></span><br><span class="line"></span><br><span class="line">查看轮播图状态与结果</span><br><span class="line"><span class="built_in">echo</span>; <span class="built_in">echo</span> <span class="string">&quot;Banner status:&quot;</span>; curl -s <span class="string">&quot;http://127.0.0.1:32776/api/banner/status&quot;</span></span><br><span class="line"><span class="built_in">echo</span>; <span class="built_in">echo</span> <span class="string">&quot;Banner images:&quot;</span>; curl -s <span class="string">&quot;http://127.0.0.1:32776/api/banner/mobile&quot;</span></span><br><span class="line">`</span><br><span class="line"></span><br><span class="line">实时查看关键日志（确认日志出现“使用远程WebDriver”而非本地 chromedriver）</span><br><span class="line">bash docker logs -f --<span class="built_in">tail</span>=200 NIOHServer | grep -E <span class="string">&quot;远程WebDriver|WebDriver|Selenium|使用Chromedriver|Banner|轮播图|enhanced&quot;</span> -n --color=always</span><br><span class="line">如果需要快速回退为非增强版（不依赖 Selenium），用这两行重建：</span><br><span class="line">bash docker <span class="built_in">rm</span> -f NIOHServer || <span class="literal">true</span> docker run -d --name NIOHServer --network ohnet -p 32776:8001 --shm-size=1g \ -e TZ=Asia/Shanghai -e BANNER_USE_ENHANCED=<span class="literal">false</span> \ openharmony-server:latest</span><br><span class="line"></span><br><span class="line">说明</span><br><span class="line"></span><br><span class="line">以上命令使用单机两容器方案：Selenium 与 API 都在同一台服务器，通过自定义网络 ohnet 互通。</span><br><span class="line">关键环境变量：SELENIUM_REMOTE_URL=http://selenium:4444/wd/hub，确保增强版爬虫使用远程浏览器。</span><br><span class="line">端口：API 对外 32776，Selenium 对外 4444；如有安全策略请放行。</span><br></pre></td></tr></table></figure>
<p>一下是我所需要执行的命令，让我来总结一下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network create ohnet || <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> -f selenium 2&gt;/dev/null || <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name selenium --network ohnet -p 4444:4444 --shm-size=2g --restart unless-stopped selenium/standalone-chromium:latest</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">until</span> curl -sf http://127.0.0.1:4444/status | grep -q <span class="string">&#x27;&quot;ready&quot;:true&#x27;</span>; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="string">&quot;Waiting for Selenium remote WebDriver on :4444 ...&quot;</span>; <span class="built_in">sleep</span> 2; <span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> -f NIOHServer 2&gt;/dev/null || <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name NIOHServer --network ohnet -p 32776:8001 --shm-size=1g -e TZ=Asia/Shanghai -e BANNER_USE_ENHANCED=<span class="literal">true</span> -e SELENIUM_REMOTE_URL=http://selenium:4444/wd/hub -e SELENIUM_USE_USER_DATA_DIR=<span class="literal">false</span> openharmony-server:latest</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s http://127.0.0.1:4444/status</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s http://127.0.0.1:32776/health</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s -X POST <span class="string">&quot;http://127.0.0.1:32776/api/banner/crawl?use_enhanced=true&quot;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s <span class="string">&quot;http://127.0.0.1:32776/api/banner/status&quot;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s <span class="string">&quot;http://127.0.0.1:32776/api/banner/mobile&quot;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f --<span class="built_in">tail</span>=200 NIOHServer | grep -E <span class="string">&quot;远程WebDriver|WebDriver|Selenium|使用Chromedriver|Banner|轮播图|enhanced&quot;</span> -n --color=always</span><br></pre></td></tr></table></figure>
<p>ok以上就是需要去执行的命令，现在我正在逐一执行，现在执行到了第三步。然后正在拉取 selenium/standalone-chromium 的镜像。这个过程比较长，刚好用来回顾一下这套解决方式。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/26.png" alt="26"></p>
<p>我们所需要解决的核心问题在于，</p>
<p>主要集中在以下几件事：</p>
<ul>
<li>浏览器环境可控化：把 WebDriver 从宿主机剥离，使用独立容器的固定版本，避免系统升级/驱动不匹配。</li>
<li>资源与稳定性：扩大 /dev/shm，避免长页面截图/滚动导致的崩溃；容器限额可控，防止互相“抢资源”。</li>
<li>网络连通性：容器间直连可预期，避免容器→宿主的网关差异（172.17.0.1 不同环境不一定可达）。</li>
<li>可观测性：通过“是否打印远程WebDriver日志”“/status”就绪检查，快速定位问题。</li>
<li>回退策略：一键切回非增强版（不依赖 Selenium），确保业务不中断。</li>
</ul>
<p>我们的解决方案回顾：</p>
<ul>
<li>自定义网络 ohnet，保证 API 容器与浏览器容器在同一网络内互通。</li>
<li>浏览器容器：selenium/standalone-chromium:latest 暴露 4444，提供标准远程 WebDriver。</li>
<li>API 容器：通过 <code>SELENIUM_REMOTE_URL=http://selenium:4444/wd/hub</code> 直连，不再依赖本地 chromedriver。</li>
</ul>
<p>验证口径：</p>
<ul>
<li><code>GET http://127.0.0.1:4444/status</code> 返回 <code>&quot;ready&quot;: true</code> 后再重启/启动 API 容器。</li>
<li><code>docker logs -f NIOHServer</code> 日志出现“使用远程WebDriver”，且不再打印本地 chromedriver 路径。</li>
<li>访问 <code>GET /api/banner/mobile</code> 与 <code>GET /api/banner/status</code>，图片数量、最近抓取状态正常。</li>
</ul>
<p>易踩坑与处理：</p>
<ul>
<li>/dev/shm 太小：为浏览器容器加 <code>--shm-size=2g</code>。</li>
<li>容器互通失败：确保两容器都在 ohnet；不要一个在 bridge、一个在 ohnet。</li>
<li>172.17.0.1 不通：优先方案A（容器内网直连）。若必须方案B，改宿主内网/公网IP 并放行防火墙。</li>
<li>镜像版本漂移：生产环境建议固定 tag（例如 <code>selenium/standalone-chromium:122.0</code>）。</li>
</ul>
<p>应急回退（不用 Selenium 的非增强版）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> -f NIOHServer || <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name NIOHServer --network ohnet -p 32776:8001 --shm-size=1g \</span><br><span class="line">  -e TZ=Asia/Shanghai -e BANNER_USE_ENHANCED=<span class="literal">false</span> \</span><br><span class="line">  openharmony-server:latest</span><br></pre></td></tr></table></figure>
<p>后面我会继续执行剩余步骤，并记录 Banner 抓取成功率、耗时以及日志关键词（远程WebDriver/Chromedriver）对比，验证这套方案的稳定性提升是否达到预期。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br></pre></td><td class="code"><pre><span class="line">2025-10-14 20:21:24 - root - INFO - 日志系统初始化完成</span><br><span class="line">============================================================</span><br><span class="line">🚀 NowInOpenHarmony API 服务启动成功!</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14T12:21:24.796525657Z</span><br><span class="line">📡 服务可通过以下地址访问:</span><br><span class="line">----------------------------------------</span><br><span class="line">主要IP: http://172.19.0.3:8001</span><br><span class="line">API文档: http://172.19.0.3:8001/docs</span><br><span class="line">健康检查: http://172.19.0.3:8001/health</span><br><span class="line">全部新闻: http://172.19.0.3:8001/api/news/?all=<span class="literal">true</span></span><br><span class="line">Banner图片: http://172.19.0.3:8001/api/banner/mobile</span><br><span class="line">----------------------------------------</span><br><span class="line">2025-10-14T12:21:24.796584668Z</span><br><span class="line">🎯 主要API端点:</span><br><span class="line">📰 全部新闻: http://172.19.0.3:8001/api/news/?all=<span class="literal">true</span></span><br><span class="line">🌐 官网新闻: http://172.19.0.3:8001/api/news/openharmony</span><br><span class="line">📚 技术博客: http://172.19.0.3:8001/api/news/blog</span><br><span class="line">📱 Banner图片: http://172.19.0.3:8001/api/banner/mobile</span><br><span class="line">⚡ 服务状态: http://172.19.0.3:8001/api/health</span><br><span class="line">2025-10-14T12:21:24.796608777Z</span><br><span class="line">📋 完整API路径列表:</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">🔧 基础服务:</span><br><span class="line">根路径: http://172.19.0.3:8001/</span><br><span class="line">API文档: http://172.19.0.3:8001/docs</span><br><span class="line">ReDoc文档: http://172.19.0.3:8001/redoc</span><br><span class="line">健康检查: http://172.19.0.3:8001/health</span><br><span class="line">API健康检查: http://172.19.0.3:8001/api/health</span><br><span class="line">2025-10-14T12:21:24.796638868Z</span><br><span class="line">📰 新闻API:</span><br><span class="line">全部新闻: http://172.19.0.3:8001/api/news/</span><br><span class="line">分页新闻: http://172.19.0.3:8001/api/news/?page=1&amp;page_size=20</span><br><span class="line">搜索新闻: http://172.19.0.3:8001/api/news/?search=关键词</span><br><span class="line">分类新闻: http://172.19.0.3:8001/api/news/?category=官方动态</span><br><span class="line">OpenHarmony官网: http://172.19.0.3:8001/api/news/openharmony</span><br><span class="line">OpenHarmony技术博客: http://172.19.0.3:8001/api/news/blog</span><br><span class="line">手动爬取: http://172.19.0.3:8001/api/news/crawl (POST)</span><br><span class="line">新闻服务状态: http://172.19.0.3:8001/api/news/status/info</span><br><span class="line">2025-10-14T12:21:24.796681277Z</span><br><span class="line">🖼️ Banner轮播图API:</span><br><span class="line">手机版Banner: http://172.19.0.3:8001/api/banner/mobile</span><br><span class="line">增强版Banner: http://172.19.0.3:8001/api/banner/mobile/enhanced</span><br><span class="line">Banner状态: http://172.19.0.3:8001/api/banner/status</span><br><span class="line">手动爬取Banner: http://172.19.0.3:8001/api/banner/crawl (POST)</span><br><span class="line">Banner缓存信息: http://172.19.0.3:8001/api/banner/cache</span><br><span class="line">清空Banner缓存: http://172.19.0.3:8001/api/banner/cache/clear (DELETE)</span><br><span class="line">2025-10-14T12:21:24.796708417Z</span><br><span class="line">📊 API参数示例:</span><br><span class="line">强制爬取全部新闻: http://172.19.0.3:8001/api/news/crawl?<span class="built_in">source</span>=all&amp;<span class="built_in">limit</span>=50</span><br><span class="line">爬取官网新闻: http://172.19.0.3:8001/api/news/crawl?<span class="built_in">source</span>=openharmony</span><br><span class="line">爬取技术博客: http://172.19.0.3:8001/api/news/crawl?<span class="built_in">source</span>=openharmony_blog</span><br><span class="line">强制爬取Banner: http://172.19.0.3:8001/api/banner/mobile?force_crawl=<span class="literal">true</span></span><br><span class="line">下载Banner图片: http://172.19.0.3:8001/api/banner/mobile/enhanced?download_images=<span class="literal">true</span></span><br><span class="line">增强版爬取: http://172.19.0.3:8001/api/banner/crawl?use_enhanced=<span class="literal">true</span></span><br><span class="line">2025-10-14T12:21:24.796737808Z</span><br><span class="line">💡 提示:</span><br><span class="line">- 局域网IP可供同一网络下的其他设备访问</span><br><span class="line">- GET请求可直接在浏览器中访问</span><br><span class="line">- POST/DELETE请求需要使用API工具(如Postman)或curl命令</span><br><span class="line">- 使用 Ctrl+C 停止服务</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14T12:21:24.796761857Z</span><br><span class="line">⚙️ 启动配置:</span><br><span class="line">绑定地址: 0.0.0.0</span><br><span class="line">端口: 8001</span><br><span class="line">调试模式: False</span><br><span class="line">日志级别: INFO</span><br><span class="line">============================================================</span><br><span class="line">2025-10-14 20:21:26 - root - INFO - 日志系统初始化完成</span><br><span class="line">INFO: Started server process [1]</span><br><span class="line">INFO: Waiting <span class="keyword">for</span> application startup.</span><br><span class="line">2025-10-14 20:21:26 - main - INFO - 应用启动中...</span><br><span class="line">2025-10-14 20:21:26 - core.database - INFO - 数据库初始化完成</span><br><span class="line">2025-10-14 20:21:26 - main - INFO - 数据库初始化完成</span><br><span class="line">2025-10-14 20:21:26 - core.cache - INFO - 新闻缓存初始化完成</span><br><span class="line">2025-10-14 20:21:26 - core.cache - INFO - 轮播图缓存初始化完成</span><br><span class="line">2025-10-14 20:21:26 - main - INFO - 缓存初始化完成</span><br><span class="line">2025-10-14 20:21:26 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 20:21:26 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 20:21:26 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts</span><br><span class="line">2025-10-14 20:21:26 - core.scheduler - INFO - 定时任务设置完成</span><br><span class="line">2025-10-14 20:21:26 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;更新所有新闻源缓存&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 20:21:26 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;更新轮播图缓存&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 20:21:26 - apscheduler.scheduler - INFO - Added job <span class="string">&quot;完整爬取任务&quot;</span> to job store <span class="string">&quot;default&quot;</span></span><br><span class="line">2025-10-14 20:21:26 - apscheduler.scheduler - INFO - Scheduler started</span><br><span class="line">2025-10-14 20:21:26 - core.scheduler - INFO - 定时任务调度器已启动</span><br><span class="line">2025-10-14 20:21:26 - main - INFO - 定时任务调度器启动完成</span><br><span class="line">2025-10-14 20:21:26 - main - INFO - 开始执行初始缓存加载...</span><br><span class="line">2025-10-14 20:21:26 - core.scheduler - INFO - 开始执行初始缓存加载</span><br><span class="line">2025-10-14 20:21:26 - core.scheduler - INFO - 📦 分批写入模式：将在第一批数据写入后立即变为可用状态</span><br><span class="line">2025-10-14 20:21:26 - core.scheduler - INFO - 🚀 开始执行初始缓存加载 - 来源: all</span><br><span class="line">2025-10-14 20:21:26 - core.scheduler - INFO - 📊 初始缓存加载 - 准备并行爬取数据...</span><br><span class="line">2025-10-14 20:21:26 - services.news_service - INFO - 🌐 开始爬取OpenHarmony官网新闻...</span><br><span class="line">2025-10-14 20:21:26 - services.openharmony_news_crawler - INFO - 🌐 开始爬取OpenHarmony官网新闻...</span><br><span class="line">2025-10-14 20:21:26 - services.openharmony_news_crawler - INFO - 📦 启用分批处理模式，每 20 篇文章执行一次回调</span><br><span class="line">🚀 开始高效获取OpenHarmony文章信息，每页300条数据...</span><br><span class="line">📡 请求API: 第1页</span><br><span class="line">2025-10-14 20:21:26 - core.scheduler - INFO - 🖼️ 开始执行初始轮播图加载</span><br><span class="line">2025-10-14 20:21:26 - core.cache - INFO - 开始轮播图数据更新，状态设为准备中</span><br><span class="line">2025-10-14 20:21:26 - core.cache - INFO - 轮播图服务状态更新: preparing</span><br><span class="line">2025-10-14 20:21:26 - services.enhanced_mobile_banner_crawler - INFO - 🚀 初始化增强版手机Banner爬虫</span><br><span class="line">2025-10-14 20:21:26 - services.enhanced_mobile_banner_crawler - INFO - - Selenium可用: True</span><br><span class="line">2025-10-14 20:21:26 - services.enhanced_mobile_banner_crawler - INFO - - requests-html可用: False</span><br><span class="line">2025-10-14 20:21:26 - core.scheduler - INFO - 初始缓存加载任务已提交到后台线程，服务可以立即响应请求</span><br><span class="line">2025-10-14 20:21:26 - services.enhanced_mobile_banner_crawler - INFO - 🚀 开始增强版手机Banner爬取...</span><br><span class="line">2025-10-14 20:21:26 - core.scheduler - INFO - 初始轮播图加载任务已提交到后台线程</span><br><span class="line">2025-10-14 20:21:26 - services.enhanced_mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 20:21:26 - main - INFO - 初始缓存加载完成</span><br><span class="line">2025-10-14 20:21:26 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法1: Selenium WebDriver</span><br><span class="line">2025-10-14 20:21:26 - main - INFO - 应用启动完成</span><br><span class="line">2025-10-14 20:21:26 - services.enhanced_mobile_banner_crawler - INFO - 🎯 使用Selenium获取动态轮播图...</span><br><span class="line">INFO: Application startup complete.</span><br><span class="line">2025-10-14 20:21:26 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span><br><span class="line">2025-10-14 20:21:26 - services.enhanced_mobile_banner_crawler - INFO - 🌐 使用远程WebDriver: http://selenium:4444/wd/hub</span><br><span class="line">INFO: Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)</span><br><span class="line">📊 第1页获取到300条数据</span><br><span class="line">📈 第1页新增300条有效数据，累计300条</span><br><span class="line">📡 请求API: 第2页</span><br><span class="line">📊 第2页获取到107条数据</span><br><span class="line">📈 第2页新增107条有效数据，累计407条</span><br><span class="line">🎯 第2页数据量(107)小于页面大小(300)，爬取完成</span><br><span class="line">📋 共���取到407条有效文章信息</span><br><span class="line">🔍 进行快速有效性校验...</span><br><span class="line">2025-10-14 20:21:27 - main - INFO - GET /health - Status: 200 - Process Time: 0.001s</span><br><span class="line">INFO: 127.0.0.1:55366 - <span class="string">&quot;GET /health HTTP/1.1&quot;</span> 200 OK</span><br><span class="line">2025-10-14 20:21:29 - services.enhanced_mobile_banner_crawler - INFO - 📱 访问页面: https://old.openharmony.cn/mainPlay</span><br><span class="line">✅ 快速校验完成：9/10 有效，有效率90.0%</span><br><span class="line">🚀 有效率高，跳过完整校验，直接返回所有数据</span><br><span class="line">2025-10-14 20:21:42 - services.openharmony_news_crawler - INFO - 📋 获取到 407 篇文章信息</span><br><span class="line">2025-10-14 20:21:42 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 1/407 篇文章: 对话OpenHarmony开源先锋：如何用代码革新终端生态</span><br><span class="line">2025-10-14 20:21:44 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 27 个内容块</span><br><span class="line">2025-10-14 20:21:45 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 2/407 篇文章: 12强终极PK！第二届OpenHarmony创新应用挑战赛引爆开源热潮</span><br><span class="line">2025-10-14 20:21:46 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 11 个内容块</span><br><span class="line">2025-10-14 20:21:47 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 3/407 篇文章: 第二届OpenHarmony创新应用挑战赛决赛路演队伍揭晓</span><br><span class="line">2025-10-14 20:21:48 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 20:21:48 - services.enhanced_mobile_banner_crawler - INFO - ✅ 轮播容器已加载</span><br><span class="line">2025-10-14 20:21:48 - services.enhanced_mobile_banner_crawler - INFO - 🔄 执行页面滚动...</span><br><span class="line">2025-10-14 20:21:49 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 4/407 篇文章: OpenHarmony社区2024年度运营报告发布，致谢每一位生态共建者！</span><br><span class="line">2025-10-14 20:21:49 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 34 个内容块</span><br><span class="line">2025-10-14 20:21:50 - services.enhanced_mobile_banner_crawler - INFO - 🖱️ 模拟鼠标悬停</span><br><span class="line">2025-10-14 20:21:50 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 5/407 篇文章: 开源鸿蒙社区恭祝全体开发者2025新年快乐，新春大吉！</span><br><span class="line">2025-10-14 20:21:51 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 20:21:52 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 6/407 篇文章: 共绘2025年开源新蓝图，OpenHarmony社区项目管理委员会年度工作会议在深圳成功举办</span><br><span class="line">2025-10-14 20:21:52 - services.enhanced_mobile_banner_crawler - INFO - 👆 点击轮播指示器</span><br><span class="line">2025-10-14 20:21:53 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 41 个内容块</span><br><span class="line">2025-10-14 20:21:53 - main - INFO - GET /health - Status: 200 - Process Time: 0.001s</span><br><span class="line">INFO: 172.19.0.1:59564 - <span class="string">&quot;GET /health HTTP/1.1&quot;</span> 200 OK</span><br><span class="line">2025-10-14 20:21:54 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 7/407 篇文章: 开源鸿蒙项目群新增捐赠人（2024年12月）</span><br><span class="line">2025-10-14 20:21:54 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 16 个内容块</span><br><span class="line">2025-10-14 20:21:54 - services.enhanced_mobile_banner_crawler - INFO - ⚡ 执行JavaScript触发脚本</span><br><span class="line">2025-10-14 20:21:55 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 8/407 篇文章: 开源鸿蒙社区隆重致谢授牌2024年度社区贡献单位和个人</span><br><span class="line">2025-10-14 20:21:56 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 4 个内容块</span><br><span class="line">2025-10-14 20:21:57 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 9/407 篇文章: 厚植根基，同启新程！一文回顾 2024 OpenHarmony 社区年度工作会议精彩瞬间</span><br><span class="line">2025-10-14 20:21:57 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 44 个内容块</span><br><span class="line">2025-10-14 20:21:58 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 10/407 篇文章: 第二届OpenHarmony创新应用挑战赛决赛晋级名单公示</span><br><span class="line">2025-10-14 20:21:59 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 20:21:59 - main - INFO - GET /health - Status: 200 - Process Time: 0.000s</span><br><span class="line">INFO: 127.0.0.1:57904 - <span class="string">&quot;GET /health HTTP/1.1&quot;</span> 200 OK</span><br><span class="line">2025-10-14 20:22:00 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 11/407 篇文章: 一元复始 万象更新|开源鸿蒙社区祝广大开发者元旦快乐！</span><br><span class="line">2025-10-14 20:22:01 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 20:22:02 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 12/407 篇文章: OpenHarmony程序分析框架论文入选第50届国际软件工程大会ICSE2025</span><br><span class="line">2025-10-14 20:22:02 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 8 个内容块</span><br><span class="line">2025-10-14 20:22:02 - services.enhanced_mobile_banner_crawler - INFO - 🔍 选择器 <span class="string">&#x27;.el-carousel img&#x27;</span> 找到 4 个图片元素</span><br><span class="line">2025-10-14 20:22:03 - services.enhanced_mobile_banner_crawler - INFO - 🔍 选择器 <span class="string">&#x27;.banner img&#x27;</span> 找到 4 个图片元素</span><br><span class="line">2025-10-14 20:22:03 - services.enhanced_mobile_banner_crawler - INFO - 🔍 选择器 <span class="string">&#x27;.el-carousel__item img&#x27;</span> 找到 4 个图片元素</span><br><span class="line">2025-10-14 20:22:03 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 13/407 篇文章: OpenHarmony开发者激励计划 | 2024年度精彩回顾</span><br><span class="line">2025-10-14 20:22:04 - api.banner - INFO - 🚀 手动触发轮播图爬取 - 增强版: True, 下载: False</span><br><span class="line">2025-10-14 20:22:04 - core.scheduler - INFO - 开始执行手动轮播图爬取任务</span><br><span class="line">2025-10-14 20:22:04 - core.scheduler - INFO - 🖼️ 开始执行手动轮播图爬取任务</span><br><span class="line">2025-10-14 20:22:04 - core.cache - INFO - 开始轮播图数据更新，状态设为准备中</span><br><span class="line">2025-10-14 20:22:04 - core.scheduler - INFO - 手动轮播图爬取任务已提交到后台线程</span><br><span class="line">2025-10-14 20:22:04 - core.cache - INFO - 轮播图服务状态更新: preparing</span><br><span class="line">2025-10-14 20:22:04 - api.banner - INFO - 🔄 执行增强版Banner爬取任务</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - 🚀 初始化增强版手机Banner爬虫</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - 🚀 初始化增强版手机Banner爬虫</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - - Selenium可用: True</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - - Selenium可用: True</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - - requests-html可用: False</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - - requests-html可用: False</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - 🚀 开始增强版手机Banner爬取...</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - 🚀 开始增强版手机Banner爬取...</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - 🎯 目标URL: https://old.openharmony.cn/mainPlay</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法1: Selenium WebDriver</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - 📱 尝试方法1: Selenium WebDriver</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - 🎯 使用Selenium获取动态轮播图...</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - 🎯 使用Selenium获取动态轮播图...</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - 🧭 使用Chrome二进制: /usr/bin/chromium</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - 🌐 使用远程WebDriver: http://selenium:4444/wd/hub</span><br><span class="line">2025-10-14 20:22:04 - services.enhanced_mobile_banner_crawler - INFO - 🌐 使用远程WebDriver: http://selenium:4444/wd/hub</span><br><span class="line">2025-10-14 20:22:04 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 4 个内容块</span><br><span class="line">2025-10-14 20:22:05 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 14/407 篇文章: 开源鸿蒙荣获开放原子“2024年度操作系统领域国内活跃开源项目”</span><br><span class="line">2025-10-14 20:22:06 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 8 个内容块</span><br><span class="line">2025-10-14 20:22:07 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 15/407 篇文章: OpenHarmony项目群10-11月新增捐赠人</span><br><span class="line">2025-10-14 20:22:07 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 39 个内容块</span><br><span class="line">2025-10-14 20:22:08 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 16/407 篇文章: 大咖导师 源力唤醒|第二届开源鸿蒙创新应用挑战赛导师阵容重磅亮相</span><br><span class="line">2025-10-14 20:22:09 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 20:22:10 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 17/407 篇文章: 与鸿同行，探索无限！开源鸿蒙技术分论坛在武汉成功举办</span><br><span class="line">2025-10-14 20:22:11 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 49 个内容块</span><br><span class="line">2025-10-14 20:22:12 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 18/407 篇文章: 开源鸿蒙5.0重磅发布，共赴万物智联未来</span><br><span class="line">2025-10-14 20:22:12 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 17 个内容块</span><br><span class="line">2025-10-14 20:22:13 - services.enhanced_mobile_banner_crawler - INFO - 🔍 选择器 <span class="string">&#x27;.carousel img&#x27;</span> 找到 0 个图片元素</span><br><span class="line">2025-10-14 20:22:13 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 19/407 篇文章: 源鸿蒙 5.0 Release版本关键特性解读</span><br><span class="line">2025-10-14 20:22:14 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 24 个内容块</span><br><span class="line">2025-10-14 20:22:15 - services.openharmony_news_crawler - INFO - 🔍 正在处理第 20/407 篇文章: 精彩预告 | 2024开放原子开发者大会OpenHarmony技术分论坛等您来！</span><br><span class="line">2025-10-14 20:22:16 - services.openharmony_news_crawler - INFO - ✅ 成功解析文章，共 2 个内容块</span><br><span class="line">2025-10-14 20:22:16 - services.openharmony_news_crawler - INFO - 📦 [分批处理] 达到批处理大小 20，执行回调...</span><br></pre></td></tr></table></figure>
<p>芜湖！！！卧槽这次日志总算是没问题了！！！</p>
<p>这样一来我就可以访问一下我的接口了，啊啊啊啊一定要没问题啊。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://113.47.8.204:32776/api/banner/mobile</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;images&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;https://images.openharmony.cn/%E9%A6%96%E9%A1%B5/banner/20240411/4.1releas%E6%89%8B%E6%9C%BA.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://images.openharmony.cn/%E6%B4%BB%E5%8A%A8/%E5%88%9B%E6%96%B0%E8%B5%9B2023/20230831/%E4%B8%89%E6%96%B9%E5%BA%93%E7%A7%BB%E5%8A%A8%E7%AB%AF.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://images.openharmony.cn/%E6%B4%BB%E5%8A%A8/%E5%A4%A7%E8%B5%9B20250812/%E7%AC%AC%E4%B8%89%E5%B1%8A%E5%BC%80%E6%BA%90%E9%B8%BF%E8%92%99%E5%88%9B%E6%96%B0%E5%BA%94%E7%94%A8%E6%8C%91%E6%88%98%E8%B5%9B-%20750%20350.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://images.openharmony.cn/%E6%B4%BB%E5%8A%A8/%E6%8A%80%E6%9C%AF%E5%A4%A7%E4%BC%9A20250826/phone%20750x350.jpg&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;获取手机版Banner图片成功（缓存），共 4 张&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-14T20:40:18.480150&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>卧槽牛逼！！！成功了我再去测试一下其他接口。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/27.png" alt="27"></p>
<p>nbnb。这样一来我明天就可以开始真正的修改我的客户端基地址了。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/28.png" alt="28"></p>
<h3 id="CPU负载问题"><a href="#CPU负载问题" class="headerlink" title="CPU负载问题"></a>CPU负载问题</h3><p>在昨天顺利解决了我们的容器部署问题以及服务器WebDriver失效的问题之后，我本来以为万事大吉了就没有再管他，结果今天我上宝塔面板一看发现卧槽2核CPU持续性的维持在100%，连短暂的掉到99% 98%都没有出现，我赶紧关停了两个docker容器，服务器的CPU占用率终于是降下来了。我对于服务器的经验并不多，我也不确定这种情况是否正常，所以我决定先给GPT看看。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/29.jpg" alt="29"></p>
<p>在GPT生成回复的过程中我也是上网去进行了一下检索。</p>
<p>这种现象是明显不正常的，有可能是死循环代码，内存泄漏，不合理的先乘除配置，为优化的数据库查询，第三方API调用超时堆积，DDoS攻击，爬虫滥用等等很多的情况，这些都可能会导致我的服务器CPU跑满的情况。</p>
<p>这并不是直接购买一个新CPU可以解决的问题，我平常仅仅运行我博客网站的Nginx的过程中CPU占用率仅维持在4%左右，所以说明它基本上将两个核的CPU资源全都耗尽了，我怀疑的问题是我的爬虫程序运行时开了很多的线程去进行爬取，在本地的多核CPU运行起来并不是什么负担，但是在服务器上的2核小CPU上去运行就是一个巨大的负担了。</p>
<p>让我们先来看看GPT的建议。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">结论与现状</span><br><span class="line"></span><br><span class="line">现在功能正常：日志已切到远程 WebDriver，并能定位到轮播元素。</span><br><span class="line">CPU 100%并非常态，但在“初始大爬取 + Selenium 渲染页面”阶段，2 核机型确实会被打满一段时间。若任务结束很久仍 100%，需要定位哪个容器在持续占用。</span><br><span class="line">先快速定位“谁在吃 CPU”</span><br><span class="line"></span><br><span class="line">看容器资源占用</span><br><span class="line">docker stats</span><br><span class="line">进一步看容器内最耗 CPU 的进程</span><br><span class="line">App 容器: docker <span class="built_in">exec</span> -it NIOHServer sh -lc <span class="string">&quot;ps -eo pid,cmd,%cpu --sort=-%cpu | head&quot;</span></span><br><span class="line">浏览器容器: docker <span class="built_in">exec</span> -it selenium sh -lc <span class="string">&quot;ps -eo pid,cmd,%cpu --sort=-%cpu | head&quot;</span></span><br><span class="line">立即止血的几种安全操作</span><br><span class="line"></span><br><span class="line">给容器加 CPU 上限（不重建也可生效）</span><br><span class="line">docker update --cpus=0.8 NIOHServer</span><br><span class="line">docker update --cpus=0.8 selenium</span><br><span class="line">临时关闭定时任务，改为按需触发（避免后台并发）</span><br><span class="line">先停容器：docker stop NIOHServer</span><br><span class="line">以禁用调度器的方式启动（只保留手动触发）：docker run -d --name NIOHServer --network ohnet -p 32776:8001 --shm-size=1g -e TZ=Asia/Shanghai -e ENABLE_SCHEDULER=<span class="literal">false</span> -e BANNER_USE_ENHANCED=<span class="literal">true</span> -e SELENIUM_REMOTE_URL=http://selenium:4444/wd/hub -e SELENIUM_USE_USER_DATA_DIR=<span class="literal">false</span> openharmony-server:latest</span><br><span class="line">手动触发时再调用：curl -X POST <span class="string">&quot;http://127.0.0.1:32776/api/banner/crawl?use_enhanced=true&quot;</span></span><br><span class="line">不用 Selenium 时，把浏览器容器停掉，空闲时 0 负载</span><br><span class="line">docker stop selenium</span><br><span class="line">需要增强版再启动：docker start selenium</span><br><span class="line">为什么会打满</span><br><span class="line"></span><br><span class="line">初始新闻爬取解析 400+ 篇页面 + BeautifulSoup 解析会占满 2 核（短时内算正常）。</span><br><span class="line">Selenium/Chromium 渲染 Nuxt 动态页消耗较高，且我们默认每 3 小时有一次轮播图定时任务（与你的新闻定时任务同时开始，叠加负载）。</span><br><span class="line">线程池并发（当前 max_workers=6）也会放大 CPU 峰值。</span><br><span class="line">建议的稳态运行配置</span><br><span class="line"></span><br><span class="line">错峰调度：避免新闻和轮播图同一时刻启动（后续我可以把 banner 任务延后 10 分钟或加随机抖动）。</span><br><span class="line">控制并发：将线程池降到 2（需要我改 core/scheduler.py 的 max_workers=2）。</span><br><span class="line">资源限额：持续使用 docker update 或在 compose 里写死资源限制（cpus/mem/shm_size）。</span><br><span class="line">按需 Selenium：默认停 selenium，调用增强版接口时再启动，完毕后自动停（我可以在代码里做“按需启动/停止”集成）。</span><br><span class="line">你现在可以做的最小变更</span><br><span class="line"></span><br><span class="line">先看“谁在吃 CPU”：docker stats</span><br><span class="line">如果 selenium 持续高：docker update --cpus=0.6 selenium 或直接 docker stop selenium（用 Nuxt 兜底或传统解析）</span><br><span class="line">如果 app 持续高：用禁用调度器的方式重启 app，只在需要时手动触发；或者我把线程池降到 2 并提交。</span><br><span class="line">需要我：</span><br><span class="line"></span><br><span class="line">降低线程池并发（max_workers=2）并提交？</span><br><span class="line">将 banner 定时任务与新闻错峰（例如 banner 延后 10 分钟）？</span><br><span class="line">在增强版里补上 CSS 背景图提取（提升取图成功率，同时减少多次重试的渲染开销）？</span><br></pre></td></tr></table></figure>
<p>GPT给出的观点和我的观点一致，这并非常态，理论上来讲我们的程序只应该是在爬取新闻的过程中CPU才会飙高，这是正常的，但是当时我上到后台一看100%后只等待了不到一分钟左右的时间看占用率依旧是没有下降就直接去将两个容器停止了运行，所以说我目前并不清楚当前的爬虫进程是否是正处于爬取状态还是常态。所以我考虑的方案是先让GPT给我一套启动这两个镜像的命令，将两个容器启动并且确认轮播图功能正常之后立刻去查看两个容器分别的CPU占用率，等待第一轮爬取结束后再去分别观察CPU的占用率。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">给你一套可直接执行的命令：启动两个容器→确认轮播图→立刻看 CPU→等待首轮结束后再看 CPU。我已按你环境填好值（容器名 NIOHServer、镜像 openharmony-server:latest、对外端口 32776、网络 ohnet、远程 WebDriver selenium:4444）。</span><br><span class="line"></span><br><span class="line">启动与健康检查</span><br><span class="line">创建网络 + 启动/复用 Selenium + 等就绪 + 启动/复用 API</span><br><span class="line">bash</span><br><span class="line">docker network create ohnet || <span class="literal">true</span></span><br><span class="line">启动/复用 selenium（远程 WebDriver）</span><br><span class="line"><span class="keyword">if</span> ! docker ps -a --format <span class="string">&#x27;&#123;&#123;.Names&#125;&#125;&#x27;</span> | grep -q <span class="string">&#x27;^selenium$&#x27;</span>; <span class="keyword">then</span></span><br><span class="line">docker run -d --name selenium --network ohnet</span><br><span class="line">-p 4444:4444 --shm-size=2g --restart unless-stopped</span><br><span class="line">selenium/standalone-chromium:latest</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">docker start selenium</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">等待 WebDriver 就绪</span><br><span class="line"><span class="keyword">until</span> curl -sf http://127.0.0.1:4444/status | grep -E -qi <span class="string">&#x27;&quot;ready&quot;[[:space:]]*:[[:space:]]*true&#x27;</span>; <span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Waiting for Selenium remote WebDriver on :4444 ...&quot;</span>; <span class="built_in">sleep</span> 2;</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">启动/复用 API 容器（使用远程 WebDriver）</span><br><span class="line"><span class="keyword">if</span> ! docker ps -a --format <span class="string">&#x27;&#123;&#123;.Names&#125;&#125;&#x27;</span> | grep -q <span class="string">&#x27;^NIOHServer$&#x27;</span>; <span class="keyword">then</span></span><br><span class="line">docker run -d --name NIOHServer --network ohnet</span><br><span class="line">-p 32776:8001 --shm-size=1g</span><br><span class="line">-e TZ=Asia/Shanghai</span><br><span class="line">-e ENABLE_SCHEDULER=<span class="literal">true</span></span><br><span class="line">-e BANNER_USE_ENHANCED=<span class="literal">true</span></span><br><span class="line">-e SELENIUM_REMOTE_URL=http://selenium:4444/wd/hub</span><br><span class="line">-e SELENIUM_USE_USER_DATA_DIR=<span class="literal">false</span></span><br><span class="line">openharmony-server:latest</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">docker start NIOHServer</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">健康检查</span><br><span class="line"><span class="built_in">echo</span>; <span class="built_in">echo</span> <span class="string">&quot;API health:&quot;</span>; curl -s http://127.0.0.1:32776/health || <span class="literal">true</span></span><br><span class="line"><span class="built_in">echo</span>; <span class="built_in">echo</span> <span class="string">&quot;Selenium status:&quot;</span>; curl -s http://127.0.0.1:4444/status || <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">触发轮播图并立刻查看 CPU</span><br><span class="line">bash</span><br><span class="line">手动触发增强版轮播图爬取</span><br><span class="line"><span class="built_in">echo</span>; <span class="built_in">echo</span> <span class="string">&quot;Trigger banner crawl:&quot;</span>;</span><br><span class="line">curl -s -X POST <span class="string">&quot;http://127.0.0.1:32776/api/banner/crawl?use_enhanced=true&quot;</span> || <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">立即查看两个容器的 CPU/内存</span><br><span class="line"><span class="built_in">echo</span>; <span class="built_in">echo</span> <span class="string">&quot;Instant CPU snapshot:&quot;</span>;</span><br><span class="line">docker stats --no-stream --format <span class="string">&#x27;table &#123;&#123;.Name&#125;&#125;\t&#123;&#123;.CPUPerc&#125;&#125;\t&#123;&#123;.MemUsage&#125;&#125;\t&#123;&#123;.PIDs&#125;&#125;&#x27;</span> | egrep <span class="string">&#x27;NIOHServer|selenium&#x27;</span> || <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">各自容器内最耗CPU进程（便于诊断）</span><br><span class="line"><span class="built_in">echo</span>; <span class="built_in">echo</span> <span class="string">&quot;[Top procs] NIOHServer:&quot;</span>;</span><br><span class="line">docker <span class="built_in">exec</span> -it NIOHServer sh -lc <span class="string">&quot;ps -eo pid,comm,%cpu,%mem --sort=-%cpu | head&quot;</span> || <span class="literal">true</span></span><br><span class="line"><span class="built_in">echo</span>; <span class="built_in">echo</span> <span class="string">&quot;[Top procs] selenium:&quot;</span>;</span><br><span class="line">docker <span class="built_in">exec</span> -it selenium sh -lc <span class="string">&quot;ps -eo pid,comm,%cpu,%mem --sort=-%cpu | head&quot;</span> || <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">等待首轮爬取结束，再次采样 CPU</span><br><span class="line">以轮播图缓存 READY 为“首轮结束”标志（若 grep 不准，可用 Ctrl+C 中断）</span><br><span class="line">bash</span><br><span class="line"><span class="built_in">echo</span>; <span class="built_in">echo</span> <span class="string">&quot;Waiting for banner cache READY ... (Ctrl+C to abort)&quot;</span>;</span><br><span class="line"><span class="keyword">until</span> curl -sf <span class="string">&quot;http://127.0.0.1:32776/api/banner/status&quot;</span> | grep -qi <span class="string">&#x27;&quot;status&quot;[[:space:]]:[[:space:]]&quot;ready&quot;&#x27;</span>; <span class="keyword">do</span></span><br><span class="line"><span class="built_in">sleep</span> 5; <span class="keyword">done</span></span><br><span class="line">READY 后再取一次 CPU 快照与图片列表</span><br><span class="line"><span class="built_in">echo</span>; <span class="built_in">echo</span> <span class="string">&quot;CPU snapshot after first crawl:&quot;</span>;</span><br><span class="line">docker stats --no-stream --format <span class="string">&#x27;table &#123;&#123;.Name&#125;&#125;\t&#123;&#123;.CPUPerc&#125;&#125;\t&#123;&#123;.MemUsage&#125;&#125;\t&#123;&#123;.PIDs&#125;&#125;&#x27;</span> | egrep <span class="string">&#x27;NIOHServer|selenium&#x27;</span> || <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span>; <span class="built_in">echo</span> <span class="string">&quot;Banner images:&quot;</span>;</span><br><span class="line">curl -s <span class="string">&quot;http://127.0.0.1:32776/api/banner/mobile&quot;</span> || <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">如需持续观察（2秒一次，随时 Ctrl+C 停止）</span><br><span class="line">watch -n 2 <span class="string">&#x27;docker stats --no-stream --format &quot;table &#123;&#123;.Name&#125;&#125;\t&#123;&#123;.CPUPerc&#125;&#125;\t&#123;&#123;.MemUsage&#125;&#125;&quot; | egrep &quot;NIOHServer|selenium&quot;&#x27;</span></span><br><span class="line">说明</span><br><span class="line"></span><br><span class="line">以上命令会优先复用已存在容器；若不存在则自动 run。</span><br><span class="line">远程 WebDriver 地址固定用 http://selenium:4444/wd/hub（在 ohnet 网络内）。</span><br><span class="line">如果 READY 后 CPU 仍长期 &gt;80%，告诉我结果；我再给你：降并发（线程池改 6→2）、错峰调度（banner 晚新闻10分钟启动）、或加 docker 资源上限（docker update --cpus）。</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network create ohnet || <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> -f selenium 2&gt;/dev/null || <span class="literal">true</span> &amp;&amp; docker run -d --name selenium --network ohnet -p 4444:4444 --shm-size=2g --restart unless-stopped selenium/standalone-chromium:latest</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line"><span class="keyword">until</span> curl -sf http://127.0.0.1:4444/status | grep -E -qi <span class="string">&#x27;&quot;ready&quot;[[:space:]]*:[[:space:]]*true&#x27;</span>; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="string">&quot;Waiting for Selenium remote WebDriver on :4444 ...&quot;</span>; <span class="built_in">sleep</span> 2; <span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> -f NIOHServer 2&gt;/dev/null || <span class="literal">true</span> &amp;&amp; docker run -d --name NIOHServer --network ohnet -p 32776:8001 --shm-size=1g -e TZ=Asia/Shanghai -e ENABLE_SCHEDULER=<span class="literal">true</span> -e BANNER_USE_ENHANCED=<span class="literal">true</span> -e SELENIUM_REMOTE_URL=http://selenium:4444/wd/hub -e SELENIUM_USE_USER_DATA_DIR=<span class="literal">false</span> openharmony-server:latest</span><br></pre></td></tr></table></figure>
<p>到这一步之后就是成功启动了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s -X POST <span class="string">&quot;http://127.0.0.1:32776/api/banner/crawl?use_enhanced=true&quot;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stats --no-stream --format <span class="string">&#x27;table &#123;&#123;.Name&#125;&#125;\t&#123;&#123;.CPUPerc&#125;&#125;\t&#123;&#123;.MemUsage&#125;&#125;\t&#123;&#123;.PIDs&#125;&#125;&#x27;</span> | egrep <span class="string">&#x27;NIOHServer|selenium&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it NIOHServer sh -lc <span class="string">&quot;ps -eo pid,comm,%cpu,%mem --sort=-%cpu | head&quot;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it selenium sh -lc <span class="string">&quot;ps -eo pid,comm,%cpu,%mem --sort=-%cpu | head&quot;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">until</span> curl -sf <span class="string">&quot;http://127.0.0.1:32776/api/banner/status&quot;</span> | grep -qi <span class="string">&#x27;&quot;status&quot;[[:space:]]:[[:space:]]&quot;ready&quot;&#x27;</span>; <span class="keyword">do</span> <span class="built_in">sleep</span> 5; <span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stats --no-stream --format <span class="string">&#x27;table &#123;&#123;.Name&#125;&#125;\t&#123;&#123;.CPUPerc&#125;&#125;\t&#123;&#123;.MemUsage&#125;&#125;\t&#123;&#123;.PIDs&#125;&#125;&#x27;</span> | egrep <span class="string">&#x27;NIOHServer|selenium&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s <span class="string">&quot;http://127.0.0.1:32776/api/banner/mobile&quot;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">        Welcome to Huawei Cloud Service</span><br><span class="line"></span><br><span class="line">Last login: Sun Oct 12 17:36:14 +0800 2025 from 127.0.0.1</span><br><span class="line">The current terminal create by BT-Panel.</span><br><span class="line">root@hcss-ecs-2ad2:~# docker network create ohnet || <span class="literal">true</span></span><br><span class="line">Error response from daemon: network with name ohnet already exists</span><br><span class="line">root@hcss-ecs-2ad2:~# docker <span class="built_in">rm</span> -f selenium 2&gt;/dev/null || <span class="literal">true</span> &amp;&amp; docker run -d --name selenium --network ohnet -p 4444:4444 --shm-size=2g --restart unless-stopped selenium/standalone-chromium:latest</span><br><span class="line">selenium</span><br><span class="line">dd4e8ae815cfdfae39b8874426f3a6f09ec02acb826971801ca35d863cb27842</span><br><span class="line">root@hcss-ecs-2ad2:~# docker <span class="built_in">rm</span> -f NIOHServer 2&gt;/dev/null || <span class="literal">true</span> &amp;&amp; docker run -d --name NIOHServer --network ohnet -p 32776:8001 --shm-size=1g -e TZ=Asia/Shanghai -e ENABLE_SCHEDULER=<span class="literal">true</span> -e BANNER_USE_ENHANCED=<span class="literal">true</span> -e SELENIUM_REMOTE_URL=http://selenium:4444/wd/hub -e SELENIUM_USE_USER_DATA_DIR=<span class="literal">false</span> openharmony-server:latest</span><br><span class="line">NIOHServer</span><br><span class="line">5e952f4766e077d3d78e07908bfb2dd23a30790e9be81a3419323cac90703cd6</span><br><span class="line">root@hcss-ecs-2ad2:~# </span><br></pre></td></tr></table></figure>
<p>上面这就是这次启动服务的控制台全流程，接下来我们去看一下服务的启动情况。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/30.png" alt="30"></p>
<p>通过接口的访问数据可以看到启动时成功的。接下来就是观察docker的CPU占用率了。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/31.png" alt="31"></p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/32.png" alt="32"></p>
<p>我优先查看了CPU的占用率，发现没有问题，然后又通过日志确认当前就是爬取状态，爬取状态也没有，那为什么会出现飙高吃满的情况呢？这不合理啊。</p>
<p>现在只能说是后悔当时没有第一时间去查看一下容器的占用率是否正常了，应该第一时间留存相关的监控数据以便于分析排查，而不是直接关闭了。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/33.png" alt="33"></p>
<p>总占用率也是正常的，这还是在同时支持宝塔面板的服务状态下。</p>
<p>持续观察了一会儿发现占用率在持续走低，这更解释不了之前出现的情况了。我猜测可能是我的爬虫逻辑在运行了一段时间之后出现了类似死锁或者是线程池的无限制扩张问题导致了我们的服务CPU占用率飙升。那这就需要等待一天后再来看一看我们的服务器数据了，现在我先让GPT帮我检查一下代码中是否存在这种问题的隐患。并将更新时间拉长到6小时一更新，来减少我的流量开销。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">我做了两件事：</span><br><span class="line"></span><br><span class="line">代码体检要点</span><br><span class="line"></span><br><span class="line">线程池不会无限扩张：TaskScheduler 固定 max_workers=6，api/banner.py 单独线程池为2；不存在“无限增长”模式。core/scheduler.py:1, api/banner.py:31</span><br><span class="line">竞态/叠加风险较低：APScheduler 为同一 <span class="built_in">id</span> 的任务 replace_existing；默认 max_instances=1，且我们每次只提交一次后台线程任务，不会无限并发叠加。core/scheduler.py:20, 100</span><br><span class="line">死锁风险较低：缓存使用 RLock，set_updating 内部调用 set_status 仍是同一可重入锁，没问题。core/cache.py:34</span><br><span class="line">峰值来源合理：初始大爬取 400+ 篇 + Selenium 渲染动态页会打满 2 核；若下一次定时与手工触发重叠，也可能短时拉高整体负载。</span><br><span class="line">已按你的要求把定时更新改为每 6 小时一次</span><br><span class="line"></span><br><span class="line">修改：新闻与轮播图的定时任务 IntervalTrigger 从 3 小时 → 6 小时</span><br><span class="line">文件：core/scheduler.py</span><br><span class="line">提交：chore(scheduler): extend update interval to every 6 hours <span class="keyword">for</span> news and banner to reduce load and traffic</span><br><span class="line">当前分支：feature/docker-containerization-deployment-issue-4</span><br><span class="line">建议的观察步骤</span><br><span class="line"></span><br><span class="line">现在的配置下，启动后只会在初始化阶段有短时 CPU 抬升；后续每 6h 触发一次。</span><br><span class="line">若再出现长时间 100%，立刻执行：</span><br><span class="line">docker stats —锁定耗CPU容器</span><br><span class="line">docker <span class="built_in">exec</span> -it &lt;容器&gt; ps -eo pid,<span class="built_in">comm</span>,%cpu,%mem --<span class="built_in">sort</span>=-%cpu | <span class="built_in">head</span> —锁定进程</span><br><span class="line">我可以继续：</span><br><span class="line">将线程池并发从 6 降到 2（更稳、更省CPU）</span><br><span class="line">错峰调度（banner 比新闻晚 10 分钟启动，避免同一时刻峰值）</span><br><span class="line">增强 Selenium 提取 CSS 背景图，减少多次重试造成的渲染开销</span><br><span class="line">需要哪一个，直接回我编号即可。</span><br></pre></td></tr></table></figure>
<p>嗯，看起来Claude留下来的代码还是质量挺高的，GPT给出的建议也都很有道理，这样的话我觉得这三条建议都可以执行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">已全部执行并提交到 feature/docker-containerization-deployment-issue-4。</span><br><span class="line"></span><br><span class="line">并发下调</span><br><span class="line"></span><br><span class="line">线程池 max_workers: 6 → 2</span><br><span class="line">文件: core/scheduler.py</span><br><span class="line">错峰调度</span><br><span class="line"></span><br><span class="line">新闻每 6 小时</span><br><span class="line">轮播图每 6 小时但首发延迟 10 分钟（与新闻错峰）</span><br><span class="line">文件: core/scheduler.py</span><br><span class="line">增强版爬虫优化</span><br><span class="line"></span><br><span class="line">增加 CSS background-image 抓取（computedStyle），补齐只用 img 时漏抓的问题</span><br><span class="line">统一对 JS 返回的 URL 做绝对化、去重</span><br><span class="line">文件: services/enhanced_mobile_banner_crawler.py</span><br><span class="line">提交记录</span><br><span class="line"></span><br><span class="line">chore(scheduler): extend update interval to every 6 hours <span class="keyword">for</span> news and banner to reduce load and traffic</span><br><span class="line">perf(scheduler): reduce thread pool to 2 and stagger banner job by 10min; perf(banner/selenium): extract CSS background-image via computed style and normalize URLs</span><br><span class="line">下一步</span><br><span class="line"></span><br><span class="line">重建并启动服务以生效最近两次改动</span><br><span class="line">docker <span class="built_in">rm</span> -f NIOHServer || <span class="literal">true</span></span><br><span class="line">docker run -d --name NIOHServer --network ohnet -p 32776:8001 --shm-size=1g -e TZ=Asia/Shanghai -e ENABLE_SCHEDULER=<span class="literal">true</span> -e BANNER_USE_ENHANCED=<span class="literal">true</span> -e SELENIUM_REMOTE_URL=http://selenium:4444/wd/hub -e SELENIUM_USE_USER_DATA_DIR=<span class="literal">false</span> openharmony-server:latest</span><br><span class="line">触发并观察</span><br><span class="line">curl -s -X POST <span class="string">&quot;http://127.0.0.1:32776/api/banner/crawl?use_enhanced=true&quot;</span></span><br><span class="line">docker stats —观察 NIOHServer/selenium CPU</span><br><span class="line">curl -s <span class="string">&quot;http://127.0.0.1:32776/api/banner/mobile&quot;</span> —确认有图</span><br><span class="line">如果还需更激进的限流（比如给容器加 cpus=0.6），告诉我，我给出一键 update/run 命令。</span><br></pre></td></tr></table></figure>
<p>这一次完整的重新部署之后我像往常一样只间隔了一分钟就去测试获取轮播图的接口发现失败了，吓我一跳，仔细一想好像是因为线程池的总量被限制了，导致爬虫的运行被减慢或者滞后了，所以我多等了几分钟再次进行测试总算是成功了，吓我一跳。</p>
<p>出去吃个饭回来又持续的观察了一段时间发现我后端服务容器占用率始终为0.1%，而Selenium容器占用率始终为0.2%，仅仅是维持着最基础的进程生命周期，完全没有出现任何异常波动，再加上此前GPT已经针对于我们的代码进行了检查和优化，我不能理解为什么那天出现了CPU占用拉满的情况，现在只能是再等一等去进行进一步的观察了。</p>
<p>先让我们向下一步推进吧。</p>
<h3 id="合并分支并完成issue"><a href="#合并分支并完成issue" class="headerlink" title="合并分支并完成issue"></a>合并分支并完成issue</h3><p>终于是到了合并分支的时刻了，这场小闹剧已经持续太久了，该让他结束了。</p>
<div style="
  background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
  border: 1px solid #404040;
  border-left: 4px solid #28a745;
  border-radius: 12px;
  padding: 20px;
  margin: 16px 0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  transition: all 0.3s ease;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  max-width: 500px;
">
<div style="display: flex; align-items: center; margin-bottom: 12px;">
<svg style="width: 20px; height: 20px; margin-right: 8px; fill: #28a745;" viewbox="0 0 16 16">
<path d="M8 9.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"/>
<path fill-rule="evenodd" d="M8 0a8 8 0 100 16A8 8 0 008 0zM1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0z"/>
</svg>
<span style="color: #28a745; font-size: 12px; font-weight: 600; margin-right: 8px;">OPEN</span>
<div style="margin: 0; color: #ffffff; font-size: 16px; font-weight: 600;">
<a target="_blank" rel="noopener" href="https://github.com/ifLabVibe/NowInOpenHarmony/issues/4" style="color: #ffffff; text-decoration: none;">
后端docker容器化部署
</a>
</div>
</div>
<div style="display: flex; align-items: center; margin-bottom: 12px;">
<span style="color: #d4d4d4; font-size: 12px; margin-right: 16px;">
#4
</span>
<span style="color: #d4d4d4; font-size: 12px; margin-right: 16px;">
ifLabVibe/NowInOpenHarmony
</span>
</div>
<p style="color: #d4d4d4; margin: 0 0 16px 0; font-size: 14px; line-height: 1.5;">
为实现NowInOpenHarmony应用的正式上架，需要完成后端服务器部署、应用商店适配、用户隐私政策制定等关键工作。这是从开源项目到商业化应用的重要里程碑。
</p>
<div style="display: flex; align-items: center; gap: 16px; margin-bottom: 12px;">
<span style="display: flex; align-items: center; color: #d4d4d4; font-size: 12px;">
<svg style="width: 12px; height: 12px; margin-right: 4px; fill: #d4d4d4;" viewbox="0 0 16 16">
<path d="M8 2a.75.75 0 01.75.75v3.5h3.5a.75.75 0 010 1.5h-3.5v3.5a.75.75 0 01-1.5 0v-3.5h-3.5a.75.75 0 010-1.5h3.5v-3.5A.75.75 0 018 2z"/>
</svg>
enhancement
</span>
<span style="color: #6f42c1; font-size: 12px; background: rgba(111, 66, 193, 0.1); padding: 2px 6px; border-radius: 4px;">
应用上架
</span>
<span style="color: #0969da; font-size: 12px; background: rgba(9, 105, 218, 0.1); padding: 2px 6px; border-radius: 4px;">
服务器部署
</span>
</div>
<div style="margin-top: 12px;">
<a target="_blank" rel="noopener" href="https://github.com/ifLabVibe/NowInOpenHarmony/issues/4" style="
color: #ffffff;
text-decoration: none;
font-size: 12px;
border: 1px solid #404040;
padding: 6px 12px;
border-radius: 6px;
background: rgba(255, 255, 255, 0.05);
transition: all 0.2s ease;
display: inline-block;
" onmouseover="this.style.background='rgba(255, 255, 255, 0.1)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'">
查看Issue
</a>
</div>
</div>

<p>这是在第一篇上线笔记中开启的issue，现在该合并并关闭了。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/34.png" alt="34"></p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/35.png" alt="35"></p>
<p>ok，这下舒服了</p>
<h2 id="客户端更换基地址"><a href="#客户端更换基地址" class="headerlink" title="客户端更换基地址"></a>客户端更换基地址</h2><h3 id="issue创建"><a href="#issue创建" class="headerlink" title="issue创建"></a>issue创建</h3><p>哎，终于是到了这一步了，太不容易了。</p>
<p>相当简单，但依旧规范化，先去创建issue。</p>
<div style="
  background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
  border: 1px solid #404040;
  border-left: 4px solid #28a745;
  border-radius: 12px;
  padding: 20px;
  margin: 16px 0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  transition: all 0.3s ease;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  max-width: 500px;
">
<div style="display: flex; align-items: center; margin-bottom: 12px;">
<svg style="width: 20px; height: 20px; margin-right: 8px; fill: #28a745;" viewbox="0 0 16 16">
<path d="M8 9.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"/>
<path fill-rule="evenodd" d="M8 0a8 8 0 100 16A8 8 0 008 0zM1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0z"/>
</svg>
<span style="color: #28a745; font-size: 12px; font-weight: 600; margin-right: 8px;">OPEN</span>
<div style="margin: 0; color: #ffffff; font-size: 16px; font-weight: 600;">
<a target="_blank" rel="noopener" href="https://github.com/ifLabVibe/NowInOpenHarmony/issues/7" style="color: #ffffff; text-decoration: none;">
客户端基地址更换
</a>
</div>
</div>
<div style="display: flex; align-items: center; margin-bottom: 12px;">
<span style="color: #d4d4d4; font-size: 12px; margin-right: 16px;">
#7
</span>
<span style="color: #d4d4d4; font-size: 12px; margin-right: 16px;">
ifLabVibe/NowInOpenHarmony
</span>
</div>
<p style="color: #d4d4d4; margin: 0 0 16px 0; font-size: 14px; line-height: 1.5;">
此前客户端一致使用的是本地局域网IP，为了方便测试和临时更换服务主机。现在后端成功上线部署，该更换为服务器地址了。
</p>
<div style="display: flex; align-items: center; gap: 16px; margin-bottom: 12px;">
<span style="display: flex; align-items: center; color: #d4d4d4; font-size: 12px;">
<svg style="width: 12px; height: 12px; margin-right: 4px; fill: #d4d4d4;" viewbox="0 0 16 16">
<path d="M8 2a.75.75 0 01.75.75v3.5h3.5a.75.75 0 010 1.5h-3.5v3.5a.75.75 0 01-1.5 0v-3.5h-3.5a.75.75 0 010-1.5h3.5v-3.5A.75.75 0 018 2z"/>
</svg>
enhancement
</span>
<span style="color: #0366d6; font-size: 12px; background: rgba(3, 102, 214, 0.1); padding: 2px 6px; border-radius: 4px;">
客户端配置
</span>
<span style="color: #ea4c89; font-size: 12px; background: rgba(234, 76, 137, 0.1); padding: 2px 6px; border-radius: 4px;">
地址更换
</span>
</div>
<div style="margin-top: 12px;">
<a target="_blank" rel="noopener" href="https://github.com/ifLabVibe/NowInOpenHarmony/issues/7" style="
color: #ffffff;
text-decoration: none;
font-size: 12px;
border: 1px solid #404040;
padding: 6px 12px;
border-radius: 6px;
background: rgba(255, 255, 255, 0.05);
transition: all 0.2s ease;
display: inline-block;
" onmouseover="this.style.background='rgba(255, 255, 255, 0.1)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'">
查看Issue
</a>
</div>
</div>

<h3 id="基地址更换"><a href="#基地址更换" class="headerlink" title="基地址更换"></a>基地址更换</h3><p>这一步真的简单到极致全要归功去此前我的规范化开发。我将全部常量都统一写到了一个文件中，同时封装了指定基地址的axios网络请求工具，这样我修改一个常量就可以直接实现全局的修改。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/36.png" alt="36"></p>
<p>改这一行直接秒掉。让我们测试看一看。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/37.png" alt="37"></p>
<p>nb直接秒掉！</p>
<p>然后再让我降一下API为API17，来在平板上测试一下，主要是因为我的手机已经升级到鸿蒙6了，但是平板因为太新了没办法升级，所以我只好先暂时降级安装了。</p>
<p>但是我突然发现了新的问题，这好像是虚假繁荣，我没有真正成功的去获取数据，这好像是之前我遗留的数据。我卸载重新安装一下试试。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/38.jpg" alt="38"></p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/39.jpg" alt="39"></p>
<p>在重新安装之后我发掘了不对。手机上是轮播图数据异常，而在平板上是完全没有数据了。卧槽我直接炸缸了，我看了日志，发现全是超时，我修改了一下我axios请求工具的超时时长从三秒改到了10秒，发现依旧是超时没有什么区别。我强制自己冷静下来去思考问题可能发生的点，首先我客户端的全流程是在本地都跑通了的，同时在前面的日志截图中也可以看到在第一次测试时轮播图接口是跑通了的，我再去查看了一下我服务器的CPU占用率，发现是正常的，维持在13%的低占用率，理论上响应速度应该是很快的，随后我复制了我常量文件中的IP地址，再拼接上接口的资源路径，在浏览器中进行测试，发现也是正常的。</p>
<p>这时我脑海中闪过一个念想就是从手机和平板的问题表现差异去展开分析。</p>
<p>手机上在重装之前是轮播图通过日志来看是正常的，而新闻看似是正常的实则应该是之前本地测试时的数据，从新安装之后是轮播图明确的超时了，而新闻接口则是正常的。对于平板，我是直接进行了重装操作，在重装之后轮播图和新闻接口都超时了。我仔细观察了一下手机和平板的网络设置差异，当时我手机使用的是流量，平板使用的是校园网，而电脑上用浏览器测试的环境则是连接的校园网但是梯子到了美国的IP。分析一下成功的三个接口：手机上的新闻、电脑上的新闻和电脑上的轮播图，他们的共同点都是并非校园网的代理，我猜测可能是校园网的安全设置阻断了直接使用http对IP进行访问？当然这只是我的猜测，这并非是是确定的原因。</p>
<p>就在我还在思考更加具体的排查方案时，我重新刷新了一次，结果发现两个设备都成功获取数据了，而且网络设置没有进行任何更改（？）</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/40.jpg" alt="40"></p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/41.jpg" alt="41"></p>
<p>通过多次下拉测试发现好多次报错弹窗，则说明我的后端数据获取依旧不稳定，但是在浏览器访问却是十分稳定的能够获取数据，我不太理解是为什么说实话，感觉这个稳定程度想要上线并不太可能，但至少它上线了，破破烂烂的上线了也是上线了，前后端完整的一个鸿蒙项目。</p>
<h3 id="手动PR尝试"><a href="#手动PR尝试" class="headerlink" title="手动PR尝试"></a>手动PR尝试</h3><p>之前一致是用CC或者是codex帮我去进行分支的创建以及代码的推送，这次我向亲手尝试一下创建新分支并且提交pr。这次就先去使用DevEcoStudio自带的git工具去进行操作吧，下一次再去进行命令行的尝试。</p>
<h4 id="分支创建"><a href="#分支创建" class="headerlink" title="分支创建"></a>分支创建</h4><p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/42.png" alt="42"></p>
<p>首先通过分支创建功能去进行一个新的分支创建，命名为“fix/client_base_address_change”。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/43.png" alt="43"></p>
<p>创建成功之后就会像是上图一样，在本地的分支文件夹中多出了我们新增的一个分支。由于这个属于是小的修正，所以我就直接是算在fix文件夹下了。</p>
<h4 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h4><p>随后我们就需要在这个分支下去进行commit，要注意一定是当前的文件夹而不是主分支文件夹。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/44.png" alt="44"></p>
<p>在commit的时候先看一下最上方显示的是提交到哪个分支，随后再去设置中勾选一下签名随后就可以进行commit了。</p>
<p>在提交之后我才想起来我的作者签名好像邮箱用错了，不是我平常用的默认邮箱，所以我就想要撤销这一次提交，撤销之后进行修正并重新进行提交。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/45.png" alt="45"></p>
<p>右键选择撤销提交，随后再使用commit进行提交。</p>
<p>在成功commit之后我们就可以看到当前的分支中的commit记录已经领先于主分支了。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/46.png" alt="46"></p>
<h4 id="分支推送与pr创建"><a href="#分支推送与pr创建" class="headerlink" title="分支推送与pr创建"></a>分支推送与pr创建</h4><p>随后我们就可以将当前分支进行推送了。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/47.png" alt="47"></p>
<p>这里可以看到IDE会自动识别到当前本地分支在远程仓库并不存在，这样我们就可以将当前的分支进行创建并推送了。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/48.png" alt="48"></p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/49.png" alt="49"></p>
<p>来到GitHub之后就能看到我们刚刚推送的分支，并且GitHub也是自动显示了合并提示，我们接下来点击“Compare &amp; pull request”按钮，去进行pr的创建就可以了。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/50.png" alt="50"></p>
<p>自动审查代码冲突之后，我们就可以进行合并了。</p>
<p><img src="/2025/10/12/NowInOpenHarmonyPutaway2/51.png" alt="51"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/XBXyftx">XBXyftx</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://xbxyftx.top">https://xbxyftx.top</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">此文章版权归XBXyftx所有，如有转载，请註明来自原作者</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%8A%80%E6%9C%AF%E5%90%91/">技术向</a><a class="post-meta__tags" href="/tags/%E9%B8%BF%E8%92%99/">鸿蒙</a><a class="post-meta__tags" href="/tags/%E9%A1%B9%E7%9B%AE/">项目</a><a class="post-meta__tags" href="/tags/%E5%BC%80%E6%BA%90%E4%B9%8B%E5%A4%8F/">开源之夏</a><a class="post-meta__tags" href="/tags/NowInOpenHarmony/">NowInOpenHarmony</a></div><div class="post-share"><div class="social-share" data-image="/imgs/ArticleTopImgs/NowInOpenHarmonyPutawayTopImg.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://lib.baomitu.com/social-share.js/1.0.16/css/share.min.css" media="print" onload="this.media='all'"><script src="https://lib.baomitu.com/social-share.js/1.0.16/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/09/29/ProgrammingTips/" title="编程小知识点"><img class="cover" src="/imgs/ArticleTopImgs/ProgrammingTipsTopImg.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">编程小知识点</div></div><div class="info-2"><div class="info-item-1">各种杂七杂八的程序员下饭菜</div></div></div></a><a class="pagination-related" href="/2025/10/20/NowInOpenHarmonyPutAway3/" title="NowInOpenHarmony上架笔记之后端部署优化"><img class="cover" src="/imgs/ArticleTopImgs/NowInOpenHarmonyPutawayTopImg.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">NowInOpenHarmony上架笔记之后端部署优化</div></div><div class="info-2"><div class="info-item-1">NowInOpenHarmony上架笔记2，记录在后端初次部署后反复出现</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/06/29/OpenSourceSummer2025/" title="开源之夏NowInOpenHarmony"><img class="cover" src="/imgs/ArticleTopImgs/OpenSourceSummerTopImg.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-29</div><div class="info-item-2">开源之夏NowInOpenHarmony</div></div><div class="info-2"><div class="info-item-1">开源之夏2025项目开发笔记</div></div></div></a><a class="pagination-related" href="/2025/10/20/NowInOpenHarmonyPutAway3/" title="NowInOpenHarmony上架笔记之后端部署优化"><img class="cover" src="/imgs/ArticleTopImgs/NowInOpenHarmonyPutawayTopImg.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-20</div><div class="info-item-2">NowInOpenHarmony上架笔记之后端部署优化</div></div><div class="info-2"><div class="info-item-1">NowInOpenHarmony上架笔记2，记录在后端初次部署后反复出现</div></div></div></a><a class="pagination-related" href="/2025/09/27/NowInOpenHarmonyPutaway/" title="NowInOpenHarmony上架笔记之openharmony官网重构"><img class="cover" src="/imgs/ArticleTopImgs/NowInOpenHarmonyPutawayTopImg.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-27</div><div class="info-item-2">NowInOpenHarmony上架笔记之openharmony官网重构</div></div><div class="info-2"><div class="info-item-1">NowInOpenHarmony上架笔记，记录从后端打包到OpenHarmony官网重构（已被迫断更）</div></div></div></a><a class="pagination-related" href="/2025/11/04/Hong-Xiaoyi/" title="鸿小易二代！"><img class="cover" src="/imgs/ArticleTopImgs/hxyTopImg.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-04</div><div class="info-item-2">鸿小易二代！</div></div><div class="info-2"><div class="info-item-1">鸿小易（第二代），你的鸿蒙开发好帮手！！！</div></div></div></a><a class="pagination-related" href="/2025/03/31/%E2%80%9CHongXiaoYi%E2%80%9D/" title="鸿小易项目开发笔记"><img class="cover" src="/imgs/ArticleTopImgs/hxyTopImg.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-31</div><div class="info-item-2">鸿小易项目开发笔记</div></div><div class="info-2"><div class="info-item-1">鸿小易，你的鸿蒙开发好帮手。</div></div></div></a><a class="pagination-related" href="/2025/03/11/MianShiTong2/" title="面试通项目开发笔记2"><img class="cover" src="/imgs/ArticleTopImgs/MSTTopImg.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-11</div><div class="info-item-2">面试通项目开发笔记2</div></div><div class="info-2"><div class="info-item-1">面试通项目开发笔记2（暂时停更）</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/logo.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">XBXyftx</div><div class="author-info-description">博安千古情如此<br/>璇玉如华自醉从</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">40</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">40</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/XBXyftx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/XBXyftx" target="_blank" title="Github"><i class="fab fa-github" style="color: #c3ffff;"></i></a><a class="social-icon" href="mailto:shuaixbx02@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="/img/wechat.png" target="_blank" title="WeChat"><i class="fa-brands fa-weixin" style="color: #7bb342;"></i></a></div></div><div class="card-widget card-info visitor-info"><div class="card-content"><div class="visitor-welcome"><i class="fas fa-heart"></i><span id="visitor-text">欢迎来访！</span></div><div class="visitor-details"><div class="visitor-location"><i class="fas fa-map-marker-alt"></i><span id="visitor-location-text">正在获取位置信息...</span></div><div class="visitor-ip"><i class="fas fa-globe"></i><span>IP地址: </span><span id="visitor-ip-text">获取中...</span></div><div class="visitor-distance"><i class="fas fa-route"></i><span id="visitor-distance-text">距离博主 加载中...</span></div><div class="visitor-tip"><i class="fas fa-moon"></i><span id="visitor-tip-text">晚上好，夜生活嗨起来！</span></div></div></div><script>// 访问者信息获取
(function() {
  // IP地址获取API列表（按优先级排序）
  const ipApis = [
    'https://api.ip.sb/geoip',
    'https://ipapi.co/json/',
    'https://freegeoip.app/json/',
    'https://ipinfo.io/json'
  ];
  
  let currentApiIndex = 0;
  
  function tryGetLocation() {
    if (currentApiIndex >= ipApis.length) {
      // 所有API都失败了，显示错误信息
      handleError('所有IP服务都无法访问');
      return;
    }
    
    const currentApi = ipApis[currentApiIndex];
    
    fetch(currentApi)
      .then(response => {
        if (!response.ok) throw new Error(`HTTP ${response.status}`);
        return response.json();
      })
      .then(data => {
        processLocationData(data, currentApi);
      })
      .catch(error => {
        console.warn(`API ${currentApi} 失败:`, error);
        currentApiIndex++;
        setTimeout(tryGetLocation, 1000); // 1秒后尝试下一个API
      });
  }
  
  function processLocationData(data, apiUrl) {
    let country, region, city, ip, latitude, longitude;
    
    // 根据不同API格式处理数据
    if (apiUrl.includes('ip.sb')) {
      country = data.country || '未知';
      region = data.region || '未知';
      city = data.city || '未知';
      ip = data.ip || '未知';
      latitude = data.latitude;
      longitude = data.longitude;
    } else if (apiUrl.includes('ipapi.co')) {
      country = data.country_name || '未知';
      region = data.region || '未知';
      city = data.city || '未知';
      ip = data.ip || '未知';
      latitude = data.latitude;
      longitude = data.longitude;
    } else if (apiUrl.includes('freegeoip.app')) {
      country = data.country_name || '未知';
      region = data.region_name || '未知';
      city = data.city || '未知';
      ip = data.ip || '未知';
      latitude = data.latitude;
      longitude = data.longitude;
    } else if (apiUrl.includes('ipinfo.io')) {
      country = data.country || '未知';
      const loc = data.region || '未知';
      region = loc;
      city = data.city || '未知';
      ip = data.ip || '未知';
      if (data.loc) {
        const coords = data.loc.split(',');
        latitude = parseFloat(coords[0]);
        longitude = parseFloat(coords[1]);
      }
    }
    
    // 更新IP地址
    document.getElementById('visitor-ip-text').textContent = ip;
    
    // 更新位置信息和欢迎文字
    let locationText = '';
    if (country === '中国' || country === 'China' || country === 'CN') {
      locationText = `${region} ${city}`;
                    document.getElementById('visitor-text').innerHTML = `欢迎来自 ${region} ${city} 的朋友♥️`;
    } else {
      locationText = `${country} ${region}`;
      document.getElementById('visitor-text').innerHTML = `欢迎来自 ${country} 的朋友♥️`;
    }
    document.getElementById('visitor-location-text').textContent = locationText;
    
    // 计算距离（可配置博主位置）
    if (latitude && longitude && !isNaN(latitude) && !isNaN(longitude)) {
      const bloggerLat = 39.9042; // 北京纬度
      const bloggerLng = 116.4074; // 北京经度
      const distance = calculateDistance(latitude, longitude, bloggerLat, bloggerLng);
      
      if (distance < 1) {
        document.getElementById('visitor-distance-text').textContent = `距离博主 ${(distance * 1000).toFixed(0)} 米！`;
      } else if (distance < 100) {
        document.getElementById('visitor-distance-text').textContent = `距离博主 ${distance.toFixed(1)} 公里！`;
      } else {
        document.getElementById('visitor-distance-text').textContent = `距离博主 ${distance.toFixed(0)} 公里！`;
      }
    } else {
      document.getElementById('visitor-distance-text').textContent = '距离计算中...';
    }
    
    // 根据时间设置问候语
    updateGreeting();
  }
  
  function updateGreeting() {
    const now = new Date();
    const hour = now.getHours();
    let greeting = '';
    let icon = 'fas fa-sun';
    
    if (hour >= 6 && hour < 12) {
      greeting = '上午好，新的一天开始了！';
      icon = 'fas fa-sun';
    } else if (hour >= 12 && hour < 14) {
      greeting = '中午好，记得吃午饭哦！';
      icon = 'fas fa-sun';
    } else if (hour >= 14 && hour < 18) {
      greeting = '下午好，午后时光真美好！';
      icon = 'fas fa-cloud-sun';
    } else if (hour >= 18 && hour < 22) {
      greeting = '晚上好，夜生活嗨起来！';
      icon = 'fas fa-moon';
    } else {
      greeting = '深夜了，注意休息哦！';
      icon = 'fas fa-moon';
    }
    
    const tipElement = document.getElementById('visitor-tip-text');
    const tipIcon = tipElement.parentElement.querySelector('i');
    tipElement.textContent = greeting;
    if (tipIcon) {
      tipIcon.className = icon;
    }
  }
  
  function handleError(message) {
    document.getElementById('visitor-ip-text').textContent = '获取失败';
    document.getElementById('visitor-location-text').textContent = '获取失败';
    document.getElementById('visitor-distance-text').textContent = '距离未知';
    document.getElementById('visitor-text').innerHTML = '欢迎来访！';
    console.error('获取访问者信息失败:', message);
  }
  
  // 计算两点间距离的函数（使用Haversine公式）
  function calculateDistance(lat1, lon1, lat2, lon2) {
    const R = 6371; // 地球半径，单位：千米
    const dLat = deg2rad(lat2 - lat1);
    const dLon = deg2rad(lon2 - lon1);
    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
              Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) *
              Math.sin(dLon/2) * Math.sin(dLon/2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    return R * c;
  }
  
  function deg2rad(deg) {
    return deg * (Math.PI/180);
  }
  
  // 启动获取位置信息
  tryGetLocation();
  
  // 每分钟更新一次问候语
  setInterval(updateGreeting, 60000);
})(); </script></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">welcome！<br/><img src="/imgs/ClaudeCode.png" title="1748944170064.jpg" class="announcementImg"/></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E7%89%88OpenHarmony%E5%AE%98%E7%BD%91%E7%9A%84%E5%86%85%E5%AE%B9%E5%8F%98%E5%8C%96"><span class="toc-number">2.</span> <span class="toc-text">新版OpenHarmony官网的内容变化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E6%9E%84%E5%90%8E%E7%AB%AF"><span class="toc-number">3.</span> <span class="toc-text">重构后端</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A9CC%E7%9A%84%E6%96%B0%E5%AF%B9%E8%AF%9D%E7%86%9F%E6%82%89%E7%8E%B0%E5%9C%A8%E7%9A%84%E5%90%8E%E7%AB%AF%E9%80%BB%E8%BE%91"><span class="toc-number">3.1.</span> <span class="toc-text">让CC的新对话熟悉现在的后端逻辑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E6%9E%84%E8%BF%87%E7%A8%8B"><span class="toc-number">3.2.</span> <span class="toc-text">重构过程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E9%87%8D%E5%91%BD%E5%90%8D"><span class="toc-number">3.2.1.</span> <span class="toc-text">文件重命名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#old%E5%AD%90%E5%9F%9F%E5%90%8D%E9%87%8D%E6%9E%84"><span class="toc-number">3.2.2.</span> <span class="toc-text">old子域名重构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E4%B8%8A%E7%BA%BF"><span class="toc-number">3.3.</span> <span class="toc-text">打包上线</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E6%89%93%E5%8C%85"><span class="toc-number">3.3.1.</span> <span class="toc-text">本地打包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%91%E7%AB%AF%E9%83%A8%E7%BD%B2%E9%95%9C%E5%83%8F"><span class="toc-number">3.3.2.</span> <span class="toc-text">云端部署镜像</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AE%E6%92%AD%E5%9B%BE%E7%88%AC%E5%8F%96%E9%97%AE%E9%A2%98"><span class="toc-number">3.3.3.</span> <span class="toc-text">轮播图爬取问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%8D%A2codex"><span class="toc-number">3.3.4.</span> <span class="toc-text">更换codex</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CPU%E8%B4%9F%E8%BD%BD%E9%97%AE%E9%A2%98"><span class="toc-number">3.4.</span> <span class="toc-text">CPU负载问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%88%E5%B9%B6%E5%88%86%E6%94%AF%E5%B9%B6%E5%AE%8C%E6%88%90issue"><span class="toc-number">3.5.</span> <span class="toc-text">合并分支并完成issue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%9B%B4%E6%8D%A2%E5%9F%BA%E5%9C%B0%E5%9D%80"><span class="toc-number">4.</span> <span class="toc-text">客户端更换基地址</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#issue%E5%88%9B%E5%BB%BA"><span class="toc-number">4.1.</span> <span class="toc-text">issue创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E5%9C%B0%E5%9D%80%E6%9B%B4%E6%8D%A2"><span class="toc-number">4.2.</span> <span class="toc-text">基地址更换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8PR%E5%B0%9D%E8%AF%95"><span class="toc-number">4.3.</span> <span class="toc-text">手动PR尝试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%94%AF%E5%88%9B%E5%BB%BA"><span class="toc-number">4.3.1.</span> <span class="toc-text">分支创建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#commit"><span class="toc-number">4.3.2.</span> <span class="toc-text">commit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%94%AF%E6%8E%A8%E9%80%81%E4%B8%8Epr%E5%88%9B%E5%BB%BA"><span class="toc-number">4.3.3.</span> <span class="toc-text">分支推送与pr创建</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/11/04/Hong-Xiaoyi/" title="鸿小易二代！"><img src="/imgs/ArticleTopImgs/hxyTopImg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="鸿小易二代！"/></a><div class="content"><a class="title" href="/2025/11/04/Hong-Xiaoyi/" title="鸿小易二代！">鸿小易二代！</a><time datetime="2025-11-04T11:45:52.000Z" title="发表于 2025-11-04 19:45:52">2025-11-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/01/ThoughtsOnVibeCoding/" title="在虚构与现实之间，守住那束灵感之光"><img src="/imgs/ArticleTopImgs/ThoughtsOnVibeCodingTopImg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在虚构与现实之间，守住那束灵感之光"/></a><div class="content"><a class="title" href="/2025/11/01/ThoughtsOnVibeCoding/" title="在虚构与现实之间，守住那束灵感之光">在虚构与现实之间，守住那束灵感之光</a><time datetime="2025-11-01T08:53:54.000Z" title="发表于 2025-11-01 16:53:54">2025-11-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/20/NowInOpenHarmonyPutAway3/" title="NowInOpenHarmony上架笔记之后端部署优化"><img src="/imgs/ArticleTopImgs/NowInOpenHarmonyPutawayTopImg.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NowInOpenHarmony上架笔记之后端部署优化"/></a><div class="content"><a class="title" href="/2025/10/20/NowInOpenHarmonyPutAway3/" title="NowInOpenHarmony上架笔记之后端部署优化">NowInOpenHarmony上架笔记之后端部署优化</a><time datetime="2025-10-20T06:17:05.000Z" title="发表于 2025-10-20 14:17:05">2025-10-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/12/NowInOpenHarmonyPutaway2/" title="NowInOpenHarmony上架笔记之再起新征程"><img src="/imgs/ArticleTopImgs/NowInOpenHarmonyPutawayTopImg.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NowInOpenHarmony上架笔记之再起新征程"/></a><div class="content"><a class="title" href="/2025/10/12/NowInOpenHarmonyPutaway2/" title="NowInOpenHarmony上架笔记之再起新征程">NowInOpenHarmony上架笔记之再起新征程</a><time datetime="2025-10-12T06:17:05.000Z" title="发表于 2025-10-12 14:17:05">2025-10-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/09/29/ProgrammingTips/" title="编程小知识点"><img src="/imgs/ArticleTopImgs/ProgrammingTipsTopImg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="编程小知识点"/></a><div class="content"><a class="title" href="/2025/09/29/ProgrammingTips/" title="编程小知识点">编程小知识点</a><time datetime="2025-09-29T06:29:20.000Z" title="发表于 2025-09-29 14:29:20">2025-09-29</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/footerBg.png);"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2025 By XBXyftx</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/#/Integrated/index"><span>备案号：京ICP备2025126467号</span></a></div><div></div><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><script>var now = new Date(); 
function createtime() { 
var grt = new Date("4/25/2024 18:30"); // 在此处修改你的建站时间
now.setTime(now.getTime() + 250); 
days = (now - grt) / 1000 / 60 / 60 / 24; 
dnum = Math.floor(days); 
hours = (now - grt) / 1000 / 60 / 60 - (24 * dnum); 
hnum = Math.floor(hours); 
if (String(hnum).length == 1) { hnum = "0" + hnum; } 
minutes = (now - grt) / 1000 / 60 - (24 * 60 * dnum) - (60 * hnum); 
mnum = Math.floor(minutes); 
if (String(mnum).length == 1) { mnum = "0" + mnum; } 
seconds = (now - grt) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
snum = Math.round(seconds); 
if (String(snum).length == 1) { snum = "0" + snum; } 
document.getElementById("timeDate").innerHTML = "本网站已运行 " + dnum + " 天 "; 
document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
} 
setInterval(createtime, 250);</script></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa-solid fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa-solid fa-arrow-rotate-right"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa-solid fa-arrow-right"></i></a><a class="rightMenu-item" id="menu-radompage" href="javascript:window.location.href = window.location.origin;"><i class="fa-solid fa-house"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa-solid fa-copy"></i><span>复制</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:rmf.switchReadMode();"><i class="fa-solid fa-book"></i><span>阅读模式</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.js"></script><!-- 瀑布流JavaScript - 只在首页加载--><!-- 文章打字机效果 - 只在文章页面加载--><script src="/js/typewriter-effect.js"></script><!-- 网络监控器 - 帮助定位503问题--><script src="/js/network-monitor.js"></script><script src="/js/topimg-monitor.js"></script><!-- 入场弹窗功能--><script src="/js/entrance-popup-config.js"></script><script src="/js/entrance-popup.js"></script><!-- 基础懒加载功能--><script src="/js/lazy-loading.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikooxbx.netlify.app/.netlify/functions/twikoo',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://twikooxbx.netlify.app/.netlify/functions/twikoo',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('/js/twikoo.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script>localStorage.setItem('theme','dark')</script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script> // 强制锁定为暗黑模式 localStorage.setItem('theme', 'dark'); // 防止其他脚本覆盖模式 document.documentElement.setAttribute('data-theme', 'dark'); </script><link rel="stylesheet" href="/css/styles.css"><script> document.querySelectorAll('#post-comment).forEach(el => { el.style.backgroundColor = 'rgba(255, 255, 255, 0.6)'; }); </script><script src="/js/jquery-3.6.0.min.js"></script><script src="/js/rightmenu.js"></script><link rel="twikoo" href="/css/twikoo.css"><script src="/js/happy-title.js" async></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="/%5Bobject%20Object%5D"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="99" count="99" mobile="true" src="/%5Bobject%20Object%5D"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementsByClassName('recent-posts')[0];
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/06/24/typewriter/" alt=""><img width="48" height="48" src="/imgs/ArticleTopImgs/TypeWriteTopImg.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-06-24</span><a class="blog-slider__title" href="2025/06/24/typewriter/" alt="">Butterfly主题实现简介打字机</a><div class="blog-slider__text">详细介绍如何在Hexo的Butterfly主题中添加炫酷的打字机效果，包含完整的实现代码和配置方法。</div><a class="blog-slider__button" href="2025/06/24/typewriter/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/04/30/ToTheApril2025/" alt=""><img width="48" height="48" src="/imgs/ArticleTopImgs/AprilTopImg.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-04-30</span><a class="blog-slider__title" href="2025/04/30/ToTheApril2025/" alt="">致2025那个繁忙的4月</a><div class="blog-slider__text">人们总是匆匆向前，殊不知时光易逝啊……（本文图量较大加载较慢持续更新中！！！）</div><a class="blog-slider__button" href="2025/04/30/ToTheApril2025/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/16/yiDuo/" alt=""><img width="48" height="48" src="/imgs/ArticleTopImgs/yiduoTopImg.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-16</span><a class="blog-slider__title" href="2025/03/16/yiDuo/" alt="">关于鸿蒙的一多能力</a><div class="blog-slider__text">一多能力的学习笔记</div><a class="blog-slider__button" href="2025/03/16/yiDuo/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/02/04/V2/" alt=""><img width="48" height="48" src="/imgs/ArticleTopImgs/V2TopImg.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-02-04</span><a class="blog-slider__title" href="2025/02/04/V2/" alt="">浅谈鸿蒙状态管理V1——&gt;V2</a><div class="blog-slider__text">用实际代码测试与我的开发经验，解析鸿蒙状态管理V2中难以理解的内容，帮助开发者们更好的理解和使用状态管理V2版本。</div><a class="blog-slider__button" href="2025/02/04/V2/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/04/20/RemoteCommunication/" alt=""><img width="48" height="48" src="/imgs/ArticleTopImgs/RCPTopImg.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-04-20</span><a class="blog-slider__title" href="2025/04/20/RemoteCommunication/" alt="">远场通信服务</a><div class="blog-slider__text">本文将介绍鸿蒙远场通信服务</div><a class="blog-slider__button" href="2025/04/20/RemoteCommunication/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><!-- hexo injector body_end end --></body></html>