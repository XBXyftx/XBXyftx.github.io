/* Sequential Image Loader æ ·å¼æ–‡ä»¶ */

/* æ‡’åŠ è½½å›¾ç‰‡åŸºç¡€æ ·å¼ */
img.lazy-loading {
  background-color: #f5f5f5;
  border-radius: 4px;
  transition: all 0.3s ease;
}

/* æ‡’åŠ è½½å›¾ç‰‡æ¿€æ´»åŠ è½½çŠ¶æ€ */
img.lazy-loading-active {
  background-color: #e8f4f8;
  position: relative;
}

/* æ‡’åŠ è½½å›¾ç‰‡åŠ è½½å®ŒæˆçŠ¶æ€ */
img.lazy-loaded {
  background-color: transparent;
}

/* æ‡’åŠ è½½å›¾ç‰‡åŠ è½½å¤±è´¥çŠ¶æ€ */
img.lazy-load-error {
  background-color: #ffeaea;
  border: 1px dashed #ffcdd2;
}

/* ä¸ºä¸åŒåŠ è½½çŠ¶æ€æ·»åŠ è½»å¾®çš„è§†è§‰åé¦ˆï¼Œä½†ä¸å½±å“åŸæœ‰æ ·å¼ */
img[data-loading-state="waiting"] {
  /* ç­‰å¾…åŠ è½½çŠ¶æ€ */
}

img[data-loading-state="loading"] {
  /* æ­£åœ¨åŠ è½½çŠ¶æ€ */
}

img[data-loading-state="loaded"] {
  /* åŠ è½½å®ŒæˆçŠ¶æ€ */
}

img[data-loading-state="error"] {
  /* åŠ è½½å¤±è´¥çŠ¶æ€ */
}

/* è§†é¢‘æ‡’åŠ è½½æ ·å¼ */
video.lazy-loading {
  background-color: #f5f5f5;
  border-radius: 4px;
  transition: all 0.3s ease;
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;
}

/* è§†é¢‘æ‡’åŠ è½½æ¿€æ´»çŠ¶æ€ */
video.lazy-loading-active {
  background-color: #e8f4f8;
  position: relative;
}

/* è§†é¢‘æ‡’åŠ è½½å®ŒæˆçŠ¶æ€ */
video.lazy-loaded {
  background-color: transparent;
  background-image: none !important;
}

/* è§†é¢‘æ‡’åŠ è½½å¤±è´¥çŠ¶æ€ */
video.lazy-load-error {
  background-color: #ffeaea;
  border: 1px dashed #ffcdd2;
}

/* ä¸ºä¸åŒè§†é¢‘åŠ è½½çŠ¶æ€æ·»åŠ è½»å¾®çš„è§†è§‰åé¦ˆ */
video[data-loading-state="waiting"] {
  /* ç­‰å¾…åŠ è½½çŠ¶æ€ */
}

video[data-loading-state="loading"] {
  /* æ­£åœ¨åŠ è½½çŠ¶æ€ */
}

video[data-loading-state="loaded"] {
  /* åŠ è½½å®ŒæˆçŠ¶æ€ */
}

video[data-loading-state="error"] {
  /* åŠ è½½å¤±è´¥çŠ¶æ€ */
}

/* ä¸è¿›è¡Œæ‡’åŠ è½½çš„ç‰¹æ®Šå›¾ç‰‡ */
img.no-sequential,
img[data-no-lazy],
.avatar-img,
#page-header img,
.navbar img,
.nav img,
.sidebar img,
.menu img,
.site-info img {
  /* è¿™äº›å›¾ç‰‡ä¸ä¼šè¢«æ‡’åŠ è½½ç³»ç»Ÿå¤„ç†ï¼Œä¿æŒåŸæœ‰è¡Œä¸º */
}

/* åŠ è½½å¤±è´¥çš„å›¾ç‰‡ */
img.sequential-error {
  opacity: 0.6;
  filter: grayscale(100%);
  border: 2px dashed #ff6b6b;
  background: #ffe0e0;
}

/* åŠ è½½åŠ¨ç”» */
@keyframes sequential-loading {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* æ·¡å…¥åŠ¨ç”» */
@keyframes sequential-fade-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* è¿›åº¦æ¡æ ·å¼å¢å¼º */
#image-loader-progress {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

#image-loader-progress .progress-text {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
}

#image-loader-progress .progress-text::before {
  content: "ğŸ“¸";
  font-size: 16px;
}

/* æš—é»‘æ¨¡å¼é€‚é… */
[data-theme="dark"] #image-loader-progress {
  background: rgba(20, 20, 20, 0.9);
  border-color: rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] img.sequential-error {
  background: #2d1b1b;
  border-color: #ff4757;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  #image-loader-progress {
    top: 10px;
    right: 10px;
    left: 10px;
    width: auto;
    font-size: 12px;
    padding: 12px 16px;
  }
  
  #image-loader-progress .progress-container {
    min-width: auto;
  }
}

/* ç€‘å¸ƒæµå›¾ç‰‡åŠ è½½ä¼˜åŒ– - ç§»é™¤æ ·å¼ä¿®æ”¹ */
.waterfall-item img[data-sequential-processed]:not([data-loaded]) {
  /* ä¸ä¿®æ”¹å›¾ç‰‡æ ·å¼ */
}

/* æ–‡ç« å†…å®¹å›¾ç‰‡åŠ è½½ä¼˜åŒ– - ç§»é™¤æ ·å¼ä¿®æ”¹ */
#article-container img[data-sequential-processed]:not([data-loaded]) {
  /* ä¸ä¿®æ”¹å›¾ç‰‡æ ·å¼ */
}

/* Lightboxå›¾ç‰‡é¢„åŠ è½½çŠ¶æ€ - ç§»é™¤æ ·å¼ä¿®æ”¹ */
.lightbox-image[data-sequential-processed]:not([data-loaded]) {
  /* ä¸ä¿®æ”¹å›¾ç‰‡æ ·å¼ */
}

/* åŠ è½½é”™è¯¯æç¤ºæ ·å¼ */
.sequential-error-tooltip {
  position: relative;
}

.sequential-error-tooltip::after {
  content: "å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œç‚¹å‡»é‡è¯•";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 8px 12px;
  border-radius: 4px;
  font-size: 12px;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

.sequential-error-tooltip:hover::after {
  opacity: 1;
}

/* åŠ è½½å®Œæˆé€šçŸ¥åŠ¨ç”» */
.sequential-complete-notification {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0, 150, 136, 0.9);
  color: white;
  padding: 20px 40px;
  border-radius: 50px;
  font-size: 16px;
  font-weight: 500;
  z-index: 10000;
  animation: sequential-notification 3s ease;
  pointer-events: none;
}

@keyframes sequential-notification {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.8);
  }
  20% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  80% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.8);
  }
}

/* ç¦ç”¨é»˜è®¤çš„å›¾ç‰‡æ‡’åŠ è½½æ ·å¼å†²çª */
img[data-sequential-processed][loading="lazy"] {
  loading: auto;
}

/* ä¸butterflyä¸»é¢˜çš„å…¼å®¹æ€§æ ·å¼ - ç§»é™¤æ ·å¼ä¿®æ”¹ */
.recent-post-item img[data-sequential-processed]:not([data-loaded]) {
  /* ä¸ä¿®æ”¹å›¾ç‰‡æ ·å¼ */
}

.card-widget img[data-sequential-processed]:not([data-loaded]) {
  /* ä¸ä¿®æ”¹å›¾ç‰‡æ ·å¼ */
}

/* å›¾ç‰‡åŠ è½½æˆåŠŸçš„ç‰¹æ•ˆ - ç§»é™¤æ‰€æœ‰è§†è§‰æ•ˆæœ */
img.sequential-loaded {
  /* ä¸æ·»åŠ ä»»ä½•æ ·å¼ï¼Œä¿æŒå›¾ç‰‡åŸæœ‰å¤–è§‚ */
}

@keyframes sequential-success-badge {
  0% {
    opacity: 0;
    transform: scale(0);
  }
  30% {
    opacity: 1;
    transform: scale(1.2);
  }
  70% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(0.8);
  }
}

/* æ€§èƒ½ä¼˜åŒ–ï¼šå‡å°‘é‡ç»˜ */
img[data-sequential-processed] {
  will-change: opacity, filter;
  backface-visibility: hidden;
  transform: translateZ(0);
}

/* æ‰“å°æ ·å¼ */
@media print {
  #image-loader-progress {
    display: none !important;
  }
  
  img[data-sequential-processed] {
    opacity: 1 !important;
    filter: none !important;
    animation: none !important;
  }
}
